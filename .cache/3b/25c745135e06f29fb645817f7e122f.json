{"id":"rSzd","dependencies":[{"name":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\package.json","includedInParent":true,"mtime":1614283944862},{"name":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\package.json","includedInParent":true,"mtime":499162500000},{"name":"minimal-event-emitter","loc":{"line":18,"column":27},"parent":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\sources\\ImageUrl.js","resolved":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\minimal-event-emitter\\index.js"},{"name":"../NetworkError","loc":{"line":19,"column":27},"parent":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\sources\\ImageUrl.js","resolved":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\NetworkError.js"},{"name":"../collections/WorkPool","loc":{"line":20,"column":23},"parent":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\sources\\ImageUrl.js","resolved":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\collections\\WorkPool.js"},{"name":"../util/chain","loc":{"line":21,"column":20},"parent":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\sources\\ImageUrl.js","resolved":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\util\\chain.js"},{"name":"../util/delay","loc":{"line":22,"column":20},"parent":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\sources\\ImageUrl.js","resolved":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\util\\delay.js"},{"name":"../util/now","loc":{"line":23,"column":18},"parent":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\sources\\ImageUrl.js","resolved":"A:\\Code\\projects\\pc\\pcpano1\\app-files\\node_modules\\marzipano\\src\\util\\now.js"}],"generated":{"js":"\"use strict\";var r=require(\"minimal-event-emitter\"),e=require(\"../NetworkError\"),t=require(\"../collections/WorkPool\"),n=require(\"../util/chain\"),i=require(\"../util/delay\"),u=require(\"../util/now\"),o={x:\"x\",y:\"y\",z:\"z\",f:\"face\"},l=\"bdflru\",a=4,c=1e4;function s(r,e){e=e||{},this._loadPool=new t({concurrency:e.concurrency||a}),this._retryDelay=e.retryDelay||c,this._retryMap={},this._sourceFromTile=r}function f(r){return new RegExp(\"\\\\{(\"+r+\")\\\\}\",\"g\")}r(s),s.prototype.loadAsset=function(r,t,o){var l,a=this,c=this._retryDelay,s=this._retryMap,f=this._sourceFromTile(t),y=f.url,d=f.rect,h=r.loadImage.bind(r,y,d),v=s[y];if(null!=v){var p=u()-v;p<c?l=c-p:(l=0,delete s[y])}var w=i.bind(null,l);return n(w,function(r){return a._loadPool.push(h,function(n,i){n?(n instanceof e&&(s[y]=u(),a.emit(\"networkError\",n,t)),r(n,t)):(delete s[y],r(null,t,i))})})(o)},s.fromString=function(r,e){var t=(e=e||{})&&e.cubeMapPreviewFaceOrder||l;return new s(e.cubeMapPreviewUrl?function(r){return 0===r.z?function(r){var n=t.indexOf(r.face)/6;return{url:e.cubeMapPreviewUrl,rect:{x:0,y:n,width:1,height:1/6}}}(r):n(r)}:n,e);function n(e){var t=r;for(var n in o){var i=o[n],u=f(n),l=e.hasOwnProperty(i)?e[i]:\"\";t=t.replace(u,l)}return{url:t}}},module.exports=s;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":16,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":18,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":18,"column":0},"generated":{"line":1,"column":17}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":18,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":18,"column":0},"generated":{"line":1,"column":27}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":19,"column":0},"generated":{"line":1,"column":52}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":19,"column":0},"generated":{"line":1,"column":54}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":19,"column":0},"generated":{"line":1,"column":62}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":20,"column":0},"generated":{"line":1,"column":81}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":20,"column":0},"generated":{"line":1,"column":83}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":20,"column":0},"generated":{"line":1,"column":91}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":21,"column":0},"generated":{"line":1,"column":118}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":21,"column":0},"generated":{"line":1,"column":120}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":21,"column":0},"generated":{"line":1,"column":128}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":22,"column":0},"generated":{"line":1,"column":145}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":22,"column":0},"generated":{"line":1,"column":147}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":22,"column":0},"generated":{"line":1,"column":155}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":23,"column":0},"generated":{"line":1,"column":172}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":23,"column":0},"generated":{"line":1,"column":174}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":23,"column":0},"generated":{"line":1,"column":182}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":27,"column":0},"generated":{"line":1,"column":197}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":27,"column":0},"generated":{"line":1,"column":199}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":28,"column":0},"generated":{"line":1,"column":200}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":28,"column":0},"generated":{"line":1,"column":202}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":29,"column":0},"generated":{"line":1,"column":206}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":29,"column":0},"generated":{"line":1,"column":208}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":30,"column":0},"generated":{"line":1,"column":212}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":30,"column":0},"generated":{"line":1,"column":214}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":31,"column":0},"generated":{"line":1,"column":218}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":31,"column":0},"generated":{"line":1,"column":220}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":35,"column":0},"generated":{"line":1,"column":228}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":35,"column":0},"generated":{"line":1,"column":230}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":38,"column":0},"generated":{"line":1,"column":239}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":38,"column":0},"generated":{"line":1,"column":241}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":41,"column":0},"generated":{"line":1,"column":243}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":41,"column":0},"generated":{"line":1,"column":245}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":62,"column":0},"generated":{"line":1,"column":249}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":62,"column":0},"generated":{"line":1,"column":258}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":62,"column":0},"generated":{"line":1,"column":260}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":62,"column":0},"generated":{"line":1,"column":262}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":64,"column":0},"generated":{"line":1,"column":265}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":64,"column":0},"generated":{"line":1,"column":267}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":64,"column":0},"generated":{"line":1,"column":270}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":66,"column":0},"generated":{"line":1,"column":273}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":66,"column":0},"generated":{"line":1,"column":278}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":66,"column":0},"generated":{"line":1,"column":288}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":66,"column":0},"generated":{"line":1,"column":292}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":66,"column":0},"generated":{"line":1,"column":294}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":67,"column":0},"generated":{"line":1,"column":295}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":67,"column":0},"generated":{"line":1,"column":307}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":67,"column":0},"generated":{"line":1,"column":309}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":67,"column":0},"generated":{"line":1,"column":322}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":70,"column":0},"generated":{"line":1,"column":326}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":70,"column":0},"generated":{"line":1,"column":331}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":70,"column":0},"generated":{"line":1,"column":343}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":70,"column":0},"generated":{"line":1,"column":345}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":70,"column":0},"generated":{"line":1,"column":357}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":71,"column":0},"generated":{"line":1,"column":359}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":71,"column":0},"generated":{"line":1,"column":364}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":71,"column":0},"generated":{"line":1,"column":374}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":73,"column":0},"generated":{"line":1,"column":377}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":73,"column":0},"generated":{"line":1,"column":382}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":73,"column":0},"generated":{"line":1,"column":398}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":191,"column":0},"generated":{"line":1,"column":400}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":191,"column":0},"generated":{"line":1,"column":409}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":191,"column":0},"generated":{"line":1,"column":411}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":193,"column":0},"generated":{"line":1,"column":414}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":193,"column":0},"generated":{"line":1,"column":421}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":193,"column":0},"generated":{"line":1,"column":425}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":192,"column":0},"generated":{"line":1,"column":432}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":192,"column":0},"generated":{"line":1,"column":439}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":192,"column":0},"generated":{"line":1,"column":441}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":193,"column":0},"generated":{"line":1,"column":448}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":76,"column":0},"generated":{"line":1,"column":453}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":76,"column":0},"generated":{"line":1,"column":455}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":458}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":460}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":470}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":480}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":489}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":491}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":79,"column":0},"generated":{"line":1,"column":493}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":81,"column":0},"generated":{"line":1,"column":496}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":113,"column":0},"generated":{"line":1,"column":500}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":81,"column":0},"generated":{"line":1,"column":502}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":81,"column":0},"generated":{"line":1,"column":504}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":83,"column":0},"generated":{"line":1,"column":509}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":83,"column":0},"generated":{"line":1,"column":511}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":83,"column":0},"generated":{"line":1,"column":516}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":84,"column":0},"generated":{"line":1,"column":528}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":84,"column":0},"generated":{"line":1,"column":530}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":84,"column":0},"generated":{"line":1,"column":535}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":86,"column":0},"generated":{"line":1,"column":545}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":86,"column":0},"generated":{"line":1,"column":547}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":86,"column":0},"generated":{"line":1,"column":552}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":86,"column":0},"generated":{"line":1,"column":568}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":87,"column":0},"generated":{"line":1,"column":571}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":87,"column":0},"generated":{"line":1,"column":573}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":87,"column":0},"generated":{"line":1,"column":575}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":88,"column":0},"generated":{"line":1,"column":579}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":88,"column":0},"generated":{"line":1,"column":581}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":88,"column":0},"generated":{"line":1,"column":583}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":588}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":590}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":592}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":602}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":607}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":609}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":90,"column":0},"generated":{"line":1,"column":611}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":614}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":616}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":114,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":115,"column":0},"generated":{"line":1,"column":621}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":115,"column":0},"generated":{"line":1,"column":624}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":115,"column":0},"generated":{"line":1,"column":630}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":115,"column":0},"generated":{"line":1,"column":632}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":116,"column":0},"generated":{"line":1,"column":633}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":117,"column":0},"generated":{"line":1,"column":637}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":116,"column":0},"generated":{"line":1,"column":639}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":117,"column":0},"generated":{"line":1,"column":643}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":118,"column":0},"generated":{"line":1,"column":645}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":118,"column":0},"generated":{"line":1,"column":647}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":120,"column":0},"generated":{"line":1,"column":649}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":120,"column":0},"generated":{"line":1,"column":651}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":120,"column":0},"generated":{"line":1,"column":653}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":123,"column":0},"generated":{"line":1,"column":656}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":123,"column":0},"generated":{"line":1,"column":658}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":124,"column":0},"generated":{"line":1,"column":667}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":124,"column":0},"generated":{"line":1,"column":669}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":128,"column":0},"generated":{"line":1,"column":673}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":128,"column":0},"generated":{"line":1,"column":677}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":128,"column":0},"generated":{"line":1,"column":679}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":128,"column":0},"generated":{"line":1,"column":681}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":128,"column":0},"generated":{"line":1,"column":686}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":128,"column":0},"generated":{"line":1,"column":691}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":130,"column":0},"generated":{"line":1,"column":694}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":130,"column":0},"generated":{"line":1,"column":701}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":130,"column":0},"generated":{"line":1,"column":703}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":92,"column":0},"generated":{"line":1,"column":705}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":92,"column":0},"generated":{"line":1,"column":714}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":717}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":724}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":726}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":736}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":741}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":743}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":752}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":96,"column":0},"generated":{"line":1,"column":754}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":97,"column":0},"generated":{"line":1,"column":757}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":98,"column":0},"generated":{"line":1,"column":760}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":98,"column":0},"generated":{"line":1,"column":773}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":100,"column":0},"generated":{"line":1,"column":777}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":100,"column":0},"generated":{"line":1,"column":779}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":100,"column":0},"generated":{"line":1,"column":782}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":101,"column":0},"generated":{"line":1,"column":786}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":101,"column":0},"generated":{"line":1,"column":788}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":101,"column":0},"generated":{"line":1,"column":793}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":101,"column":0},"generated":{"line":1,"column":808}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":101,"column":0},"generated":{"line":1,"column":810}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":103,"column":0},"generated":{"line":1,"column":814}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":103,"column":0},"generated":{"line":1,"column":816}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":103,"column":0},"generated":{"line":1,"column":818}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":106,"column":0},"generated":{"line":1,"column":830}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":106,"column":0},"generated":{"line":1,"column":832}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":107,"column":0},"generated":{"line":1,"column":835}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":107,"column":0},"generated":{"line":1,"column":837}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":107,"column":0},"generated":{"line":1,"column":842}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":107,"column":0},"generated":{"line":1,"column":844}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":130,"column":0},"generated":{"line":1,"column":851}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":130,"column":0},"generated":{"line":1,"column":852}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":151,"column":0},"generated":{"line":1,"column":856}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":151,"column":0},"generated":{"line":1,"column":858}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":151,"column":0},"generated":{"line":1,"column":869}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":151,"column":0},"generated":{"line":1,"column":878}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":151,"column":0},"generated":{"line":1,"column":880}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":154,"column":0},"generated":{"line":1,"column":883}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":154,"column":0},"generated":{"line":1,"column":887}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":152,"column":0},"generated":{"line":1,"column":890}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":152,"column":0},"generated":{"line":1,"column":892}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":152,"column":0},"generated":{"line":1,"column":895}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":154,"column":0},"generated":{"line":1,"column":900}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":154,"column":0},"generated":{"line":1,"column":902}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":154,"column":0},"generated":{"line":1,"column":927}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":158,"column":0},"generated":{"line":1,"column":929}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":158,"column":0},"generated":{"line":1,"column":936}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":158,"column":0},"generated":{"line":1,"column":940}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":156,"column":0},"generated":{"line":1,"column":942}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":156,"column":0},"generated":{"line":1,"column":944}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":173,"column":0},"generated":{"line":1,"column":962}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":173,"column":0},"generated":{"line":1,"column":971}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":174,"column":0},"generated":{"line":1,"column":974}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":174,"column":0},"generated":{"line":1,"column":981}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":174,"column":0},"generated":{"line":1,"column":985}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":174,"column":0},"generated":{"line":1,"column":987}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":182,"column":0},"generated":{"line":1,"column":989}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":182,"column":0},"generated":{"line":1,"column":998}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1001}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1005}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1007}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1009}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1017}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1019}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":183,"column":0},"generated":{"line":1,"column":1025}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":184,"column":0},"generated":{"line":1,"column":1027}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":184,"column":0},"generated":{"line":1,"column":1033}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":185,"column":0},"generated":{"line":1,"column":1034}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":185,"column":0},"generated":{"line":1,"column":1038}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":185,"column":0},"generated":{"line":1,"column":1040}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1058}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1063}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1064}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1066}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1068}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1070}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1072}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1078}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1080}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1087}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":186,"column":0},"generated":{"line":1,"column":1089}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":175,"column":0},"generated":{"line":1,"column":1093}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":175,"column":0},"generated":{"line":1,"column":1094}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":178,"column":0},"generated":{"line":1,"column":1097}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":178,"column":0},"generated":{"line":1,"column":1099}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":156,"column":0},"generated":{"line":1,"column":1103}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":158,"column":0},"generated":{"line":1,"column":1105}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":160,"column":0},"generated":{"line":1,"column":1108}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":160,"column":0},"generated":{"line":1,"column":1117}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":160,"column":0},"generated":{"line":1,"column":1119}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":161,"column":0},"generated":{"line":1,"column":1122}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":161,"column":0},"generated":{"line":1,"column":1126}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":161,"column":0},"generated":{"line":1,"column":1128}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":163,"column":0},"generated":{"line":1,"column":1130}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":163,"column":0},"generated":{"line":1,"column":1134}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":163,"column":0},"generated":{"line":1,"column":1138}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":163,"column":0},"generated":{"line":1,"column":1143}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":163,"column":0},"generated":{"line":1,"column":1145}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":164,"column":0},"generated":{"line":1,"column":1146}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":164,"column":0},"generated":{"line":1,"column":1150}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":164,"column":0},"generated":{"line":1,"column":1152}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":164,"column":0},"generated":{"line":1,"column":1154}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":165,"column":0},"generated":{"line":1,"column":1157}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":165,"column":0},"generated":{"line":1,"column":1159}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":165,"column":0},"generated":{"line":1,"column":1161}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1164}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1166}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1168}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1183}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1186}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1188}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":166,"column":0},"generated":{"line":1,"column":1191}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":167,"column":0},"generated":{"line":1,"column":1194}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":167,"column":0},"generated":{"line":1,"column":1196}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":167,"column":0},"generated":{"line":1,"column":1198}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":167,"column":0},"generated":{"line":1,"column":1206}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":167,"column":0},"generated":{"line":1,"column":1208}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":170,"column":0},"generated":{"line":1,"column":1211}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":170,"column":0},"generated":{"line":1,"column":1217}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":170,"column":0},"generated":{"line":1,"column":1218}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":170,"column":0},"generated":{"line":1,"column":1222}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":196,"column":0},"generated":{"line":1,"column":1227}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":196,"column":0},"generated":{"line":1,"column":1234}},{"source":"node_modules/marzipano/src/sources/ImageUrl.js","original":{"line":196,"column":0},"generated":{"line":1,"column":1242}}],"sources":{"node_modules/marzipano/src/sources/ImageUrl.js":"/*\n * Copyright 2016 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n'use strict';\n\nvar eventEmitter = require('minimal-event-emitter');\nvar NetworkError = require('../NetworkError');\nvar WorkPool = require('../collections/WorkPool');\nvar chain = require('../util/chain');\nvar delay = require('../util/delay');\nvar now = require('../util/now');\n\n\n// Map template properties to their corresponding tile properties.\nvar templateProperties = {\n  x: 'x',\n  y: 'y',\n  z: 'z',\n  f: 'face'\n};\n\n// Default face order for cube maps.\nvar defaultCubeMapFaceOrder = 'bdflru';\n\n// Default maximum number of concurrent requests.\nvar defaultConcurrency = 4;\n\n// Default milliseconds to wait before retrying failed requests.\nvar defaultRetryDelay = 10000;\n\n\n/**\n * @class ImageUrlSource\n * @implements Source\n * @classdesc\n *\n * A {@link Source} that loads {@link Asset assets} from images given a URL and\n * a crop rectangle.\n *\n * @param {Function} sourceFromTile Function that receives a tile and returns\n * a `{ url, rect }` object, where `url` is an image URL and `rect`, when\n * present, is an `{ x, y, width, height }` object in normalized coordinates\n * denoting the portion of the image to use.\n * @param {Object} opts\n * @param {number} [opts.concurrency=4] Maximum number of tiles to request at\n *     the same time. The limit is per {@link ImageSourceUrl} instance.\n * @param {number} [opts.retryDelay=10000] Time in milliseconds to wait before\n *     retrying a failed request.\n */\nfunction ImageUrlSource(sourceFromTile, opts) {\n\n  opts = opts ? opts : {};\n\n  this._loadPool = new WorkPool({\n    concurrency: opts.concurrency || defaultConcurrency\n  });\n\n  this._retryDelay = opts.retryDelay || defaultRetryDelay;\n  this._retryMap = {};\n\n  this._sourceFromTile = sourceFromTile;\n}\n\neventEmitter(ImageUrlSource);\n\n\nImageUrlSource.prototype.loadAsset = function(stage, tile, done) {\n\n  var self = this;\n\n  var retryDelay = this._retryDelay;\n  var retryMap = this._retryMap;\n\n  var tileSource = this._sourceFromTile(tile);\n  var url = tileSource.url;\n  var rect = tileSource.rect;\n\n  var loadImage = stage.loadImage.bind(stage, url, rect);\n\n  var loadFn = function(done) {\n    // TODO: Deduplicate load requests for the same URL. Although the browser\n    // might be smart enough to avoid duplicate requests, they are still unduly\n    // impacted by the concurrency parameter.\n    return self._loadPool.push(loadImage, function(err, asset) {\n      if (err) {\n        if (err instanceof NetworkError) {\n          // If a network error occurred, wait before retrying.\n          retryMap[url] = now();\n          self.emit('networkError', err, tile);\n        }\n        done(err, tile);\n      } else {\n        // On a successful fetch, forget the previous timeout.\n        delete retryMap[url];\n        done(null, tile, asset);\n      }\n    });\n  };\n\n  // Check whether we are retrying a failed request.\n  var delayAmount;\n  var lastTime = retryMap[url];\n  if (lastTime != null) {\n    var currentTime = now();\n    var elapsed = currentTime - lastTime;\n    if (elapsed < retryDelay) {\n      // Wait before retrying.\n      delayAmount = retryDelay - elapsed;\n    } else {\n      // Retry timeout expired; perform the request at once.\n      delayAmount = 0;\n      delete retryMap[url];\n    }\n  }\n\n  var delayFn = delay.bind(null, delayAmount);\n\n  return chain(delayFn, loadFn)(done);\n};\n\n\n/**\n * Creates an ImageUrlSource from a string template.\n *\n * @param {String} url Tile URL template, which may contain the following\n *    placeholders:\n *    - `{f}` : tile face (one of `b`, `d`, `f`, `l`, `r`, `u`)\n *    - `{z}` : tile level index (0 is the smallest level)\n *    - `{x}` : tile horizontal index\n *    - `{y}` : tile vertical index\n * @param {Object} opts In addition to the options already supported by the\n *     {@link ImageUrlSource} constructor.\n * @param {String} opts.cubeMapPreviewUrl URL to use as the preview level.\n *     This must be a single image containing six cube faces laid out\n *     vertically according to the face order parameter.\n * @param {String} [opts.cubeMapPreviewFaceOrder='bdflru'] Face order within\n *     the preview image.\n */\nImageUrlSource.fromString = function(url, opts) {\n  opts = opts || {};\n\n  var faceOrder = opts && opts.cubeMapPreviewFaceOrder || defaultCubeMapFaceOrder;\n\n  var urlFn = opts.cubeMapPreviewUrl ? withPreview : withoutPreview;\n\n  return new ImageUrlSource(urlFn, opts);\n\n  function withoutPreview(tile) {\n    var tileUrl = url;\n\n    for (var property in templateProperties) {\n      var templateProperty = templateProperties[property];\n      var regExp = propertyRegExp(property);\n      var valueFromTile = tile.hasOwnProperty(templateProperty) ? tile[templateProperty] : '';\n      tileUrl = tileUrl.replace(regExp, valueFromTile);\n    }\n\n    return { url: tileUrl };\n  }\n\n  function withPreview(tile) {\n    if (tile.z === 0) {\n      return cubeMapUrl(tile);\n    }\n    else {\n      return withoutPreview(tile);\n    }\n  }\n\n  function cubeMapUrl(tile) {\n    var y = faceOrder.indexOf(tile.face) / 6;\n    return {\n      url: opts.cubeMapPreviewUrl,\n      rect: { x: 0, y: y, width: 1, height: 1/6 }\n    };\n  }\n};\n\nfunction propertyRegExp(property) {\n  var regExpStr = '\\\\{(' + property + ')\\\\}';\n  return new RegExp(regExpStr, 'g');\n}\n\nmodule.exports = ImageUrlSource;\n"},"lineCount":null}},"error":null,"hash":"602db90f3b2f50dfebb7e6a4aac70f3f","cacheData":{"env":{}}}