/*! For license information please see index.bundle.js.LICENSE.txt */
(()=>{var t={1206:function(t){t.exports=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=90)}({17:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r=i(18),n=function(){function t(){}return t.getFirstMatch=function(t,e){var i=e.match(t);return i&&i.length>0&&i[1]||""},t.getSecondMatch=function(t,e){var i=e.match(t);return i&&i.length>1&&i[2]||""},t.matchAndReturnConst=function(t,e,i){if(t.test(e))return i},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,i,r){void 0===r&&(r=!1);var n=t.getVersionPrecision(e),s=t.getVersionPrecision(i),o=Math.max(n,s),a=0,h=t.map([e,i],(function(e){var i=o-t.getVersionPrecision(e),r=e+new Array(i+1).join(".0");return t.map(r.split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));for(r&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(h[0][o]>h[1][o])return 1;if(h[0][o]===h[1][o]){if(o===a)return 0;o-=1}else if(h[0][o]<h[1][o])return-1}},t.map=function(t,e){var i,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i+=1)r.push(e(t[i]));return r},t.find=function(t,e){var i,r;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(i=0,r=t.length;i<r;i+=1){var n=t[i];if(e(n,i))return n}},t.assign=function(t){for(var e,i,r=t,n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[t].concat(s));var a=function(){var t=s[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){r[e]=t[e]}))};for(e=0,i=s.length;e<i;e+=1)a();return t},t.getBrowserAlias=function(t){return r.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return r.BROWSER_MAP[t]||""},t}();e.default=n,t.exports=e.default},18:function(t,e,i){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(91))&&r.__esModule?r:{default:r},s=i(18);function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){}var e,i;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new n.default(t,e)},t.parse=function(t){return new n.default(t).getResult()},e=t,i=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&o(e.prototype,null),i&&o(e,i),t}();e.default=a,t.exports=e.default},91:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r=h(i(92)),n=h(i(93)),s=h(i(94)),o=h(i(95)),a=h(i(17));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=a.default.find(r.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=a.default.find(n.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=a.default.find(s.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=a.default.find(o.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return a.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,i={},r=0,n={},s=0;if(Object.keys(t).forEach((function(e){var o=t[e];"string"==typeof o?(n[e]=o,s+=1):"object"==typeof o&&(i[e]=o,r+=1)})),r>0){var o=Object.keys(i),h=a.default.find(o,(function(t){return e.isOS(t)}));if(h){var u=this.satisfies(i[h]);if(void 0!==u)return u}var c=a.default.find(o,(function(t){return e.isPlatform(t)}));if(c){var l=this.satisfies(i[c]);if(void 0!==l)return l}}if(s>0){var d=Object.keys(n),p=a.default.find(d,(function(t){return e.isBrowser(t,!0)}));if(void 0!==p)return this.compareVersion(n[p])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var i=this.getBrowserName().toLowerCase(),r=t.toLowerCase(),n=a.default.getBrowserTypeByAlias(r);return e&&n&&(r=n.toLowerCase()),r===i},e.compareVersion=function(t){var e=[0],i=t,r=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===t[0]||"<"===t[0]?(i=t.substr(1),"="===t[1]?(r=!0,i=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?i=t.substr(1):"~"===t[0]&&(r=!0,i=t.substr(1)),e.indexOf(a.default.compareVersions(n,i,r))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.is(t)}))},t}();e.default=u,t.exports=e.default},92:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},i=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},i=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},i=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},i=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},i=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},i=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},i=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},i=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},i=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},i=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},i=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},i=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},i=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},i=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},i=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},i=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},i=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},i=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},i=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},i=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},i=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},i=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},i=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},i=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},i=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},i=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){var e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe:function(t){var e={name:"Android Browser"},i=n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},i=n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},i=n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(e,t),version:n.default.getSecondMatch(e,t)}}}];e.default=o,t.exports=e.default},93:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),o=[{test:[/Roku\/DVP/],describe:function(t){var e=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:s.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=n.default.getWindowsVersionName(e);return{name:s.OS_MAP.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:s.OS_MAP.iOS},i=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe:function(t){var e=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=n.default.getMacOSVersionName(e),r={name:s.OS_MAP.MacOS,version:e};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe:function(t){var e=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=n.default.getAndroidVersionName(e),r={name:s.OS_MAP.Android,version:e};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:s.OS_MAP.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||n.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:s.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.PlayStation4,version:e}}}];e.default=o,t.exports=e.default},94:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=n.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe:function(t){var e=n.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),o=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:s.ENGINE_MAP.Blink};var e=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:s.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:s.ENGINE_MAP.Trident},i=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:s.ENGINE_MAP.Presto},i=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){var e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe:function(t){var e={name:s.ENGINE_MAP.Gecko},i=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:s.ENGINE_MAP.WebKit},i=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];e.default=o,t.exports=e.default}})},887:(t,e,i)=>{"use strict";i.r(e),i.d(e,{glMatrix:()=>r,mat2:()=>n,mat2d:()=>s,mat3:()=>o,mat4:()=>a,quat:()=>c,quat2:()=>l,vec2:()=>d,vec3:()=>h,vec4:()=>u});var r={};i.r(r),i.d(r,{ARRAY_TYPE:()=>f,EPSILON:()=>p,RANDOM:()=>m,equals:()=>g,setMatrixArrayType:()=>v,toRadian:()=>y});var n={};i.r(n),i.d(n,{LDU:()=>H,add:()=>B,adjoint:()=>C,clone:()=>w,copy:()=>b,create:()=>M,determinant:()=>A,equals:()=>N,exactEquals:()=>q,frob:()=>I,fromRotation:()=>z,fromScaling:()=>k,fromValues:()=>E,identity:()=>x,invert:()=>S,mul:()=>X,multiply:()=>P,multiplyScalar:()=>V,multiplyScalarAndAdd:()=>j,rotate:()=>R,scale:()=>F,set:()=>T,str:()=>O,sub:()=>W,subtract:()=>D,transpose:()=>L});var s={};i.r(s),i.d(s,{add:()=>ut,clone:()=>G,copy:()=>U,create:()=>Y,determinant:()=>$,equals:()=>ft,exactEquals:()=>pt,frob:()=>ht,fromRotation:()=>nt,fromScaling:()=>st,fromTranslation:()=>ot,fromValues:()=>Z,identity:()=>K,invert:()=>J,mul:()=>mt,multiply:()=>tt,multiplyScalar:()=>lt,multiplyScalarAndAdd:()=>dt,rotate:()=>et,scale:()=>it,set:()=>Q,str:()=>at,sub:()=>vt,subtract:()=>ct,translate:()=>rt});var o={};i.r(o),i.d(o,{add:()=>Nt,adjoint:()=>Lt,clone:()=>gt,copy:()=>Mt,create:()=>_t,determinant:()=>St,equals:()=>Yt,exactEquals:()=>Wt,frob:()=>qt,fromMat2d:()=>Ot,fromMat4:()=>yt,fromQuat:()=>It,fromRotation:()=>zt,fromScaling:()=>kt,fromTranslation:()=>Ft,fromValues:()=>wt,identity:()=>xt,invert:()=>Tt,mul:()=>Gt,multiply:()=>Ct,multiplyScalar:()=>jt,multiplyScalarAndAdd:()=>Xt,normalFromMat4:()=>Ht,projection:()=>Bt,rotate:()=>Pt,scale:()=>Rt,set:()=>bt,str:()=>Dt,sub:()=>Ut,subtract:()=>Vt,translate:()=>At,transpose:()=>Et});var a={};i.r(a),i.d(a,{add:()=>ke,adjoint:()=>re,clone:()=>Zt,copy:()=>Qt,create:()=>Kt,determinant:()=>ne,equals:()=>De,exactEquals:()=>Be,frob:()=>ze,fromQuat:()=>Te,fromQuat2:()=>ge,fromRotation:()=>fe,fromRotationTranslation:()=>ye,fromRotationTranslationScale:()=>xe,fromRotationTranslationScaleOrigin:()=>Ee,fromScaling:()=>pe,fromTranslation:()=>de,fromValues:()=>Jt,fromXRotation:()=>me,fromYRotation:()=>ve,fromZRotation:()=>_e,frustum:()=>Le,getRotation:()=>be,getScaling:()=>we,getTranslation:()=>Me,identity:()=>te,invert:()=>ie,lookAt:()=>Pe,mul:()=>qe,multiply:()=>se,multiplyScalar:()=>Ie,multiplyScalarAndAdd:()=>He,ortho:()=>Ae,perspective:()=>Se,perspectiveFromFieldOfView:()=>Ce,rotate:()=>he,rotateX:()=>ue,rotateY:()=>ce,rotateZ:()=>le,scale:()=>ae,set:()=>$t,str:()=>Fe,sub:()=>Ne,subtract:()=>Oe,targetTo:()=>Re,translate:()=>oe,transpose:()=>ee});var h={};i.r(h),i.d(h,{add:()=>Ue,angle:()=>xi,bezier:()=>mi,ceil:()=>Je,clone:()=>je,copy:()=>Ye,create:()=>Ve,cross:()=>di,dist:()=>Fi,distance:()=>si,div:()=>Ri,divide:()=>Qe,dot:()=>li,equals:()=>Si,exactEquals:()=>Li,floor:()=>$e,forEach:()=>Ii,fromValues:()=>We,hermite:()=>fi,inverse:()=>ui,len:()=>ki,length:()=>Xe,lerp:()=>pi,max:()=>ei,min:()=>ti,mul:()=>Pi,multiply:()=>Ze,negate:()=>hi,normalize:()=>ci,random:()=>vi,rotateX:()=>Mi,rotateY:()=>wi,rotateZ:()=>bi,round:()=>ii,scale:()=>ri,scaleAndAdd:()=>ni,set:()=>Ge,sqrDist:()=>zi,sqrLen:()=>Oi,squaredDistance:()=>oi,squaredLength:()=>ai,str:()=>Ti,sub:()=>Ai,subtract:()=>Ke,transformMat3:()=>yi,transformMat4:()=>_i,transformQuat:()=>gi,zero:()=>Ei});var u={};i.r(u),i.d(u,{add:()=>Vi,ceil:()=>Yi,clone:()=>Bi,copy:()=>qi,create:()=>Hi,cross:()=>ar,dist:()=>gr,distance:()=>$i,div:()=>yr,divide:()=>Wi,dot:()=>or,equals:()=>mr,exactEquals:()=>fr,floor:()=>Gi,forEach:()=>xr,fromValues:()=>Di,inverse:()=>nr,len:()=>wr,length:()=>er,lerp:()=>hr,max:()=>Ki,min:()=>Ui,mul:()=>_r,multiply:()=>Xi,negate:()=>rr,normalize:()=>sr,random:()=>ur,round:()=>Zi,scale:()=>Qi,scaleAndAdd:()=>Ji,set:()=>Ni,sqrDist:()=>Mr,sqrLen:()=>br,squaredDistance:()=>tr,squaredLength:()=>ir,str:()=>pr,sub:()=>vr,subtract:()=>ji,transformMat4:()=>cr,transformQuat:()=>lr,zero:()=>dr});var c={};i.r(c),i.d(c,{add:()=>tn,calculateW:()=>zr,clone:()=>Zr,conjugate:()=>qr,copy:()=>Jr,create:()=>Er,dot:()=>nn,equals:()=>dn,exactEquals:()=>ln,exp:()=>kr,fromEuler:()=>Vr,fromMat3:()=>Nr,fromValues:()=>Qr,getAngle:()=>Cr,getAxisAngle:()=>Sr,identity:()=>Tr,invert:()=>Dr,len:()=>an,length:()=>on,lerp:()=>sn,ln:()=>Or,mul:()=>en,multiply:()=>Ar,normalize:()=>cn,pow:()=>Ir,random:()=>Br,rotateX:()=>Pr,rotateY:()=>Rr,rotateZ:()=>Fr,rotationTo:()=>pn,scale:()=>rn,set:()=>$r,setAxes:()=>mn,setAxisAngle:()=>Lr,slerp:()=>Hr,sqlerp:()=>fn,sqrLen:()=>un,squaredLength:()=>hn,str:()=>jr});var l={};i.r(l),i.d(l,{add:()=>Dn,clone:()=>_n,conjugate:()=>Yn,copy:()=>En,create:()=>vn,dot:()=>jn,equals:()=>ts,exactEquals:()=>$n,fromMat4:()=>xn,fromRotation:()=>bn,fromRotationTranslation:()=>Mn,fromRotationTranslationValues:()=>gn,fromTranslation:()=>wn,fromValues:()=>yn,getDual:()=>Cn,getReal:()=>Sn,getTranslation:()=>Rn,identity:()=>Tn,invert:()=>Wn,len:()=>Un,length:()=>Gn,lerp:()=>Xn,mul:()=>Nn,multiply:()=>qn,normalize:()=>Qn,rotateAroundAxis:()=>Bn,rotateByQuatAppend:()=>In,rotateByQuatPrepend:()=>Hn,rotateX:()=>zn,rotateY:()=>kn,rotateZ:()=>On,scale:()=>Vn,set:()=>Ln,setDual:()=>Pn,setReal:()=>An,sqrLen:()=>Zn,squaredLength:()=>Kn,str:()=>Jn,translate:()=>Fn});var d={};i.r(d),i.d(d,{add:()=>os,angle:()=>zs,ceil:()=>cs,clone:()=>is,copy:()=>ns,create:()=>es,cross:()=>Ts,dist:()=>Vs,distance:()=>_s,div:()=>Ns,divide:()=>us,dot:()=>Es,equals:()=>Hs,exactEquals:()=>Is,floor:()=>ls,forEach:()=>Ws,fromValues:()=>rs,inverse:()=>bs,len:()=>Bs,length:()=>gs,lerp:()=>Ls,max:()=>ps,min:()=>ds,mul:()=>qs,multiply:()=>hs,negate:()=>ws,normalize:()=>xs,random:()=>Ss,rotate:()=>Fs,round:()=>fs,scale:()=>ms,scaleAndAdd:()=>vs,set:()=>ss,sqrDist:()=>js,sqrLen:()=>Xs,squaredDistance:()=>ys,squaredLength:()=>Ms,str:()=>Os,sub:()=>Ds,subtract:()=>as,transformMat2:()=>Cs,transformMat2d:()=>As,transformMat3:()=>Ps,transformMat4:()=>Rs,zero:()=>ks});var p=1e-6,f="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function v(t){f=t}var _=Math.PI/180;function y(t){return t*_}function g(t,e){return Math.abs(t-e)<=p*Math.max(1,Math.abs(t),Math.abs(e))}function M(){var t=new f(4);return f!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function w(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function b(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t,e,i,r){var n=new f(4);return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function T(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function L(t,e){if(t===e){var i=e[1];t[1]=e[2],t[2]=i}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function S(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*s-n*r;return o?(o=1/o,t[0]=s*o,t[1]=-r*o,t[2]=-n*o,t[3]=i*o,t):null}function C(t,e){var i=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=i,t}function A(t){return t[0]*t[3]-t[2]*t[1]}function P(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1],u=i[2],c=i[3];return t[0]=r*a+s*h,t[1]=n*a+o*h,t[2]=r*u+s*c,t[3]=n*u+o*c,t}function R(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+s*a,t[1]=n*h+o*a,t[2]=r*-a+s*h,t[3]=n*-a+o*h,t}function F(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1];return t[0]=r*a,t[1]=n*a,t[2]=s*h,t[3]=o*h,t}function z(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t}function k(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function O(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function I(t){return Math.hypot(t[0],t[1],t[2],t[3])}function H(t,e,i,r){return t[2]=r[2]/r[0],i[0]=r[0],i[1]=r[1],i[3]=r[3]-t[2]*i[1],[t,e,i]}function B(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function D(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function q(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function N(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],h=e[2],u=e[3];return Math.abs(i-o)<=p*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-h)<=p*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-u)<=p*Math.max(1,Math.abs(s),Math.abs(u))}function V(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function j(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var X=P,W=D;function Y(){var t=new f(6);return f!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function G(t){var e=new f(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function U(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Z(t,e,i,r,n,s){var o=new f(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=r,o[4]=n,o[5]=s,o}function Q(t,e,i,r,n,s,o){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t}function J(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=i*s-r*n;return h?(h=1/h,t[0]=s*h,t[1]=-r*h,t[2]=-n*h,t[3]=i*h,t[4]=(n*a-s*o)*h,t[5]=(r*o-i*a)*h,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=i[0],c=i[1],l=i[2],d=i[3],p=i[4],f=i[5];return t[0]=r*u+s*c,t[1]=n*u+o*c,t[2]=r*l+s*d,t[3]=n*l+o*d,t[4]=r*p+s*f+a,t[5]=n*p+o*f+h,t}function et(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=r*c+s*u,t[1]=n*c+o*u,t[2]=r*-u+s*c,t[3]=n*-u+o*c,t[4]=a,t[5]=h,t}function it(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=i[0],c=i[1];return t[0]=r*u,t[1]=n*u,t[2]=s*c,t[3]=o*c,t[4]=a,t[5]=h,t}function rt(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=i[0],c=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=r*u+s*c+a,t[5]=n*u+o*c+h,t}function nt(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=-i,t[3]=r,t[4]=0,t[5]=0,t}function st(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function at(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ut(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function ct(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function lt(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function dt(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t}function pt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function ft(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],h=e[0],u=e[1],c=e[2],l=e[3],d=e[4],f=e[5];return Math.abs(i-h)<=p*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(r-u)<=p*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=p*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(s-l)<=p*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(o-d)<=p*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-f)<=p*Math.max(1,Math.abs(a),Math.abs(f))}var mt=tt,vt=ct;function _t(){var t=new f(9);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new f(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function wt(t,e,i,r,n,s,o,a,h){var u=new f(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=r,u[4]=n,u[5]=s,u[6]=o,u[7]=a,u[8]=h,u}function bt(t,e,i,r,n,s,o,a,h,u){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=h,t[8]=u,t}function xt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,e){if(t===e){var i=e[1],r=e[2],n=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=r,t[7]=n}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Tt(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=c*o-a*u,d=-c*s+a*h,p=u*s-o*h,f=i*l+r*d+n*p;return f?(f=1/f,t[0]=l*f,t[1]=(-c*r+n*u)*f,t[2]=(a*r-n*o)*f,t[3]=d*f,t[4]=(c*i-n*h)*f,t[5]=(-a*i+n*s)*f,t[6]=p*f,t[7]=(-u*i+r*h)*f,t[8]=(o*i-r*s)*f,t):null}function Lt(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8];return t[0]=o*c-a*u,t[1]=n*u-r*c,t[2]=r*a-n*o,t[3]=a*h-s*c,t[4]=i*c-n*h,t[5]=n*s-i*a,t[6]=s*u-o*h,t[7]=r*h-i*u,t[8]=i*o-r*s,t}function St(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],u=t[8];return e*(u*s-o*h)+i*(-u*n+o*a)+r*(h*n-s*a)}function Ct(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],d=i[0],p=i[1],f=i[2],m=i[3],v=i[4],_=i[5],y=i[6],g=i[7],M=i[8];return t[0]=d*r+p*o+f*u,t[1]=d*n+p*a+f*c,t[2]=d*s+p*h+f*l,t[3]=m*r+v*o+_*u,t[4]=m*n+v*a+_*c,t[5]=m*s+v*h+_*l,t[6]=y*r+g*o+M*u,t[7]=y*n+g*a+M*c,t[8]=y*s+g*h+M*l,t}function At(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],d=i[0],p=i[1];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=h,t[6]=d*r+p*o+u,t[7]=d*n+p*a+c,t[8]=d*s+p*h+l,t}function Pt(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],d=Math.sin(i),p=Math.cos(i);return t[0]=p*r+d*o,t[1]=p*n+d*a,t[2]=p*s+d*h,t[3]=p*o-d*r,t[4]=p*a-d*n,t[5]=p*h-d*s,t[6]=u,t[7]=c,t[8]=l,t}function Rt(t,e,i){var r=i[0],n=i[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=n*e[3],t[4]=n*e[4],t[5]=n*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ft(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function zt(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=-i,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function It(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,h=n+n,u=i*o,c=r*o,l=r*a,d=n*o,p=n*a,f=n*h,m=s*o,v=s*a,_=s*h;return t[0]=1-l-f,t[3]=c-_,t[6]=d+v,t[1]=c+_,t[4]=1-u-f,t[7]=p-m,t[2]=d-v,t[5]=p+m,t[8]=1-u-l,t}function Ht(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],_=e[15],y=i*a-r*o,g=i*h-n*o,M=i*u-s*o,w=r*h-n*a,b=r*u-s*a,x=n*u-s*h,E=c*m-l*f,T=c*v-d*f,L=c*_-p*f,S=l*v-d*m,C=l*_-p*m,A=d*_-p*v,P=y*A-g*C+M*S+w*L-b*T+x*E;return P?(P=1/P,t[0]=(a*A-h*C+u*S)*P,t[1]=(h*L-o*A-u*T)*P,t[2]=(o*C-a*L+u*E)*P,t[3]=(n*C-r*A-s*S)*P,t[4]=(i*A-n*L+s*T)*P,t[5]=(r*L-i*C-s*E)*P,t[6]=(m*x-v*b+_*w)*P,t[7]=(v*M-f*x-_*g)*P,t[8]=(f*b-m*M+_*y)*P,t):null}function Bt(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Dt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function qt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Nt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Vt(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function jt(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function Xt(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Yt(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8],l=e[0],d=e[1],f=e[2],m=e[3],v=e[4],_=e[5],y=e[6],g=e[7],M=e[8];return Math.abs(i-l)<=p*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(r-d)<=p*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-f)<=p*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(s-m)<=p*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-v)<=p*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-_)<=p*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(h-y)<=p*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(u-g)<=p*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(c-M)<=p*Math.max(1,Math.abs(c),Math.abs(M))}var Gt=Ct,Ut=Vt;function Kt(){var t=new f(16);return f!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Zt(t){var e=new f(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,i,r,n,s,o,a,h,u,c,l,d,p,m,v){var _=new f(16);return _[0]=t,_[1]=e,_[2]=i,_[3]=r,_[4]=n,_[5]=s,_[6]=o,_[7]=a,_[8]=h,_[9]=u,_[10]=c,_[11]=l,_[12]=d,_[13]=p,_[14]=m,_[15]=v,_}function $t(t,e,i,r,n,s,o,a,h,u,c,l,d,p,f,m,v){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=h,t[8]=u,t[9]=c,t[10]=l,t[11]=d,t[12]=p,t[13]=f,t[14]=m,t[15]=v,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var i=e[1],r=e[2],n=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=n,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ie(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],_=e[15],y=i*a-r*o,g=i*h-n*o,M=i*u-s*o,w=r*h-n*a,b=r*u-s*a,x=n*u-s*h,E=c*m-l*f,T=c*v-d*f,L=c*_-p*f,S=l*v-d*m,C=l*_-p*m,A=d*_-p*v,P=y*A-g*C+M*S+w*L-b*T+x*E;return P?(P=1/P,t[0]=(a*A-h*C+u*S)*P,t[1]=(n*C-r*A-s*S)*P,t[2]=(m*x-v*b+_*w)*P,t[3]=(d*b-l*x-p*w)*P,t[4]=(h*L-o*A-u*T)*P,t[5]=(i*A-n*L+s*T)*P,t[6]=(v*M-f*x-_*g)*P,t[7]=(c*x-d*M+p*g)*P,t[8]=(o*C-a*L+u*E)*P,t[9]=(r*L-i*C-s*E)*P,t[10]=(f*b-m*M+_*y)*P,t[11]=(l*M-c*b-p*y)*P,t[12]=(a*T-o*S-h*E)*P,t[13]=(i*S-r*T+n*E)*P,t[14]=(m*g-f*w-v*y)*P,t[15]=(c*w-l*g+d*y)*P,t):null}function re(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],u=e[7],c=e[8],l=e[9],d=e[10],p=e[11],f=e[12],m=e[13],v=e[14],_=e[15];return t[0]=a*(d*_-p*v)-l*(h*_-u*v)+m*(h*p-u*d),t[1]=-(r*(d*_-p*v)-l*(n*_-s*v)+m*(n*p-s*d)),t[2]=r*(h*_-u*v)-a*(n*_-s*v)+m*(n*u-s*h),t[3]=-(r*(h*p-u*d)-a*(n*p-s*d)+l*(n*u-s*h)),t[4]=-(o*(d*_-p*v)-c*(h*_-u*v)+f*(h*p-u*d)),t[5]=i*(d*_-p*v)-c*(n*_-s*v)+f*(n*p-s*d),t[6]=-(i*(h*_-u*v)-o*(n*_-s*v)+f*(n*u-s*h)),t[7]=i*(h*p-u*d)-o*(n*p-s*d)+c*(n*u-s*h),t[8]=o*(l*_-p*m)-c*(a*_-u*m)+f*(a*p-u*l),t[9]=-(i*(l*_-p*m)-c*(r*_-s*m)+f*(r*p-s*l)),t[10]=i*(a*_-u*m)-o*(r*_-s*m)+f*(r*u-s*a),t[11]=-(i*(a*p-u*l)-o*(r*p-s*l)+c*(r*u-s*a)),t[12]=-(o*(l*v-d*m)-c*(a*v-h*m)+f*(a*d-h*l)),t[13]=i*(l*v-d*m)-c*(r*v-n*m)+f*(r*d-n*l),t[14]=-(i*(a*v-h*m)-o*(r*v-n*m)+f*(r*h-n*a)),t[15]=i*(a*d-h*l)-o*(r*d-n*l)+c*(r*h-n*a),t}function ne(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],u=t[8],c=t[9],l=t[10],d=t[11],p=t[12],f=t[13],m=t[14],v=t[15];return(e*o-i*s)*(l*v-d*m)-(e*a-r*s)*(c*v-d*f)+(e*h-n*s)*(c*m-l*f)+(i*a-r*o)*(u*v-d*p)-(i*h-n*o)*(u*m-l*p)+(r*h-n*a)*(u*f-c*p)}function se(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],d=e[9],p=e[10],f=e[11],m=e[12],v=e[13],_=e[14],y=e[15],g=i[0],M=i[1],w=i[2],b=i[3];return t[0]=g*r+M*a+w*l+b*m,t[1]=g*n+M*h+w*d+b*v,t[2]=g*s+M*u+w*p+b*_,t[3]=g*o+M*c+w*f+b*y,g=i[4],M=i[5],w=i[6],b=i[7],t[4]=g*r+M*a+w*l+b*m,t[5]=g*n+M*h+w*d+b*v,t[6]=g*s+M*u+w*p+b*_,t[7]=g*o+M*c+w*f+b*y,g=i[8],M=i[9],w=i[10],b=i[11],t[8]=g*r+M*a+w*l+b*m,t[9]=g*n+M*h+w*d+b*v,t[10]=g*s+M*u+w*p+b*_,t[11]=g*o+M*c+w*f+b*y,g=i[12],M=i[13],w=i[14],b=i[15],t[12]=g*r+M*a+w*l+b*m,t[13]=g*n+M*h+w*d+b*v,t[14]=g*s+M*u+w*p+b*_,t[15]=g*o+M*c+w*f+b*y,t}function oe(t,e,i){var r,n,s,o,a,h,u,c,l,d,p,f,m=i[0],v=i[1],_=i[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*_+e[12],t[13]=e[1]*m+e[5]*v+e[9]*_+e[13],t[14]=e[2]*m+e[6]*v+e[10]*_+e[14],t[15]=e[3]*m+e[7]*v+e[11]*_+e[15]):(r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=e[8],d=e[9],p=e[10],f=e[11],t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=a,t[5]=h,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=p,t[11]=f,t[12]=r*m+a*v+l*_+e[12],t[13]=n*m+h*v+d*_+e[13],t[14]=s*m+u*v+p*_+e[14],t[15]=o*m+c*v+f*_+e[15]),t}function ae(t,e,i){var r=i[0],n=i[1],s=i[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function he(t,e,i,r){var n,s,o,a,h,u,c,l,d,f,m,v,_,y,g,M,w,b,x,E,T,L,S,C,A=r[0],P=r[1],R=r[2],F=Math.hypot(A,P,R);return F<p?null:(A*=F=1/F,P*=F,R*=F,n=Math.sin(i),o=1-(s=Math.cos(i)),a=e[0],h=e[1],u=e[2],c=e[3],l=e[4],d=e[5],f=e[6],m=e[7],v=e[8],_=e[9],y=e[10],g=e[11],M=A*A*o+s,w=P*A*o+R*n,b=R*A*o-P*n,x=A*P*o-R*n,E=P*P*o+s,T=R*P*o+A*n,L=A*R*o+P*n,S=P*R*o-A*n,C=R*R*o+s,t[0]=a*M+l*w+v*b,t[1]=h*M+d*w+_*b,t[2]=u*M+f*w+y*b,t[3]=c*M+m*w+g*b,t[4]=a*x+l*E+v*T,t[5]=h*x+d*E+_*T,t[6]=u*x+f*E+y*T,t[7]=c*x+m*E+g*T,t[8]=a*L+l*S+v*C,t[9]=h*L+d*S+_*C,t[10]=u*L+f*S+y*C,t[11]=c*L+m*S+g*C,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ue(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[4],o=e[5],a=e[6],h=e[7],u=e[8],c=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+u*r,t[5]=o*n+c*r,t[6]=a*n+l*r,t[7]=h*n+d*r,t[8]=u*n-s*r,t[9]=c*n-o*r,t[10]=l*n-a*r,t[11]=d*n-h*r,t}function ce(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],h=e[3],u=e[8],c=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-u*r,t[1]=o*n-c*r,t[2]=a*n-l*r,t[3]=h*n-d*r,t[8]=s*r+u*n,t[9]=o*r+c*n,t[10]=a*r+l*n,t[11]=h*r+d*n,t}function le(t,e,i){var r=Math.sin(i),n=Math.cos(i),s=e[0],o=e[1],a=e[2],h=e[3],u=e[4],c=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+u*r,t[1]=o*n+c*r,t[2]=a*n+l*r,t[3]=h*n+d*r,t[4]=u*n-s*r,t[5]=c*n-o*r,t[6]=l*n-a*r,t[7]=d*n-h*r,t}function de(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fe(t,e,i){var r,n,s,o=i[0],a=i[1],h=i[2],u=Math.hypot(o,a,h);return u<p?null:(o*=u=1/u,a*=u,h*=u,r=Math.sin(e),s=1-(n=Math.cos(e)),t[0]=o*o*s+n,t[1]=a*o*s+h*r,t[2]=h*o*s-a*r,t[3]=0,t[4]=o*a*s-h*r,t[5]=a*a*s+n,t[6]=h*a*s+o*r,t[7]=0,t[8]=o*h*s+a*r,t[9]=a*h*s-o*r,t[10]=h*h*s+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function me(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _e(t,e){var i=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=r+r,h=n+n,u=s+s,c=r*a,l=r*h,d=r*u,p=n*h,f=n*u,m=s*u,v=o*a,_=o*h,y=o*u;return t[0]=1-(p+m),t[1]=l+y,t[2]=d-_,t[3]=0,t[4]=l-y,t[5]=1-(c+m),t[6]=f+v,t[7]=0,t[8]=d+_,t[9]=f-v,t[10]=1-(c+p),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function ge(t,e){var i=new f(3),r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=r*r+n*n+s*s+o*o;return l>0?(i[0]=2*(a*o+c*r+h*s-u*n)/l,i[1]=2*(h*o+c*n+u*r-a*s)/l,i[2]=2*(u*o+c*s+a*n-h*r)/l):(i[0]=2*(a*o+c*r+h*s-u*n),i[1]=2*(h*o+c*n+u*r-a*s),i[2]=2*(u*o+c*s+a*n-h*r)),ye(t,e,i),t}function Me(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function we(t,e){var i=e[0],r=e[1],n=e[2],s=e[4],o=e[5],a=e[6],h=e[8],u=e[9],c=e[10];return t[0]=Math.hypot(i,r,n),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(h,u,c),t}function be(t,e){var i=new f(3);we(i,e);var r=1/i[0],n=1/i[1],s=1/i[2],o=e[0]*r,a=e[1]*n,h=e[2]*s,u=e[4]*r,c=e[5]*n,l=e[6]*s,d=e[8]*r,p=e[9]*n,m=e[10]*s,v=o+c+m,_=0;return v>0?(_=2*Math.sqrt(v+1),t[3]=.25*_,t[0]=(l-p)/_,t[1]=(d-h)/_,t[2]=(a-u)/_):o>c&&o>m?(_=2*Math.sqrt(1+o-c-m),t[3]=(l-p)/_,t[0]=.25*_,t[1]=(a+u)/_,t[2]=(d+h)/_):c>m?(_=2*Math.sqrt(1+c-o-m),t[3]=(d-h)/_,t[0]=(a+u)/_,t[1]=.25*_,t[2]=(l+p)/_):(_=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/_,t[0]=(d+h)/_,t[1]=(l+p)/_,t[2]=.25*_),t}function xe(t,e,i,r){var n=e[0],s=e[1],o=e[2],a=e[3],h=n+n,u=s+s,c=o+o,l=n*h,d=n*u,p=n*c,f=s*u,m=s*c,v=o*c,_=a*h,y=a*u,g=a*c,M=r[0],w=r[1],b=r[2];return t[0]=(1-(f+v))*M,t[1]=(d+g)*M,t[2]=(p-y)*M,t[3]=0,t[4]=(d-g)*w,t[5]=(1-(l+v))*w,t[6]=(m+_)*w,t[7]=0,t[8]=(p+y)*b,t[9]=(m-_)*b,t[10]=(1-(l+f))*b,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function Ee(t,e,i,r,n){var s=e[0],o=e[1],a=e[2],h=e[3],u=s+s,c=o+o,l=a+a,d=s*u,p=s*c,f=s*l,m=o*c,v=o*l,_=a*l,y=h*u,g=h*c,M=h*l,w=r[0],b=r[1],x=r[2],E=n[0],T=n[1],L=n[2],S=(1-(m+_))*w,C=(p+M)*w,A=(f-g)*w,P=(p-M)*b,R=(1-(d+_))*b,F=(v+y)*b,z=(f+g)*x,k=(v-y)*x,O=(1-(d+m))*x;return t[0]=S,t[1]=C,t[2]=A,t[3]=0,t[4]=P,t[5]=R,t[6]=F,t[7]=0,t[8]=z,t[9]=k,t[10]=O,t[11]=0,t[12]=i[0]+E-(S*E+P*T+z*L),t[13]=i[1]+T-(C*E+R*T+k*L),t[14]=i[2]+L-(A*E+F*T+O*L),t[15]=1,t}function Te(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i+i,a=r+r,h=n+n,u=i*o,c=r*o,l=r*a,d=n*o,p=n*a,f=n*h,m=s*o,v=s*a,_=s*h;return t[0]=1-l-f,t[1]=c+_,t[2]=d-v,t[3]=0,t[4]=c-_,t[5]=1-u-f,t[6]=p+m,t[7]=0,t[8]=d+v,t[9]=p-m,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Le(t,e,i,r,n,s,o){var a=1/(i-e),h=1/(n-r),u=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*h,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(n+r)*h,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function Se(t,e,i,r,n){var s,o=1/Math.tan(e/2);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(s=1/(r-n),t[10]=(n+r)*s,t[14]=2*n*r*s):(t[10]=-1,t[14]=-2*r),t}function Ce(t,e,i,r){var n=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),h=2/(o+a),u=2/(n+s);return t[0]=h,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*h*.5,t[9]=(n-s)*u*.5,t[10]=r/(i-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*i/(i-r),t[15]=0,t}function Ae(t,e,i,r,n,s,o){var a=1/(e-i),h=1/(r-n),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(n+r)*h,t[14]=(o+s)*u,t[15]=1,t}function Pe(t,e,i,r){var n,s,o,a,h,u,c,l,d,f,m=e[0],v=e[1],_=e[2],y=r[0],g=r[1],M=r[2],w=i[0],b=i[1],x=i[2];return Math.abs(m-w)<p&&Math.abs(v-b)<p&&Math.abs(_-x)<p?te(t):(c=m-w,l=v-b,d=_-x,n=g*(d*=f=1/Math.hypot(c,l,d))-M*(l*=f),s=M*(c*=f)-y*d,o=y*l-g*c,(f=Math.hypot(n,s,o))?(n*=f=1/f,s*=f,o*=f):(n=0,s=0,o=0),a=l*o-d*s,h=d*n-c*o,u=c*s-l*n,(f=Math.hypot(a,h,u))?(a*=f=1/f,h*=f,u*=f):(a=0,h=0,u=0),t[0]=n,t[1]=a,t[2]=c,t[3]=0,t[4]=s,t[5]=h,t[6]=l,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(n*m+s*v+o*_),t[13]=-(a*m+h*v+u*_),t[14]=-(c*m+l*v+d*_),t[15]=1,t)}function Re(t,e,i,r){var n=e[0],s=e[1],o=e[2],a=r[0],h=r[1],u=r[2],c=n-i[0],l=s-i[1],d=o-i[2],p=c*c+l*l+d*d;p>0&&(c*=p=1/Math.sqrt(p),l*=p,d*=p);var f=h*d-u*l,m=u*c-a*d,v=a*l-h*c;return(p=f*f+m*m+v*v)>0&&(f*=p=1/Math.sqrt(p),m*=p,v*=p),t[0]=f,t[1]=m,t[2]=v,t[3]=0,t[4]=l*v-d*m,t[5]=d*f-c*v,t[6]=c*m-l*f,t[7]=0,t[8]=c,t[9]=l,t[10]=d,t[11]=0,t[12]=n,t[13]=s,t[14]=o,t[15]=1,t}function Fe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ze(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function ke(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function Oe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function Ie(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function He(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t[4]=e[4]+i[4]*r,t[5]=e[5]+i[5]*r,t[6]=e[6]+i[6]*r,t[7]=e[7]+i[7]*r,t[8]=e[8]+i[8]*r,t[9]=e[9]+i[9]*r,t[10]=e[10]+i[10]*r,t[11]=e[11]+i[11]*r,t[12]=e[12]+i[12]*r,t[13]=e[13]+i[13]*r,t[14]=e[14]+i[14]*r,t[15]=e[15]+i[15]*r,t}function Be(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function De(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=t[8],l=t[9],d=t[10],f=t[11],m=t[12],v=t[13],_=t[14],y=t[15],g=e[0],M=e[1],w=e[2],b=e[3],x=e[4],E=e[5],T=e[6],L=e[7],S=e[8],C=e[9],A=e[10],P=e[11],R=e[12],F=e[13],z=e[14],k=e[15];return Math.abs(i-g)<=p*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(r-M)<=p*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(n-w)<=p*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(s-b)<=p*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(o-x)<=p*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-E)<=p*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(h-T)<=p*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(u-L)<=p*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(c-S)<=p*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-C)<=p*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(d-A)<=p*Math.max(1,Math.abs(d),Math.abs(A))&&Math.abs(f-P)<=p*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(m-R)<=p*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(v-F)<=p*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(_-z)<=p*Math.max(1,Math.abs(_),Math.abs(z))&&Math.abs(y-k)<=p*Math.max(1,Math.abs(y),Math.abs(k))}var qe=se,Ne=Oe;function Ve(){var t=new f(3);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function je(t){var e=new f(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xe(t){var e=t[0],i=t[1],r=t[2];return Math.hypot(e,i,r)}function We(t,e,i){var r=new f(3);return r[0]=t,r[1]=e,r[2]=i,r}function Ye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ge(t,e,i,r){return t[0]=e,t[1]=i,t[2]=r,t}function Ue(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function Ke(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Ze(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Qe(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function $e(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ti(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function ei(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function ii(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function ri(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function ni(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function si(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return Math.hypot(i,r,n)}function oi(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2];return i*i+r*r+n*n}function ai(t){var e=t[0],i=t[1],r=t[2];return e*e+i*i+r*r}function hi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function ui(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function ci(t,e){var i=e[0],r=e[1],n=e[2],s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function li(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function di(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],h=i[2];return t[0]=n*h-s*a,t[1]=s*o-r*h,t[2]=r*a-n*o,t}function pi(t,e,i,r){var n=e[0],s=e[1],o=e[2];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t}function fi(t,e,i,r,n,s){var o=s*s,a=o*(2*s-3)+1,h=o*(s-2)+s,u=o*(s-1),c=o*(3-2*s);return t[0]=e[0]*a+i[0]*h+r[0]*u+n[0]*c,t[1]=e[1]*a+i[1]*h+r[1]*u+n[1]*c,t[2]=e[2]*a+i[2]*h+r[2]*u+n[2]*c,t}function mi(t,e,i,r,n,s){var o=1-s,a=o*o,h=s*s,u=a*o,c=3*s*a,l=3*h*o,d=h*s;return t[0]=e[0]*u+i[0]*c+r[0]*l+n[0]*d,t[1]=e[1]*u+i[1]*c+r[1]*l+n[1]*d,t[2]=e[2]*u+i[2]*c+r[2]*l+n[2]*d,t}function vi(t,e){e=e||1;var i=2*m()*Math.PI,r=2*m()-1,n=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=r*e,t}function _i(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[3]*r+i[7]*n+i[11]*s+i[15];return o=o||1,t[0]=(i[0]*r+i[4]*n+i[8]*s+i[12])/o,t[1]=(i[1]*r+i[5]*n+i[9]*s+i[13])/o,t[2]=(i[2]*r+i[6]*n+i[10]*s+i[14])/o,t}function yi(t,e,i){var r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function gi(t,e,i){var r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],h=e[1],u=e[2],c=n*u-s*h,l=s*a-r*u,d=r*h-n*a,p=n*d-s*l,f=s*c-r*d,m=r*l-n*c,v=2*o;return c*=v,l*=v,d*=v,p*=2,f*=2,m*=2,t[0]=a+c+p,t[1]=h+l+f,t[2]=u+d+m,t}function Mi(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function wi(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function bi(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function xi(t,e){var i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],h=Math.sqrt(i*i+r*r+n*n)*Math.sqrt(s*s+o*o+a*a),u=h&&li(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}function Ei(t){return t[0]=0,t[1]=0,t[2]=0,t}function Ti(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Li(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Si(t,e){var i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2];return Math.abs(i-s)<=p*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(r-o)<=p*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-a)<=p*Math.max(1,Math.abs(n),Math.abs(a))}var Ci,Ai=Ke,Pi=Ze,Ri=Qe,Fi=si,zi=oi,ki=Xe,Oi=ai,Ii=(Ci=Ve(),function(t,e,i,r,n,s){var o,a;for(e||(e=3),i||(i=0),a=r?Math.min(r*e+i,t.length):t.length,o=i;o<a;o+=e)Ci[0]=t[o],Ci[1]=t[o+1],Ci[2]=t[o+2],n(Ci,Ci,s),t[o]=Ci[0],t[o+1]=Ci[1],t[o+2]=Ci[2];return t});function Hi(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Bi(t){var e=new f(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Di(t,e,i,r){var n=new f(4);return n[0]=t,n[1]=e,n[2]=i,n[3]=r,n}function qi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Ni(t,e,i,r,n){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}function Vi(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function ji(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Xi(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Wi(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function Yi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Gi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Ui(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function Ki(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function Zi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function Qi(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function Ji(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t[3]=e[3]+i[3]*r,t}function $i(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return Math.hypot(i,r,n,s)}function tr(t,e){var i=e[0]-t[0],r=e[1]-t[1],n=e[2]-t[2],s=e[3]-t[3];return i*i+r*r+n*n+s*s}function er(t){var e=t[0],i=t[1],r=t[2],n=t[3];return Math.hypot(e,i,r,n)}function ir(t){var e=t[0],i=t[1],r=t[2],n=t[3];return e*e+i*i+r*r+n*n}function rr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function nr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function sr(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*i+r*r+n*n+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=i*o,t[1]=r*o,t[2]=n*o,t[3]=s*o,t}function or(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ar(t,e,i,r){var n=i[0]*r[1]-i[1]*r[0],s=i[0]*r[2]-i[2]*r[0],o=i[0]*r[3]-i[3]*r[0],a=i[1]*r[2]-i[2]*r[1],h=i[1]*r[3]-i[3]*r[1],u=i[2]*r[3]-i[3]*r[2],c=e[0],l=e[1],d=e[2],p=e[3];return t[0]=l*u-d*h+p*a,t[1]=-c*u+d*o-p*s,t[2]=c*h-l*o+p*n,t[3]=-c*a+l*s-d*n,t}function hr(t,e,i,r){var n=e[0],s=e[1],o=e[2],a=e[3];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t[2]=o+r*(i[2]-o),t[3]=a+r*(i[3]-a),t}function ur(t,e){var i,r,n,s,o,a;e=e||1;do{o=(i=2*m()-1)*i+(r=2*m()-1)*r}while(o>=1);do{a=(n=2*m()-1)*n+(s=2*m()-1)*s}while(a>=1);var h=Math.sqrt((1-o)/a);return t[0]=e*i,t[1]=e*r,t[2]=e*n*h,t[3]=e*s*h,t}function cr(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3];return t[0]=i[0]*r+i[4]*n+i[8]*s+i[12]*o,t[1]=i[1]*r+i[5]*n+i[9]*s+i[13]*o,t[2]=i[2]*r+i[6]*n+i[10]*s+i[14]*o,t[3]=i[3]*r+i[7]*n+i[11]*s+i[15]*o,t}function lr(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],h=i[2],u=i[3],c=u*r+a*s-h*n,l=u*n+h*r-o*s,d=u*s+o*n-a*r,p=-o*r-a*n-h*s;return t[0]=c*u+p*-o+l*-h-d*-a,t[1]=l*u+p*-a+d*-o-c*-h,t[2]=d*u+p*-h+c*-a-l*-o,t[3]=e[3],t}function dr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pr(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function fr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mr(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],o=e[0],a=e[1],h=e[2],u=e[3];return Math.abs(i-o)<=p*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-a)<=p*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-h)<=p*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-u)<=p*Math.max(1,Math.abs(s),Math.abs(u))}var vr=ji,_r=Xi,yr=Wi,gr=$i,Mr=tr,wr=er,br=ir,xr=function(){var t=Hi();return function(e,i,r,n,s,o){var a,h;for(i||(i=4),r||(r=0),h=n?Math.min(n*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}}();function Er(){var t=new f(4);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Lr(t,e,i){i*=.5;var r=Math.sin(i);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(i),t}function Sr(t,e){var i=2*Math.acos(e[3]),r=Math.sin(i/2);return r>p?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),i}function Cr(t,e){var i=nn(t,e);return Math.acos(2*i*i-1)}function Ar(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1],u=i[2],c=i[3];return t[0]=r*c+o*a+n*u-s*h,t[1]=n*c+o*h+s*a-r*u,t[2]=s*c+o*u+r*h-n*a,t[3]=o*c-r*a-n*h-s*u,t}function Pr(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+o*a,t[1]=n*h+s*a,t[2]=s*h-n*a,t[3]=o*h-r*a,t}function Rr(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h-s*a,t[1]=n*h+o*a,t[2]=s*h+r*a,t[3]=o*h-n*a,t}function Fr(t,e,i){i*=.5;var r=e[0],n=e[1],s=e[2],o=e[3],a=Math.sin(i),h=Math.cos(i);return t[0]=r*h+n*a,t[1]=n*h-r*a,t[2]=s*h+o*a,t[3]=o*h-s*a,t}function zr(t,e){var i=e[0],r=e[1],n=e[2];return t[0]=i,t[1]=r,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-r*r-n*n)),t}function kr(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=Math.sqrt(i*i+r*r+n*n),a=Math.exp(s),h=o>0?a*Math.sin(o)/o:0;return t[0]=i*h,t[1]=r*h,t[2]=n*h,t[3]=a*Math.cos(o),t}function Or(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=Math.sqrt(i*i+r*r+n*n),a=o>0?Math.atan2(o,s)/o:0;return t[0]=i*a,t[1]=r*a,t[2]=n*a,t[3]=.5*Math.log(i*i+r*r+n*n+s*s),t}function Ir(t,e,i){return Or(t,e),rn(t,t,i),kr(t,t),t}function Hr(t,e,i,r){var n,s,o,a,h,u=e[0],c=e[1],l=e[2],d=e[3],f=i[0],m=i[1],v=i[2],_=i[3];return(s=u*f+c*m+l*v+d*_)<0&&(s=-s,f=-f,m=-m,v=-v,_=-_),1-s>p?(n=Math.acos(s),o=Math.sin(n),a=Math.sin((1-r)*n)/o,h=Math.sin(r*n)/o):(a=1-r,h=r),t[0]=a*u+h*f,t[1]=a*c+h*m,t[2]=a*l+h*v,t[3]=a*d+h*_,t}function Br(t){var e=m(),i=m(),r=m(),n=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*r),t[3]=s*Math.cos(2*Math.PI*r),t}function Dr(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=i*i+r*r+n*n+s*s,a=o?1/o:0;return t[0]=-i*a,t[1]=-r*a,t[2]=-n*a,t[3]=s*a,t}function qr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Nr(t,e){var i,r=e[0]+e[4]+e[8];if(r>0)i=Math.sqrt(r+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);var s=(n+1)%3,o=(n+2)%3;i=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*o+o]+1),t[n]=.5*i,i=.5/i,t[3]=(e[3*s+o]-e[3*o+s])*i,t[s]=(e[3*s+n]+e[3*n+s])*i,t[o]=(e[3*o+n]+e[3*n+o])*i}return t}function Vr(t,e,i,r){var n=.5*Math.PI/180;e*=n,i*=n,r*=n;var s=Math.sin(e),o=Math.cos(e),a=Math.sin(i),h=Math.cos(i),u=Math.sin(r),c=Math.cos(r);return t[0]=s*h*c-o*a*u,t[1]=o*a*c+s*h*u,t[2]=o*h*u-s*a*c,t[3]=o*h*c+s*a*u,t}function jr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Xr,Wr,Yr,Gr,Ur,Kr,Zr=Bi,Qr=Di,Jr=qi,$r=Ni,tn=Vi,en=Ar,rn=Qi,nn=or,sn=hr,on=er,an=on,hn=ir,un=hn,cn=sr,ln=fr,dn=mr,pn=(Xr=Ve(),Wr=We(1,0,0),Yr=We(0,1,0),function(t,e,i){var r=li(e,i);return r<-.999999?(di(Xr,Wr,e),ki(Xr)<1e-6&&di(Xr,Yr,e),ci(Xr,Xr),Lr(t,Xr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(di(Xr,e,i),t[0]=Xr[0],t[1]=Xr[1],t[2]=Xr[2],t[3]=1+r,cn(t,t))}),fn=(Gr=Er(),Ur=Er(),function(t,e,i,r,n,s){return Hr(Gr,e,n,s),Hr(Ur,i,r,s),Hr(t,Gr,Ur,2*s*(1-s)),t}),mn=(Kr=_t(),function(t,e,i,r){return Kr[0]=i[0],Kr[3]=i[1],Kr[6]=i[2],Kr[1]=r[0],Kr[4]=r[1],Kr[7]=r[2],Kr[2]=-e[0],Kr[5]=-e[1],Kr[8]=-e[2],cn(t,Nr(t,Kr))});function vn(){var t=new f(8);return f!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function _n(t){var e=new f(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function yn(t,e,i,r,n,s,o,a){var h=new f(8);return h[0]=t,h[1]=e,h[2]=i,h[3]=r,h[4]=n,h[5]=s,h[6]=o,h[7]=a,h}function gn(t,e,i,r,n,s,o){var a=new f(8);a[0]=t,a[1]=e,a[2]=i,a[3]=r;var h=.5*n,u=.5*s,c=.5*o;return a[4]=h*r+u*i-c*e,a[5]=u*r+c*t-h*i,a[6]=c*r+h*e-u*t,a[7]=-h*t-u*e-c*i,a}function Mn(t,e,i){var r=.5*i[0],n=.5*i[1],s=.5*i[2],o=e[0],a=e[1],h=e[2],u=e[3];return t[0]=o,t[1]=a,t[2]=h,t[3]=u,t[4]=r*u+n*h-s*a,t[5]=n*u+s*o-r*h,t[6]=s*u+r*a-n*o,t[7]=-r*o-n*a-s*h,t}function wn(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function bn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function xn(t,e){var i=Er();be(i,e);var r=new f(3);return Me(r,e),Mn(t,i,r),t}function En(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Tn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ln(t,e,i,r,n,s,o,a,h){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=s,t[5]=o,t[6]=a,t[7]=h,t}var Sn=Jr;function Cn(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var An=Jr;function Pn(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Rn(t,e){var i=e[4],r=e[5],n=e[6],s=e[7],o=-e[0],a=-e[1],h=-e[2],u=e[3];return t[0]=2*(i*u+s*o+r*h-n*a),t[1]=2*(r*u+s*a+n*o-i*h),t[2]=2*(n*u+s*h+i*a-r*o),t}function Fn(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=.5*i[0],h=.5*i[1],u=.5*i[2],c=e[4],l=e[5],d=e[6],p=e[7];return t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=o*a+n*u-s*h+c,t[5]=o*h+s*a-r*u+l,t[6]=o*u+r*h-n*a+d,t[7]=-r*a-n*h-s*u+p,t}function zn(t,e,i){var r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*o+c*r+h*s-u*n,d=h*o+c*n+u*r-a*s,p=u*o+c*s+a*n-h*r,f=c*o-a*r-h*n-u*s;return Pr(t,e,i),r=t[0],n=t[1],s=t[2],o=t[3],t[4]=l*o+f*r+d*s-p*n,t[5]=d*o+f*n+p*r-l*s,t[6]=p*o+f*s+l*n-d*r,t[7]=f*o-l*r-d*n-p*s,t}function kn(t,e,i){var r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*o+c*r+h*s-u*n,d=h*o+c*n+u*r-a*s,p=u*o+c*s+a*n-h*r,f=c*o-a*r-h*n-u*s;return Rr(t,e,i),r=t[0],n=t[1],s=t[2],o=t[3],t[4]=l*o+f*r+d*s-p*n,t[5]=d*o+f*n+p*r-l*s,t[6]=p*o+f*s+l*n-d*r,t[7]=f*o-l*r-d*n-p*s,t}function On(t,e,i){var r=-e[0],n=-e[1],s=-e[2],o=e[3],a=e[4],h=e[5],u=e[6],c=e[7],l=a*o+c*r+h*s-u*n,d=h*o+c*n+u*r-a*s,p=u*o+c*s+a*n-h*r,f=c*o-a*r-h*n-u*s;return Fr(t,e,i),r=t[0],n=t[1],s=t[2],o=t[3],t[4]=l*o+f*r+d*s-p*n,t[5]=d*o+f*n+p*r-l*s,t[6]=p*o+f*s+l*n-d*r,t[7]=f*o-l*r-d*n-p*s,t}function In(t,e,i){var r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],h=e[1],u=e[2],c=e[3];return t[0]=a*o+c*r+h*s-u*n,t[1]=h*o+c*n+u*r-a*s,t[2]=u*o+c*s+a*n-h*r,t[3]=c*o-a*r-h*n-u*s,a=e[4],h=e[5],u=e[6],c=e[7],t[4]=a*o+c*r+h*s-u*n,t[5]=h*o+c*n+u*r-a*s,t[6]=u*o+c*s+a*n-h*r,t[7]=c*o-a*r-h*n-u*s,t}function Hn(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[0],h=i[1],u=i[2],c=i[3];return t[0]=r*c+o*a+n*u-s*h,t[1]=n*c+o*h+s*a-r*u,t[2]=s*c+o*u+r*h-n*a,t[3]=o*c-r*a-n*h-s*u,a=i[4],h=i[5],u=i[6],c=i[7],t[4]=r*c+o*a+n*u-s*h,t[5]=n*c+o*h+s*a-r*u,t[6]=s*c+o*u+r*h-n*a,t[7]=o*c-r*a-n*h-s*u,t}function Bn(t,e,i,r){if(Math.abs(r)<p)return En(t,e);var n=Math.hypot(i[0],i[1],i[2]);r*=.5;var s=Math.sin(r),o=s*i[0]/n,a=s*i[1]/n,h=s*i[2]/n,u=Math.cos(r),c=e[0],l=e[1],d=e[2],f=e[3];t[0]=c*u+f*o+l*h-d*a,t[1]=l*u+f*a+d*o-c*h,t[2]=d*u+f*h+c*a-l*o,t[3]=f*u-c*o-l*a-d*h;var m=e[4],v=e[5],_=e[6],y=e[7];return t[4]=m*u+y*o+v*h-_*a,t[5]=v*u+y*a+_*o-m*h,t[6]=_*u+y*h+m*a-v*o,t[7]=y*u-m*o-v*a-_*h,t}function Dn(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t}function qn(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=i[4],h=i[5],u=i[6],c=i[7],l=e[4],d=e[5],p=e[6],f=e[7],m=i[0],v=i[1],_=i[2],y=i[3];return t[0]=r*y+o*m+n*_-s*v,t[1]=n*y+o*v+s*m-r*_,t[2]=s*y+o*_+r*v-n*m,t[3]=o*y-r*m-n*v-s*_,t[4]=r*c+o*a+n*u-s*h+l*y+f*m+d*_-p*v,t[5]=n*c+o*h+s*a-r*u+d*y+f*v+p*m-l*_,t[6]=s*c+o*u+r*h-n*a+p*y+f*_+l*v-d*m,t[7]=o*c-r*a-n*h-s*u+f*y-l*m-d*v-p*_,t}var Nn=qn;function Vn(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t}var jn=nn;function Xn(t,e,i,r){var n=1-r;return jn(e,i)<0&&(r=-r),t[0]=e[0]*n+i[0]*r,t[1]=e[1]*n+i[1]*r,t[2]=e[2]*n+i[2]*r,t[3]=e[3]*n+i[3]*r,t[4]=e[4]*n+i[4]*r,t[5]=e[5]*n+i[5]*r,t[6]=e[6]*n+i[6]*r,t[7]=e[7]*n+i[7]*r,t}function Wn(t,e){var i=Kn(e);return t[0]=-e[0]/i,t[1]=-e[1]/i,t[2]=-e[2]/i,t[3]=e[3]/i,t[4]=-e[4]/i,t[5]=-e[5]/i,t[6]=-e[6]/i,t[7]=e[7]/i,t}function Yn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Gn=on,Un=Gn,Kn=hn,Zn=Kn;function Qn(t,e){var i=Kn(e);if(i>0){i=Math.sqrt(i);var r=e[0]/i,n=e[1]/i,s=e[2]/i,o=e[3]/i,a=e[4],h=e[5],u=e[6],c=e[7],l=r*a+n*h+s*u+o*c;t[0]=r,t[1]=n,t[2]=s,t[3]=o,t[4]=(a-r*l)/i,t[5]=(h-n*l)/i,t[6]=(u-s*l)/i,t[7]=(c-o*l)/i}return t}function Jn(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function $n(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ts(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5],h=t[6],u=t[7],c=e[0],l=e[1],d=e[2],f=e[3],m=e[4],v=e[5],_=e[6],y=e[7];return Math.abs(i-c)<=p*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(r-l)<=p*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=p*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(s-f)<=p*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(o-m)<=p*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-v)<=p*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(h-_)<=p*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(u-y)<=p*Math.max(1,Math.abs(u),Math.abs(y))}function es(){var t=new f(2);return f!=Float32Array&&(t[0]=0,t[1]=0),t}function is(t){var e=new f(2);return e[0]=t[0],e[1]=t[1],e}function rs(t,e){var i=new f(2);return i[0]=t,i[1]=e,i}function ns(t,e){return t[0]=e[0],t[1]=e[1],t}function ss(t,e,i){return t[0]=e,t[1]=i,t}function os(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function as(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function hs(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function us(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function cs(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function ls(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ds(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function ps(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function fs(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function ms(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function vs(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}function _s(t,e){var i=e[0]-t[0],r=e[1]-t[1];return Math.hypot(i,r)}function ys(t,e){var i=e[0]-t[0],r=e[1]-t[1];return i*i+r*r}function gs(t){var e=t[0],i=t[1];return Math.hypot(e,i)}function Ms(t){var e=t[0],i=t[1];return e*e+i*i}function ws(t,e){return t[0]=-e[0],t[1]=-e[1],t}function bs(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function xs(t,e){var i=e[0],r=e[1],n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n)),t[0]=e[0]*n,t[1]=e[1]*n,t}function Es(t,e){return t[0]*e[0]+t[1]*e[1]}function Ts(t,e,i){var r=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=r,t}function Ls(t,e,i,r){var n=e[0],s=e[1];return t[0]=n+r*(i[0]-n),t[1]=s+r*(i[1]-s),t}function Ss(t,e){e=e||1;var i=2*m()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function Cs(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n,t[1]=i[1]*r+i[3]*n,t}function As(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}function Ps(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Rs(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[4]*n+i[12],t[1]=i[1]*r+i[5]*n+i[13],t}function Fs(t,e,i,r){var n=e[0]-i[0],s=e[1]-i[1],o=Math.sin(r),a=Math.cos(r);return t[0]=n*a-s*o+i[0],t[1]=n*o+s*a+i[1],t}function zs(t,e){var i=t[0],r=t[1],n=e[0],s=e[1],o=Math.sqrt(i*i+r*r)*Math.sqrt(n*n+s*s),a=o&&(i*n+r*s)/o;return Math.acos(Math.min(Math.max(a,-1),1))}function ks(t){return t[0]=0,t[1]=0,t}function Os(t){return"vec2("+t[0]+", "+t[1]+")"}function Is(t,e){return t[0]===e[0]&&t[1]===e[1]}function Hs(t,e){var i=t[0],r=t[1],n=e[0],s=e[1];return Math.abs(i-n)<=p*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(r-s)<=p*Math.max(1,Math.abs(r),Math.abs(s))}var Bs=gs,Ds=as,qs=hs,Ns=us,Vs=_s,js=ys,Xs=Ms,Ws=function(){var t=es();return function(e,i,r,n,s,o){var a,h;for(i||(i=2),r||(r=0),h=n?Math.min(n*i+r,e.length):e.length,a=r;a<h;a+=i)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}()},840:(t,e,i)=>{var r;!function(n,s,o,a){"use strict";var h=["","webkit","moz","MS","ms","o"],u=s.createElement("div"),c=Math.round,l=Math.abs,d=Date.now;function p(t,e,i){return setTimeout(g(t,i),e)}function f(t,e,i){return!!Array.isArray(t)&&(m(t,i[e],i),!0)}function m(t,e,i){var r;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a)for(r=0;r<t.length;)e.call(i,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(i,t[r],r,t)}function v(t,e,i){for(var r=Object.keys(e),n=0;n<r.length;)(!i||i&&t[r[n]]===a)&&(t[r[n]]=e[r[n]]),n++;return t}function _(t,e){return v(t,e,!0)}function y(t,e,i){var r,n=e.prototype;(r=t.prototype=Object.create(n)).constructor=t,r._super=n,i&&v(r,i)}function g(t,e){return function(){return t.apply(e,arguments)}}function M(t,e){return"function"==typeof t?t.apply(e&&e[0]||a,e):t}function w(t,e){return t===a?e:t}function b(t,e,i){m(L(e),(function(e){t.addEventListener(e,i,!1)}))}function x(t,e,i){m(L(e),(function(e){t.removeEventListener(e,i,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function L(t){return t.trim().split(/\s+/g)}function S(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var r=0;r<t.length;){if(i&&t[r][i]==e||!i&&t[r]===e)return r;r++}return-1}function C(t){return Array.prototype.slice.call(t,0)}function A(t,e,i){for(var r=[],n=[],s=0;s<t.length;){var o=e?t[s][e]:t[s];S(n,o)<0&&r.push(t[s]),n[s]=o,s++}return i&&(r=e?r.sort((function(t,i){return t[e]>i[e]})):r.sort()),r}function P(t,e){for(var i,r,n=e[0].toUpperCase()+e.slice(1),s=0;s<h.length;){if((r=(i=h[s])?i+n:e)in t)return r;s++}return a}var R=1;function F(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}var z="ontouchstart"in n,k=P(n,"PointerEvent")!==a,O=z&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I="touch",H="mouse",B=["x","y"],D=["clientX","clientY"];function q(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){M(t.options.enable,[t])&&i.handler(e)},this.init()}function N(t,e,i){var r=i.pointers.length,n=i.changedPointers.length,s=1&e&&r-n==0,o=12&e&&r-n==0;i.isFirst=!!s,i.isFinal=!!o,s&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,r=e.pointers,n=r.length;i.firstInput||(i.firstInput=V(e)),n>1&&!i.firstMultiple?i.firstMultiple=V(e):1===n&&(i.firstMultiple=!1);var s,o,h=i.firstInput,u=i.firstMultiple,c=u?u.center:h.center,p=e.center=j(r);e.timeStamp=d(),e.deltaTime=e.timeStamp-h.timeStamp,e.angle=Y(c,p),e.distance=W(c,p),function(t,e){var i=e.center,r=t.offsetDelta||{},n=t.prevDelta||{},s=t.prevInput||{};1!==e.eventType&&4!==s.eventType||(n=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=n.x+(i.x-r.x),e.deltaY=n.y+(i.y-r.y)}(i,e),e.offsetDirection=X(e.deltaX,e.deltaY),e.scale=u?(s=u.pointers,W((o=r)[0],o[1],D)/W(s[0],s[1],D)):1,e.rotation=u?function(t,e){return Y(e[1],e[0],D)-Y(t[1],t[0],D)}(u.pointers,r):0,function(t,e){var i,r,n,s,o=t.lastInterval||e,h=e.timeStamp-o.timeStamp;if(8!=e.eventType&&(h>25||o.velocity===a)){var u=o.deltaX-e.deltaX,c=o.deltaY-e.deltaY,d=function(t,e,i){return{x:e/t||0,y:i/t||0}}(h,u,c);r=d.x,n=d.y,i=l(d.x)>l(d.y)?d.x:d.y,s=X(u,c),t.lastInterval=e}else i=o.velocity,r=o.velocityX,n=o.velocityY,s=o.direction;e.velocity=i,e.velocityX=r,e.velocityY=n,e.direction=s}(i,e);var f=t.element;E(e.srcEvent.target,f)&&(f=e.srcEvent.target),e.target=f}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function V(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:c(t.pointers[i].clientX),clientY:c(t.pointers[i].clientY)},i++;return{timeStamp:d(),pointers:e,center:j(e),deltaX:t.deltaX,deltaY:t.deltaY}}function j(t){var e=t.length;if(1===e)return{x:c(t[0].clientX),y:c(t[0].clientY)};for(var i=0,r=0,n=0;n<e;)i+=t[n].clientX,r+=t[n].clientY,n++;return{x:c(i/e),y:c(r/e)}}function X(t,e){return t===e?1:l(t)>=l(e)?t>0?2:4:e>0?8:16}function W(t,e,i){i||(i=B);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(r*r+n*n)}function Y(t,e,i){i||(i=B);var r=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,r)/Math.PI}q.prototype={handler:function(){},init:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(F(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(F(this.element),this.evWin,this.domHandler)}};var G={mousedown:1,mousemove:2,mouseup:4},U="mousedown",K="mousemove mouseup";function Z(){this.evEl=U,this.evWin=K,this.allow=!0,this.pressed=!1,q.apply(this,arguments)}y(Z,q,{handler:function(t){var e=G[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&this.allow&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:H,srcEvent:t}))}});var Q={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:I,3:"pen",4:H,5:"kinect"},$="pointerdown",tt="pointermove pointerup pointercancel";function et(){this.evEl=$,this.evWin=tt,q.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&($="MSPointerDown",tt="MSPointerMove MSPointerUp MSPointerCancel"),y(et,q,{handler:function(t){var e=this.store,i=!1,r=t.type.toLowerCase().replace("ms",""),n=Q[r],s=J[t.pointerType]||t.pointerType,o=s==I,a=S(e,t.pointerId,"pointerId");1&n&&(0===t.button||o)?a<0&&(e.push(t),a=e.length-1):12&n&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var it={touchstart:1,touchmove:2,touchend:4,touchcancel:8},rt="touchstart",nt="touchstart touchmove touchend touchcancel";function st(){this.evTarget=rt,this.evWin=nt,this.started=!1,q.apply(this,arguments)}function ot(t,e){var i=C(t.touches),r=C(t.changedTouches);return 12&e&&(i=A(i.concat(r),"identifier",!0)),[i,r]}y(st,q,{handler:function(t){var e=it[t.type];if(1===e&&(this.started=!0),this.started){var i=ot.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:I,srcEvent:t})}}});var at={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=ht,this.targetIds={},q.apply(this,arguments)}function ct(t,e){var i=C(t.touches),r=this.targetIds;if(3&e&&1===i.length)return r[i[0].identifier]=!0,[i,i];var n,s,o=C(t.changedTouches),a=[],h=this.target;if(s=i.filter((function(t){return E(t.target,h)})),1===e)for(n=0;n<s.length;)r[s[n].identifier]=!0,n++;for(n=0;n<o.length;)r[o[n].identifier]&&a.push(o[n]),12&e&&delete r[o[n].identifier],n++;return a.length?[A(s.concat(a),"identifier",!0),a]:void 0}function lt(){q.apply(this,arguments);var t=g(this.handler,this);this.touch=new ut(this.manager,t),this.mouse=new Z(this.manager,t)}y(ut,q,{handler:function(t){var e=at[t.type],i=ct.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:I,srcEvent:t})}}),y(lt,q,{handler:function(t,e,i){var r=i.pointerType==I,n=i.pointerType==H;if(r)this.mouse.allow=!1;else if(n&&!this.mouse.allow)return;12&e&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var dt=P(u.style,"touchAction"),pt=dt!==a,ft="compute",mt="auto",vt="manipulation",_t="none",yt="pan-x",gt="pan-y";function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){t==ft&&(t=this.compute()),pt&&(this.manager.element.style[dt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return m(this.manager.recognizers,(function(e){M(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,_t))return _t;var e=T(t,yt),i=T(t,gt);return e&&i?"pan-x pan-y":e||i?e?yt:gt:T(t,vt)?vt:mt}(t.join(" "))},preventDefaults:function(t){if(!pt){var e=t.srcEvent,i=t.offsetDirection;if(!this.manager.session.prevented){var r=this.actions,n=T(r,_t),s=T(r,gt),o=T(r,yt);return n||s&&6&i||o&&24&i?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var wt=32;function bt(t){this.id=R++,this.manager=null,this.options=_(t||{},this.defaults),this.options.enable=w(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function xt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function Et(t,e){var i=e.manager;return i?i.get(t):t}function Tt(){bt.apply(this,arguments)}function Lt(){Tt.apply(this,arguments),this.pX=null,this.pY=null}function St(){Tt.apply(this,arguments)}function Ct(){bt.apply(this,arguments),this._timer=null,this._input=null}function At(){Tt.apply(this,arguments)}function Pt(){Tt.apply(this,arguments)}function Rt(){bt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ft(t,e){return(e=e||{}).recognizers=w(e.recognizers,Ft.defaults.preset),new zt(t,e)}function zt(t,e){e=e||{},this.options=_(e,Ft.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=new(this.options.inputClass||(k?et:O?ut:z?lt:Z))(this,N),this.touchAction=new Mt(this,this.options.touchAction),kt(this,!0),m(e.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function kt(t,e){var i=t.element;m(t.options.cssProps,(function(t,r){i.style[P(i.style,r)]=e?t:""}))}bt.prototype={defaults:{},set:function(t){return v(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(f(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Et(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return f(t,"dropRecognizeWith",this)||(t=Et(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(f(t,"requireFailure",this))return this;var e=this.requireFail;return-1===S(e,t=Et(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(f(t,"dropRequireFailure",this))return this;t=Et(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function r(r){e.manager.emit(e.options.event+(r?function(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}(i):""),t)}i<8&&r(!0),r(),i>=8&&r(!0)},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=wt},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=v({},t);if(!M(this.options.enable,[this,e]))return this.reset(),void(this.state=wt);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},y(Tt,bt,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,r=6&e,n=this.attrTest(t);return r&&(8&i||!n)?16|e:r||n?4&i?8|e:2&e?4|e:2:wt}}),y(Lt,Tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(gt),24&t&&e.push(yt),e},directionTest:function(t){var e=this.options,i=!0,r=t.distance,n=t.direction,s=t.deltaX,o=t.deltaY;return n&e.direction||(6&e.direction?(n=0===s?1:s<0?2:4,i=s!=this.pX,r=Math.abs(t.deltaX)):(n=0===o?1:o<0?8:16,i=o!=this.pY,r=Math.abs(t.deltaY))),t.direction=n,i&&r>e.threshold&&n&e.direction},attrTest:function(t){return Tt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=xt(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),y(St,Tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),y(Ct,bt,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[mt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!r||!i||12&t.eventType&&!n)this.reset();else if(1&t.eventType)this.reset(),this._timer=p((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return wt},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=d(),this.manager.emit(this.options.event,this._input)))}}),y(At,Tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_t]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),y(Pt,Tt,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:30,pointers:1},getTouchAction:function(){return Lt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return 30&i?e=t.velocity:6&i?e=t.velocityX:24&i&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&l(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=xt(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),y(Rt,bt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[vt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,r=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&n&&i){if(4!=t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,o=!this.pCenter||W(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,o&&s?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=p((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return wt},failTimeout:function(){return this._timer=p((function(){this.state=wt}),this.options.interval,this),wt},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ft.VERSION="2.0.4",Ft.defaults={domEvents:!1,touchAction:ft,enable:!0,inputTarget:null,inputClass:null,preset:[[At,{enable:!1}],[St,{enable:!1},["rotate"]],[Pt,{direction:6}],[Lt,{direction:6},["swipe"]],[Rt],[Rt,{event:"doubletap",taps:2},["tap"]],[Ct]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},zt.prototype={set:function(t){return v(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var r=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(n=e.curRecognizer=null);for(var s=0;s<r.length;)i=r[s],2===e.stopped||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(n=e.curRecognizer=i),s++}},get:function(t){if(t instanceof bt)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(f(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(f(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(S(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return m(L(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},off:function(t,e){var i=this.handlers;return m(L(t),(function(t){e?i[t].splice(S(i[t],e),1):delete i[t]})),this},emit:function(t,e){this.options.domEvents&&function(t,e){var i=s.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<i.length;)i[r](e),r++}},destroy:function(){this.element&&kt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},v(Ft,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:wt,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:zt,Input:q,TouchAction:Mt,TouchInput:ut,MouseInput:Z,PointerEventInput:et,TouchMouseInput:lt,SingleTouchInput:st,Recognizer:bt,AttrRecognizer:Tt,Tap:Rt,Pan:Lt,Swipe:Pt,Pinch:St,Rotate:At,Press:Ct,on:b,off:x,each:m,merge:_,extend:v,inherit:y,bindFn:g,prefixed:P}),i.amdO?(r=function(){return Ft}.call(e,i,e,t))===a||(t.exports=r):t.exports?t.exports=Ft:n.Hammer=Ft}(window,document)},1154:(t,e,i)=>{"use strict";var r=i(5696),n=i(7691),s=i(6939).setTransform,o=i(6112);function a(t,e,i,r,n){(n=n||{}).perspective=n.perspective||{},n.perspective.extraTransforms=null!=n.perspective.extraTransforms?n.perspective.extraTransforms:"",this._domElement=t,this._parentDomElement=e,this._view=i,this._coords={},this._perspective={},this.setPosition(r),this._parentDomElement.appendChild(this._domElement),this.setPerspective(n.perspective),this._visible=!0,this._position={x:0,y:0}}r(a),a.prototype.destroy=function(){this._parentDomElement.removeChild(this._domElement),o(this)},a.prototype.domElement=function(){return this._domElement},a.prototype.position=function(){return this._coords},a.prototype.setPosition=function(t){for(var e in t)this._coords[e]=t[e];this._update()},a.prototype.perspective=function(){return this._perspective},a.prototype.setPerspective=function(t){for(var e in t)this._perspective[e]=t[e];this._update()},a.prototype.show=function(){this._visible||(this._visible=!0,this._update())},a.prototype.hide=function(){this._visible&&(this._visible=!1,this._update())},a.prototype._update=function(){var t,e,i=this._domElement,r=this._coords,n=this._position,s=!1;if(this._visible){var o=this._view;this._perspective.radius?(s=!0,this._setEmbeddedPosition(o,r)):(o.coordinatesToScreen(r,n),t=n.x,e=n.y,null!=t&&null!=e&&(s=!0,this._setPosition(t,e)))}s?(i.style.display="block",i.style.position="absolute"):(i.style.display="none",i.style.position="")},a.prototype._setEmbeddedPosition=function(t,e){var i=t.coordinatesToPerspectiveTransform(e,this._perspective.radius,this._perspective.extraTransforms);s(this._domElement,i)},a.prototype._setPosition=function(t,e){n(this._domElement,t,e,this._perspective.extraTransforms)},t.exports=a},3561:(t,e,i)=>{"use strict";var r=i(5696),n=i(1154),s=i(6929),o=i(7691),a=i(6939).setAbsolute,h=i(6939).setOverflowHidden,u=i(6939).setOverflowVisible,c=i(6939).setNullSize,l=i(6939).setPixelSize,d=i(6939).setWithVendorPrefix("pointer-events"),p=i(6112);function f(t,e,i,r,n){n=n||{},this._parentDomElement=t,this._stage=e,this._view=i,this._renderLoop=r,this._hotspots=[],this._visible=!0,this._rect=n.rect,this._visibilityOrRectChanged=!0,this._stageWidth=null,this._stageHeight=null,this._tmpRect={},this._hotspotContainerWrapper=document.createElement("div"),a(this._hotspotContainerWrapper),d(this._hotspotContainerWrapper,"none"),this._parentDomElement.appendChild(this._hotspotContainerWrapper),this._hotspotContainer=document.createElement("div"),a(this._hotspotContainer),d(this._hotspotContainer,"all"),this._hotspotContainerWrapper.appendChild(this._hotspotContainer),this._updateHandler=this._update.bind(this),this._renderLoop.addEventListener("afterRender",this._updateHandler)}r(f),f.prototype.destroy=function(){for(;this._hotspots.length;)this.destroyHotspot(this._hotspots[0]);this._parentDomElement.removeChild(this._hotspotContainerWrapper),this._renderLoop.removeEventListener("afterRender",this._updateHandler),p(this)},f.prototype.domElement=function(){return this._hotspotContainer},f.prototype.setRect=function(t){this._rect=t,this._visibilityOrRectChanged=!0},f.prototype.rect=function(){return this._rect},f.prototype.createHotspot=function(t,e,i){e=e||{};var r=new n(t,this._hotspotContainer,this._view,e,i);return this._hotspots.push(r),r._update(),this.emit("hotspotsChange"),r},f.prototype.hasHotspot=function(t){return this._hotspots.indexOf(t)>=0},f.prototype.listHotspots=function(){return[].concat(this._hotspots)},f.prototype.destroyHotspot=function(t){var e=this._hotspots.indexOf(t);if(e<0)throw new Error("No such hotspot");this._hotspots.splice(e,1),t.destroy(),this.emit("hotspotsChange")},f.prototype.hide=function(){this._visible&&(this._visible=!1,this._visibilityOrRectChanged=!0,this._update())},f.prototype.show=function(){this._visible||(this._visible=!0,this._visibilityOrRectChanged=!0,this._update())},f.prototype._update=function(){var t=this._hotspotContainerWrapper,e=this._stage.width(),i=this._stage.height(),r=this._tmpRect;if(this._visibilityOrRectChanged||this._rect&&(e!==this._stageWidth||i!==this._stageHeight)){var n=this._visible;t.style.display=n?"block":"none",n&&(this._rect?(s(e,i,this._rect,r),o(t,e*r.x,i*r.y),l(t,e*r.width,i*r.height),h(t)):(o(t,0,0),c(t),u(t))),this._stageWidth=e,this._stageHeight=i,this._visibilityOrRectChanged=!1}for(var a=0;a<this._hotspots.length;a++)this._hotspots[a]._update()},t.exports=f},4221:(t,e,i)=>{"use strict";var r=i(5696),n=i(8804),s=i(6112);function o(t,e,i,r,n){n=n||{};var s=this;this._source=t,this._geometry=e,this._view=i,this._textureStore=r,this._effects=n.effects||{},this._fixedLevelIndex=null,this._viewChangeHandler=function(){s.emit("viewChange",s.view())},this._view.addEventListener("change",this._viewChangeHandler),this._textureStoreChangeHandler=function(){s.emit("textureStoreChange",s.textureStore())},this._textureStore.addEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.addEventListener("textureInvalid",this._textureStoreChangeHandler)}r(o),o.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._textureStore.removeEventListener("textureLoad",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureError",this._textureStoreChangeHandler),this._textureStore.removeEventListener("textureInvalid",this._textureStoreChangeHandler),s(this)},o.prototype.source=function(){return this._source},o.prototype.geometry=function(){return this._geometry},o.prototype.view=function(){return this._view},o.prototype.textureStore=function(){return this._textureStore},o.prototype.effects=function(){return this._effects},o.prototype.setEffects=function(t){this._effects=t,this.emit("effectsChange",this._effects)},o.prototype.mergeEffects=function(t){n(this._effects,t),this.emit("effectsChange",this._effects)},o.prototype.fixedLevel=function(){return this._fixedLevelIndex},o.prototype.setFixedLevel=function(t){if(t!==this._fixedLevelIndex){if(null!=t&&(t>=this._geometry.levelList.length||t<0))throw new Error("Level index out of range: "+t);this._fixedLevelIndex=t,this.emit("fixedLevelChange",this._fixedLevelIndex)}},o.prototype._selectLevel=function(){return null!=this._fixedLevelIndex?this._geometry.levelList[this._fixedLevelIndex]:this._view.selectLevel(this._geometry.selectableLevelList)},o.prototype.visibleTiles=function(t){var e=this._selectLevel();return this._geometry.visibleTiles(this._view,e,t)},o.prototype.pinLevel=function(t){for(var e=this._geometry.levelList[t],i=this._geometry.levelTiles(e),r=0;r<i.length;r++)this._textureStore.pin(i[r])},o.prototype.unpinLevel=function(t){for(var e=this._geometry.levelList[t],i=this._geometry.levelTiles(e),r=0;r<i.length;r++)this._textureStore.unpin(i[r])},o.prototype.pinFirstLevel=function(){return this.pinLevel(0)},o.prototype.unpinFirstLevel=function(){return this.unpinLevel(0)},t.exports=o},3344:(t,e,i)=>{"use strict";function r(t){this.constructor.super_.apply(this,arguments),this.message=t}i(5003)(r,Error),t.exports=r},3036:(t,e,i)=>{"use strict";var r=i(5696),n=i(6112);function s(t){var e=this;this._stage=t,this._running=!1,this._rendering=!1,this._requestHandle=null,this._boundLoop=this._loop.bind(this),this._renderInvalidHandler=function(){e._rendering||e.renderOnNextFrame()},this._stage.addEventListener("renderInvalid",this._renderInvalidHandler)}r(s),s.prototype.destroy=function(){this.stop(),this._stage.removeEventListener("renderInvalid",this._renderInvalidHandler),n(this)},s.prototype.stage=function(){return this._stage},s.prototype.start=function(){this._running=!0,this.renderOnNextFrame()},s.prototype.stop=function(){this._requestHandle&&(window.cancelAnimationFrame(this._requestHandle),this._requestHandle=null),this._running=!1},s.prototype.renderOnNextFrame=function(){this._running&&!this._requestHandle&&(this._requestHandle=window.requestAnimationFrame(this._boundLoop))},s.prototype._loop=function(){if(!this._running)throw new Error("Render loop running while in stopped state");this._requestHandle=null,this._rendering=!0,this.emit("beforeRender"),this._rendering=!1,this._stage.render(),this.emit("afterRender")},t.exports=s},5214:(t,e,i)=>{"use strict";var r=i(4221),n=i(7559),s=i(3561),o=i(5696),a=i(1227),h=i(3120),u=i(3969),c=i(9821),l=i(6112);function d(t,e){this._viewer=t,this._view=e,this._layers=[],this._hotspotContainer=new s(t._controlContainer,t.stage(),this._view,t.renderLoop()),this._movement=null,this._movementStartTime=null,this._movementStep=null,this._movementParams=null,this._movementCallback=null,this._updateMovementHandler=this._updateMovement.bind(this),this._updateHotspotContainerHandler=this._updateHotspotContainer.bind(this),this._viewer.addEventListener("sceneChange",this._updateHotspotContainerHandler),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._view.addEventListener("change",this._viewChangeHandler),this._updateHotspotContainer()}o(d),d.prototype.destroy=function(){this._view.removeEventListener("change",this._viewChangeHandler),this._viewer.removeEventListener("sceneChange",this._updateHotspotContainerHandler),this._movement&&this.stopMovement(),this._hotspotContainer.destroy(),this.destroyAllLayers(),l(this)},d.prototype.hotspotContainer=function(){return this._hotspotContainer},d.prototype.layer=function(){return this._layers[0]},d.prototype.listLayers=function(){return[].concat(this._layers)},d.prototype.view=function(){return this._view},d.prototype.viewer=function(){return this._viewer},d.prototype.visible=function(){return this._viewer.scene()===this},d.prototype.createLayer=function(t){var e=(t=t||{}).textureStoreOpts||{},i=t.layerOpts||{},s=t.source,o=t.geometry,a=this._view,h=this._viewer.stage(),u=new n(s,h,e),c=new r(s,o,a,u,i);return this._layers.push(c),t.pinFirstLevel&&c.pinFirstLevel(),this.emit("layerChange"),c},d.prototype.destroyLayer=function(t){var e=this._layers.indexOf(t);if(e<0)throw new Error("No such layer in scene");this._layers.splice(e,1),this.emit("layerChange"),t.textureStore().destroy(),t.destroy()},d.prototype.destroyAllLayers=function(){for(;this._layers.length>0;)this.destroyLayer(this._layers[0])},d.prototype.switchTo=function(t,e){return this._viewer.switchScene(this,t,e)},d.prototype.lookTo=function(t,e,i){if(e=e||{},i=i||h,"object"!==u(t))throw new Error("Target view parameters must be an object");var r=null!=e.ease?e.ease:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},n=null!=e.controlsInterrupt&&e.controlsInterrupt,s=null!=e.transitionDuration?e.transitionDuration:1e3,o=null==e.shortest||e.shortest,a=this._view,l=a.parameters(),d={};c(d,t),c(d,l),o&&a.normalizeToClosest&&a.normalizeToClosest(d,d);var p=this._viewer.controls().enabled();n||this._viewer.controls().disable(),this.startMovement((function(){var t=!1;return function(e,i){if(i>=s&&t)return null;var n=Math.min(i/s,1);for(var o in e){var a=l[o],h=d[o];e[o]=a+r(n)*(h-a)}return t=i>=s,e}}),(function(){p&&this._viewer.controls().enable(),i()}))},d.prototype.startMovement=function(t,e){var i=this._viewer.renderLoop();this._movement&&this.stopMovement();var r=t();if("function"!=typeof r)throw new Error("Bad movement");this._movement=t,this._movementStep=r,this._movementStartTime=a(),this._movementParams={},this._movementCallback=e,i.addEventListener("beforeRender",this._updateMovementHandler),i.renderOnNextFrame()},d.prototype.stopMovement=function(){var t=this._viewer.renderLoop();this._movement&&(this._movementCallback&&this._movementCallback(),t.removeEventListener("beforeRender",this._updateMovementHandler),this._movement=null,this._movementStep=null,this._movementStartTime=null,this._movementParams=null,this._movementCallback=null)},d.prototype.movement=function(){return this._movement},d.prototype._updateMovement=function(){if(!this._movement)throw new Error("Should not call update");var t=this._viewer.renderLoop(),e=this._view,i=a()-this._movementStartTime,r=this._movementStep,n=this._movementParams;null==(n=r(n=e.parameters(n),i))?this.stopMovement():(e.setParameters(n),t.renderOnNextFrame())},d.prototype._updateHotspotContainer=function(){this.visible()?this._hotspotContainer.show():this._hotspotContainer.hide()},t.exports=d},7559:(t,e,i)=>{"use strict";var r=i(3180),n=i(5184),s=i(5290),o=i(5696),a=i(9821),h=i(2582),u=i(8111),c=i(5003),l=i(6112),d="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.textureStore,p={previouslyVisibleCacheSize:512},f=0;function m(){}function v(t,e){var i=this,r=f++;i._id=r,i._store=t,i._tile=e,i._asset=null,i._texture=null,i._changeHandler=function(){t.emit("textureInvalid",e)};var n=t.source(),s=t.stage(),o=n.loadAsset.bind(n),a=s.createTexture.bind(s),c=u(h(o),a);t.emit("textureStartLoad",e),d&&console.log("loading",r,e),i._cancel=c(s,e,(function(n,s,o,a){if(i._cancel=null,n)return o&&o.destroy(),a&&a.destroy(),void(n instanceof m?(t.emit("textureCancel",e),d&&console.log("cancel",r,e)):(t.emit("textureError",e,n),d&&console.log("error",r,e)));i._texture=a,o.isDynamic()?(i._asset=o,o.addEventListener("change",i._changeHandler)):o.destroy(),t.emit("textureLoad",e),d&&console.log("load",r,e)}))}function _(t,e,i){i=a(i||{},p),this._source=t,this._stage=e,this._state=0,this._delimCount=0,this._itemMap=new r,this._visible=new n,this._previouslyVisible=new s(i.previouslyVisibleCacheSize),this._pinMap=new r,this._newVisible=new n,this._noLongerVisible=[],this._visibleAgain=[],this._evicted=[]}c(m,Error),v.prototype.asset=function(){return this._asset},v.prototype.texture=function(){return this._texture},v.prototype.destroy=function(){var t=this._id,e=this._store,i=this._tile,r=this._asset,n=this._texture,s=this._cancel;s?s(new m("Texture load cancelled")):(r&&(r.removeEventListener("change",this._changeHandler),r.destroy()),n&&n.destroy(),e.emit("textureUnload",i),d&&console.log("unload",t,i),l(this))},o(v),o(_),_.prototype.destroy=function(){this.clear(),l(this)},_.prototype.stage=function(){return this._stage},_.prototype.source=function(){return this._source},_.prototype.clear=function(){var t=this;t._evicted.length=0,t._itemMap.forEach((function(e){t._evicted.push(e)})),t._evicted.forEach((function(e){t._unloadTile(e)})),t._itemMap.clear(),t._visible.clear(),t._previouslyVisible.clear(),t._pinMap.clear(),t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},_.prototype.clearNotPinned=function(){var t=this;t._evicted.length=0,t._itemMap.forEach((function(e){t._pinMap.has(e)||t._evicted.push(e)})),t._evicted.forEach((function(e){t._unloadTile(e)})),t._visible.clear(),t._previouslyVisible.clear(),t._evicted.length=0},_.prototype.startFrame=function(){if(0!==this._state&&1!==this._state)throw new Error("TextureStore: startFrame called out of sequence");this._state=1,this._delimCount++},_.prototype.markTile=function(t){if(1!==this._state&&2!==this._state)throw new Error("TextureStore: markTile called out of sequence");this._state=2;var e=this._itemMap.get(t),i=e&&e.texture(),r=e&&e.asset();i&&r&&i.refresh(t,r),this._newVisible.add(t)},_.prototype.endFrame=function(){if(1!==this._state&&2!==this._state&&3!==this._state)throw new Error("TextureStore: endFrame called out of sequence");this._state=3,this._delimCount--,this._delimCount||(this._update(),this._state=0)},_.prototype._update=function(){var t=this;t._noLongerVisible.length=0,t._visible.forEach((function(e){t._newVisible.has(e)||t._noLongerVisible.push(e)})),t._visibleAgain.length=0,t._newVisible.forEach((function(e){t._previouslyVisible.has(e)&&t._visibleAgain.push(e)})),t._visibleAgain.forEach((function(e){t._previouslyVisible.remove(e)})),t._evicted.length=0,t._noLongerVisible.forEach((function(e){var i=t._itemMap.get(e);if(i&&i.texture()){var r=t._previouslyVisible.add(e);null!=r&&t._evicted.push(r)}else i&&t._unloadTile(e)})),t._evicted.forEach((function(e){t._pinMap.has(e)||t._unloadTile(e)})),t._newVisible.forEach((function(e){t._itemMap.get(e)||t._loadTile(e)}));var e=t._visible;t._visible=t._newVisible,t._newVisible=e,t._newVisible.clear(),t._noLongerVisible.length=0,t._visibleAgain.length=0,t._evicted.length=0},_.prototype._loadTile=function(t){if(this._itemMap.has(t))throw new Error("TextureStore: loading texture already in cache");var e=new v(this,t);this._itemMap.set(t,e)},_.prototype._unloadTile=function(t){var e=this._itemMap.del(t);if(!e)throw new Error("TextureStore: unloading texture not in cache");e.destroy()},_.prototype.asset=function(t){var e=this._itemMap.get(t);return e?e.asset():null},_.prototype.texture=function(t){var e=this._itemMap.get(t);return e?e.texture():null},_.prototype.pin=function(t){var e=(this._pinMap.get(t)||0)+1;return this._pinMap.set(t,e),this._itemMap.has(t)||this._loadTile(t),e},_.prototype.unpin=function(t){var e=this._pinMap.get(t);if(!e)throw new Error("TextureStore: unpin when not pinned");return--e>0?this._pinMap.set(t,e):(this._pinMap.del(t),this._visible.has(t)||this._previouslyVisible.has(t)||this._unloadTile(t)),e},_.prototype.query=function(t){var e=this._itemMap.get(t),i=this._pinMap.get(t)||0;return{visible:this._visible.has(t),previouslyVisible:this._previouslyVisible.has(t),hasAsset:null!=e&&null!=e.asset(),hasTexture:null!=e&&null!=e.texture(),pinned:0!==i,pinCount:i}},t.exports=_},6085:(t,e,i)=>{"use strict";var r=i(5184);function n(){this._stack=[],this._visited=new r,this._vertices=null}n.prototype.search=function(t,e,i){var r=this._stack,n=this._visited,s=this._vertices,o=0;for(this._clear(),r.push(e);r.length>0;){var a=r.pop();if(!n.has(a)&&t.intersects(a.vertices(s))){n.add(a);for(var h=a.neighbors(),u=0;u<h.length;u++)r.push(h[u]);i.push(a),o++}}return this._vertices=s,this._clear(),o},n.prototype._clear=function(){this._stack.length=0,this._visited.clear()},t.exports=n},9274:(t,e,i)=>{"use strict";var r=i(5696),n=i(9821),s=i(1227),o={duration:1/0};function a(t){t=n(t||{},o),this._duration=t.duration,this._startTime=null,this._handle=null,this._check=this._check.bind(this)}r(a),a.prototype.start=function(){this._startTime=s(),null==this._handle&&this._duration<1/0&&this._setup(this._duration)},a.prototype.started=function(){return null!=this._startTime},a.prototype.stop=function(){this._startTime=null,null!=this._handle&&(clearTimeout(this._handle),this._handle=null)},a.prototype._setup=function(t){this._handle=setTimeout(this._check,t)},a.prototype._teardown=function(){clearTimeout(this._handle),this._handle=null},a.prototype._check=function(){var t=s()-this._startTime,e=this._duration-t;this._teardown(),e<=0?(this.emit("timeout"),this._startTime=null):e<1/0&&this._setup(e)},a.prototype.duration=function(){return this._duration},a.prototype.setDuration=function(t){this._duration=t,null!=this._startTime&&this._check()},t.exports=a},7599:(t,e,i)=>{"use strict";var r=i(1206),n=i(5696),s=i(3036),o=i(1839),a=i(5214),h=i(9274),u=i(5662),c=i(2569),l=i(8975),d=i(7895),p=i(1505),f=i(6939).setOverflowHidden,m=i(6939).setAbsolute,v=i(6939).setFullSize,_=i(6939).setBlocking,y=i(5026),g=i(3120),M=i(6112);function w(t,e){e=e||{},this._domElement=t,f(t),this._stage=new u(e.stage),p(this._stage),this._domElement.appendChild(this._stage.domElement()),this._controlContainer=document.createElement("div"),m(this._controlContainer),v(this._controlContainer),r.ios&&this._controlContainer.addEventListener("touchmove",(function(t){t.preventDefault()}));var i=document.createElement("div");m(i),v(i),_(i),this._controlContainer.appendChild(i),t.appendChild(this._controlContainer),this._size={},this.updateSize(),this._updateSizeListener=this.updateSize.bind(this),window.addEventListener("resize",this._updateSizeListener),this._renderLoop=new s(this._stage),this._controls=new o,this._controlMethods=d(this._controls,this._controlContainer,e.controls),this._controls.attach(this._renderLoop),this._hammerManagerTouch=l.get(this._controlContainer,"touch"),this._hammerManagerMouse=l.get(this._controlContainer,"mouse"),this._dragCursor=new c(this._controls,"mouseViewDrag",t,e.cursors&&e.cursors.drag||{}),this._renderLoop.start(),this._scenes=[],this._currentScene=null,this._replacedScene=null,this._cancelCurrentTween=null,this._layerChangeHandler=this._updateSceneLayers.bind(this),this._viewChangeHandler=this.emit.bind(this,"viewChange"),this._idleTimer=new h,this._idleTimer.start(),this._resetIdleTimerHandler=this._resetIdleTimer.bind(this),this.addEventListener("viewChange",this._resetIdleTimerHandler),this._triggerIdleTimerHandler=this._triggerIdleTimer.bind(this),this._idleTimer.addEventListener("timeout",this._triggerIdleTimerHandler),this._stopMovementHandler=this.stopMovement.bind(this),this._controls.addEventListener("active",this._stopMovementHandler),this.addEventListener("sceneChange",this._stopMovementHandler),this._idleMovement=null}function b(t,e,i){e.listLayers().forEach((function(e){e.mergeEffects({opacity:t})})),e._hotspotContainer.domElement().style.opacity=t}n(w),w.prototype.destroy=function(){for(var t in window.removeEventListener("resize",this._updateSizeListener),this._currentScene&&this._removeSceneEventListeners(this._currentScene),this._replacedScene&&this._removeSceneEventListeners(this._replacedScene),this._dragCursor.destroy(),this._controlMethods)this._controlMethods[t].destroy();for(;this._scenes.length;)this.destroyScene(this._scenes[0]);this._domElement.removeChild(this._stage.domElement()),this._stage.destroy(),this._renderLoop.destroy(),this._controls.destroy(),this._controls=null,this._cancelCurrentTween&&this._cancelCurrentTween(),M(this)},w.prototype.updateSize=function(){var t=this._size;t.width=this._domElement.clientWidth,t.height=this._domElement.clientHeight,this._stage.setSize(t)},w.prototype.stage=function(){return this._stage},w.prototype.renderLoop=function(){return this._renderLoop},w.prototype.controls=function(){return this._controls},w.prototype.domElement=function(){return this._domElement},w.prototype.createScene=function(t){t=t||{};var e=this.createEmptyScene({view:t.view});return e.createLayer({source:t.source,geometry:t.geometry,pinFirstLevel:t.pinFirstLevel,textureStoreOpts:t.textureStoreOpts,layerOpts:t.layerOpts}),e},w.prototype.createEmptyScene=function(t){var e=new a(this,(t=t||{}).view);return this._scenes.push(e),e},w.prototype._updateSceneLayers=function(){var t,e,i=this._stage,r=this._currentScene,n=this._replacedScene,s=i.listLayers(),o=[];if(n&&(o=o.concat(n.listLayers())),r&&(o=o.concat(r.listLayers())),1!==Math.abs(s.length-o.length))throw new Error("Stage and scene out of sync");if(o.length<s.length)for(t=0;t<s.length;t++)if(e=s[t],o.indexOf(e)<0){this._removeLayerFromStage(e);break}if(o.length>s.length)for(t=0;t<o.length;t++)e=o[t],s.indexOf(e)<0&&this._addLayerToStage(e,t)},w.prototype._addLayerToStage=function(t,e){t.pinFirstLevel(),this._stage.addLayer(t,e)},w.prototype._removeLayerFromStage=function(t){this._stage.removeLayer(t),t.unpinFirstLevel(),t.textureStore().clearNotPinned()},w.prototype._addSceneEventListeners=function(t){t.addEventListener("layerChange",this._layerChangeHandler),t.addEventListener("viewChange",this._viewChangeHandler)},w.prototype._removeSceneEventListeners=function(t){t.removeEventListener("layerChange",this._layerChangeHandler),t.removeEventListener("viewChange",this._viewChangeHandler)},w.prototype.destroyScene=function(t){var e,i,r=this._scenes.indexOf(t);if(r<0)throw new Error("No such scene in viewer");if(this._currentScene===t){for(this._removeSceneEventListeners(t),i=t.listLayers(),e=0;e<i.length;e++)this._removeLayerFromStage(i[e]);this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null),this._currentScene=null,this.emit("sceneChange")}if(this._replacedScene===t){for(this._removeSceneEventListeners(t),i=t.listLayers(),e=0;e<i.length;e++)this._removeLayerFromStage(i[e]);this._replacedScene=null}this._scenes.splice(r,1),t.destroy()},w.prototype.destroyAllScenes=function(){for(;this._scenes.length>0;)this.destroyScene(this._scenes[0])},w.prototype.hasScene=function(t){return this._scenes.indexOf(t)>=0},w.prototype.listScenes=function(){return[].concat(this._scenes)},w.prototype.scene=function(){return this._currentScene},w.prototype.view=function(){var t=this._currentScene;return t?t.view():null},w.prototype.lookTo=function(t,e,i){var r=this._currentScene;r&&r.lookTo(t,e,i)},w.prototype.startMovement=function(t,e){var i=this._currentScene;i&&i.startMovement(t,e)},w.prototype.stopMovement=function(){var t=this._currentScene;t&&t.stopMovement()},w.prototype.movement=function(){var t=this._currentScene;if(t)return t.movement()},w.prototype.setIdleMovement=function(t,e){this._idleTimer.setDuration(t),this._idleMovement=e},w.prototype.breakIdleMovement=function(){this.stopMovement(),this._resetIdleTimer()},w.prototype._resetIdleTimer=function(){this._idleTimer.start()},w.prototype._triggerIdleTimer=function(){var t=this._idleMovement;t&&this.startMovement(t)},w.prototype.switchScene=function(t,e,i){var r=this;e=e||{},i=i||g;var n=this._stage,s=this._currentScene;if(s!==t){if(this._scenes.indexOf(t)<0)throw new Error("No such scene in viewer");this._cancelCurrentTween&&(this._cancelCurrentTween(),this._cancelCurrentTween=null);var o=s?s.listLayers():[],a=t.listLayers(),h=n.listLayers();if(s&&(h.length!==o.length||h.length>1&&h[0]!=o[0]))throw new Error("Stage not in sync with viewer");for(var u=null!=e.transitionDuration?e.transitionDuration:1e3,c=null!=e.transitionUpdate?e.transitionUpdate:b,l=0;l<a.length;l++)this._addLayerToStage(a[l]);this._cancelCurrentTween=y(u,(function(e){c(e,t,s)}),(function(){if(r._replacedScene){r._removeSceneEventListeners(r._replacedScene),o=r._replacedScene.listLayers();for(var t=0;t<o.length;t++)r._removeLayerFromStage(o[t]);r._replacedScene=null}r._cancelCurrentTween=null,i()})),this._currentScene=t,this._replacedScene=s,this.emit("sceneChange"),this.emit("viewChange"),this._addSceneEventListeners(t)}else i()},t.exports=w},3909:(t,e,i)=>{"use strict";var r=i(3188),n=i(5003),s=i(5696),o=i(6112);function a(t){this.constructor.super_.call(this,t),this._timestamp=0}n(a,r),s(a),a.prototype.destroy=function(){o(this)},a.prototype.timestamp=function(){return this._timestamp},a.prototype.isDynamic=function(){return!0},a.prototype.markDirty=function(){this._timestamp++,this.emit("change")},t.exports=a},3188:(t,e,i)=>{"use strict";var r=i(5135),n=i(5696),s=i(6112),o={HTMLImageElement:["naturalWidth","naturalHeight"],HTMLCanvasElement:["width","height"],ImageBitmap:["width","height"]};function a(t){var e=!1;for(var i in o)if(r[i]&&t instanceof r[i]){e=!0,this._widthProp=o[i][0],this._heightProp=o[i][1];break}if(!e)throw new Error("Unsupported pixel source");this._element=t}n(a),a.prototype.destroy=function(){s(this)},a.prototype.element=function(){return this._element},a.prototype.width=function(){return this._element[this._widthProp]},a.prototype.height=function(){return this._element[this._heightProp]},a.prototype.timestamp=function(){return 0},a.prototype.isDynamic=function(){return!1},t.exports=a},4273:(t,e,i)=>{"use strict";var r=i(9821),n=.01,s={yawSpeed:.1,pitchSpeed:.1,fovSpeed:.1,yawAccel:n,pitchAccel:n,fovAccel:n,targetPitch:0,targetFov:null};t.exports=function(t){var e=(t=r(t||{},s)).yawSpeed,i=t.pitchSpeed,n=t.fovSpeed,o=t.yawAccel,a=t.pitchAccel,h=t.fovAccel,u=t.targetPitch,c=t.targetFov;return function(){var t,r,s,l,d=0,p=0,f=0,m=0,v=0,_=0,y=0;return function(g,M){if(t=(M-d)/1e3,v=Math.min(p+t*o,e),r=v*t,g.yaw=g.yaw+r,null!=u&&g.pitch!==u){var w=.5*f*f/a;_=Math.abs(u-g.pitch)>w?Math.min(f+t*a,i):Math.max(f-t*a,0),s=_*t,u<g.pitch&&(g.pitch=Math.max(u,g.pitch-s)),u>g.pitch&&(g.pitch=Math.min(u,g.pitch+s))}if(null!=c&&g.fov!==u){var b=.5*m*m/h;y=Math.abs(c-g.fov)>b?Math.min(m+t*h,n):Math.max(m-t*h,0),l=y*t,c<g.fov&&(g.fov=Math.max(c,g.fov-l)),c>g.fov&&(g.fov=Math.min(c,g.fov+l))}return d=M,p=v,f=_,m=y,g}}}},46:(t,e,i)=>{"use strict";var r=i(8001);function n(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruMap: invalid capacity");this._capacity=t,this._keys=new Array(this._capacity),this._values=new Array(this._capacity),this._start=0,this._size=0}n.prototype._index=function(t){return r(this._start+t,this._capacity)},n.prototype.get=function(t){for(var e=0;e<this._size;e++){var i=this._keys[this._index(e)];if(t.equals(i))return this._values[this._index(e)]}return null},n.prototype.set=function(t,e){if(0===this._capacity)return t;this.del(t);var i=this._size===this._capacity?this._keys[this._index(0)]:null;return this._keys[this._index(this._size)]=t,this._values[this._index(this._size)]=e,this._size<this._capacity?this._size++:this._start=this._index(1),i},n.prototype.del=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)])){for(var i=this._values[this._index(e)],r=e;r<this._size-1;r++)this._keys[this._index(r)]=this._keys[this._index(r+1)],this._values[this._index(r)]=this._values[this._index(r+1)];return this._size--,i}return null},n.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._keys[this._index(e)]))return!0;return!1},n.prototype.size=function(){return this._size},n.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._start=0,this._size=0},n.prototype.forEach=function(t){for(var e=0,i=0;i<this._size;i++)t(this._keys[this._index(i)],this._values[this._index(i)]),e+=1;return e},t.exports=n},5290:(t,e,i)=>{"use strict";var r=i(8001);function n(t){if(!isFinite(t)||Math.floor(t)!==t||t<0)throw new Error("LruSet: invalid capacity");this._capacity=t,this._elements=new Array(this._capacity),this._start=0,this._size=0}n.prototype._index=function(t){return r(this._start+t,this._capacity)},n.prototype.add=function(t){if(0===this._capacity)return t;this.remove(t);var e=this._size===this._capacity?this._elements[this._index(0)]:null;return this._elements[this._index(this._size)]=t,this._size<this._capacity?this._size++:this._start=this._index(1),e},n.prototype.remove=function(t){for(var e=0;e<this._size;e++){var i=this._elements[this._index(e)];if(t.equals(i)){for(var r=e;r<this._size-1;r++)this._elements[this._index(r)]=this._elements[this._index(r+1)];return this._size--,i}}return null},n.prototype.has=function(t){for(var e=0;e<this._size;e++)if(t.equals(this._elements[this._index(e)]))return!0;return!1},n.prototype.size=function(){return this._size},n.prototype.clear=function(){this._elements.length=0,this._start=0,this._size=0},n.prototype.forEach=function(t){for(var e=0,i=0;i<this._size;i++)t(this._elements[this._index(i)]),e+=1;return e},t.exports=n},3180:(t,e,i)=>{"use strict";var r=i(8001);function n(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Map: invalid capacity");this._capacity=t||64,this._keyBuckets=[],this._valBuckets=[];for(var e=0;e<this._capacity;e++)this._keyBuckets.push([]),this._valBuckets.push([]);this._size=0}n.prototype.get=function(t){for(var e=r(t.hash(),this._capacity),i=this._keyBuckets[e],n=0;n<i.length;n++){var s=i[n];if(t.equals(s))return this._valBuckets[e][n]}return null},n.prototype.set=function(t,e){for(var i=r(t.hash(),this._capacity),n=this._keyBuckets[i],s=this._valBuckets[i],o=0;o<n.length;o++){var a=n[o];if(t.equals(a)){var h=s[o];return n[o]=t,s[o]=e,h}}return n.push(t),s.push(e),this._size++,null},n.prototype.del=function(t){for(var e=r(t.hash(),this._capacity),i=this._keyBuckets[e],n=this._valBuckets[e],s=0;s<i.length;s++){var o=i[s];if(t.equals(o)){for(var a=n[s],h=s;h<i.length-1;h++)i[h]=i[h+1],n[h]=n[h+1];return i.length=i.length-1,n.length=n.length-1,this._size--,a}}return null},n.prototype.has=function(t){for(var e=r(t.hash(),this._capacity),i=this._keyBuckets[e],n=0;n<i.length;n++){var s=i[n];if(t.equals(s))return!0}return!1},n.prototype.size=function(){return this._size},n.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._keyBuckets[t].length=0,this._valBuckets[t].length=0;this._size=0},n.prototype.forEach=function(t){for(var e=0,i=0;i<this._capacity;i++)for(var r=this._keyBuckets[i],n=this._valBuckets[i],s=0;s<r.length;s++)t(r[s],n[s]),e+=1;return e},t.exports=n},5184:(t,e,i)=>{"use strict";var r=i(8001);function n(t){if(null!=t&&(!isFinite(t)||Math.floor(t)!==t||t<1))throw new Error("Set: invalid capacity");this._capacity=this._capacity||64,this._buckets=[];for(var e=0;e<this._capacity;e++)this._buckets.push([]);this._size=0}n.prototype.add=function(t){for(var e=r(t.hash(),this._capacity),i=this._buckets[e],n=0;n<i.length;n++){var s=i[n];if(t.equals(s))return i[n]=t,s}return i.push(t),this._size++,null},n.prototype.remove=function(t){for(var e=r(t.hash(),this._capacity),i=this._buckets[e],n=0;n<i.length;n++){var s=i[n];if(t.equals(s)){for(var o=n;o<i.length-1;o++)i[o]=i[o+1];return i.length=i.length-1,this._size--,s}}return null},n.prototype.has=function(t){for(var e=r(t.hash(),this._capacity),i=this._buckets[e],n=0;n<i.length;n++){var s=i[n];if(t.equals(s))return!0}return!1},n.prototype.size=function(){return this._size},n.prototype.clear=function(){for(var t=0;t<this._capacity;t++)this._buckets[t].length=0;this._size=0},n.prototype.forEach=function(t){for(var e=0,i=0;i<this._capacity;i++)for(var r=this._buckets[i],n=0;n<r.length;n++)t(r[n]),e+=1;return e},t.exports=n},2604:(t,e,i)=>{"use strict";var r=i(8585),n=i(8001);function s(t){this._concurrency=t&&t.concurrency||1,this._paused=t&&!!t.paused||!1,this._pool=[];for(var e=0;e<this._concurrency;e++)this._pool.push(new r(t));this._next=0}s.prototype.length=function(){for(var t=0,e=0;e<this._pool.length;e++)t+=this._pool[e].length();return t},s.prototype.push=function(t,e){var i=this._next,r=this._pool[i].push(t,e);return this._next=n(this._next+1,this._concurrency),r},s.prototype.pause=function(){if(!this._paused){this._paused=!0;for(var t=0;t<this._concurrency;t++)this._pool[t].pause()}},s.prototype.resume=function(){if(this._paused){this._paused=!1;for(var t=0;t<this._concurrency;t++)this._pool[t].resume()}},t.exports=s},8585:(t,e,i)=>{"use strict";var r=i(1227);function n(t,e){this.fn=t,this.cb=e,this.cfn=null}function s(t){this._queue=[],this._delay=t&&t.delay||0,this._paused=t&&!!t.paused||!1,this._currentTask=null,this._lastFinished=null}s.prototype.length=function(){return this._queue.length},s.prototype.push=function(t,e){var i=new n(t,e),r=this._cancel.bind(this,i);return this._queue.push(i),this._next(),r},s.prototype.pause=function(){this._paused||(this._paused=!0)},s.prototype.resume=function(){this._paused&&(this._paused=!1,this._next())},s.prototype._start=function(t){if(this._currentTask)throw new Error("WorkQueue: called start while running task");this._currentTask=t;var e=this._finish.bind(this,t);if(t.cfn=t.fn(e),"function"!=typeof t.cfn)throw new Error("WorkQueue: function is not cancellable")},s.prototype._finish=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask!==t)throw new Error("WorkQueue: called finish on wrong task");t.cb.apply(null,e),this._currentTask=null,this._lastFinished=r(),this._next()},s.prototype._cancel=function(t){var e=Array.prototype.slice.call(arguments,1);if(this._currentTask===t)t.cfn.apply(null,e);else{var i=this._queue.indexOf(t);i>=0&&(this._queue.splice(i,1),t.cb.apply(null,e))}},s.prototype._next=function(){if(!this._paused&&this._queue.length&&!this._currentTask){if(null!=this._lastFinished){var t=r()-this._lastFinished,e=this._delay-t;if(e>0)return void setTimeout(this._next.bind(this),e)}var i=this._queue.shift();this._start(i)}},t.exports=s},8842:(t,e,i)=>{"use strict";var r=i(887).vec4,n=i(887).mat4;function s(t,e,i){var n,s,o,a,h,u,c;n=i,s=t,o=e.colorMatrix,a=s[0],h=s[1],u=s[2],c=s[3],n[0]=o[0]*a+o[1]*h+o[2]*u+o[3]*c,n[1]=o[4]*a+o[5]*h+o[6]*u+o[7]*c,n[2]=o[8]*a+o[9]*h+o[10]*u+o[11]*c,n[3]=o[12]*a+o[13]*h+o[14]*u+o[15]*c,r.add(i,i,e.colorOffset)}var o=r.create();t.exports={identity:function(t){var e=t||{};return e.colorOffset=e.colorOffset||r.create(),e.colorMatrix=e.colorMatrix||n.create(),e},applyToPixel:s,applyToImageData:function(t,e){for(var i=t.width,n=t.height,a=t.data,h=0;h<i*n;h++)r.set(o,a[4*h+0]/255,a[4*h+1]/255,a[4*h+2]/255,a[4*h+3]/255),s(o,e,o),a[4*h+0]=255*o[0],a[4*h+1]=255*o[1],a[4*h+2]=255*o[2],a[4*h+3]=255*o[3]}}},6279:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(1227),o=i(6112);function a(t){t=t||{},this._methods=[],this._parameters=["x","y","axisScaledX","axisScaledY","zoom","yaw","pitch","roll"],this._now=t.nowForTesting||s,this._composedOffsets={},this._composeReturn={offsets:this._composedOffsets,changing:null}}r(a),a.prototype.add=function(t){if(!this.has(t)){var e={};this._parameters.forEach((function(t){e[t]={dynamics:new n,time:null}}));var i=this._updateDynamics.bind(this,e),r={instance:t,dynamics:e,parameterDynamicsHandler:i};t.addEventListener("parameterDynamics",i),this._methods.push(r)}},a.prototype.remove=function(t){var e=this._indexOfInstance(t);if(e>=0){var i=this._methods.splice(e,1)[0];i.instance.removeEventListener("parameterDynamics",i.parameterDynamicsHandler)}},a.prototype.has=function(t){return this._indexOfInstance(t)>=0},a.prototype._indexOfInstance=function(t){for(var e=0;e<this._methods.length;e++)if(this._methods[e].instance===t)return e;return-1},a.prototype.list=function(){for(var t=[],e=0;e<this._methods.length;e++)t.push(this._methods[e].instance);return t},a.prototype._updateDynamics=function(t,e,i){var r=t[e];if(!r)throw new Error("Unknown control parameter "+e);var n=this._now();r.dynamics.update(i,(n-r.time)/1e3),r.time=n,this.emit("change")},a.prototype._resetComposedOffsets=function(){for(var t=0;t<this._parameters.length;t++)this._composedOffsets[this._parameters[t]]=0},a.prototype.offsets=function(){var t,e=!1,i=this._now();this._resetComposedOffsets();for(var r=0;r<this._methods.length;r++)for(var n=this._methods[r].dynamics,s=0;s<this._parameters.length;s++){var o=n[t=this._parameters[s]],a=o.dynamics;null!=a.offset&&(this._composedOffsets[t]+=a.offset,a.offset=null);var h=(i-o.time)/1e3,u=a.offsetFromVelocity(h);u&&(this._composedOffsets[t]+=u);var c=a.velocityAfter(h);a.velocity=c,c&&(e=!0),o.time=i}return this._composeReturn.changing=e,this._composeReturn},a.prototype.destroy=function(){for(var t=this.list(),e=0;e<t.length;e++)this.remove(t[e]);o(this)},t.exports=a},2569:(t,e,i)=>{"use strict";var r=i(9821),n=i(6112),s={active:"move",inactive:"default",disabled:"default"};function o(t,e,i,n){n=r(n||{},s),this._element=i,this._controls=t,this._id=e,this._attached=!1,this._setActiveCursor=this._setCursor.bind(this,n.active),this._setInactiveCursor=this._setCursor.bind(this,n.inactive),this._setDisabledCursor=this._setCursor.bind(this,n.disabled),this._setOriginalCursor=this._setCursor.bind(this,this._element.style.cursor),this._updateAttachmentHandler=this._updateAttachment.bind(this),t.addEventListener("methodEnabled",this._updateAttachmentHandler),t.addEventListener("methodDisabled",this._updateAttachmentHandler),t.addEventListener("enabled",this._updateAttachmentHandler),t.addEventListener("disabled",this._updateAttachmentHandler),this._updateAttachment()}o.prototype.destroy=function(){this._detachFromControlMethod(this._controls.method(this._id)),this._setOriginalCursor(),this._controls.removeEventListener("methodEnabled",this._updateAttachmentHandler),this._controls.removeEventListener("methodDisabled",this._updateAttachmentHandler),this._controls.removeEventListener("enabled",this._updateAttachmentHandler),this._controls.removeEventListener("disabled",this._updateAttachmentHandler),n(this)},o.prototype._updateAttachment=function(){var t=this._controls,e=this._id;t.enabled()&&t.method(e).enabled?this._attachToControlMethod(t.method(e)):this._detachFromControlMethod(t.method(e))},o.prototype._attachToControlMethod=function(t){this._attached||(t.instance.addEventListener("active",this._setActiveCursor),t.instance.addEventListener("inactive",this._setInactiveCursor),t.active?this._setActiveCursor():this._setInactiveCursor(),this._attached=!0)},o.prototype._detachFromControlMethod=function(t){this._attached&&(t.instance.removeEventListener("active",this._setActiveCursor),t.instance.removeEventListener("inactive",this._setInactiveCursor),this._setDisabledCursor(),this._attached=!1)},o.prototype._setCursor=function(t){this._element.style.cursor=t},t.exports=o},1839:(t,e,i)=>{"use strict";var r=i(5696),n=i(6279),s=i(6112),o="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function a(t){t=t||{},this._methods={},this._methodGroups={},this._composer=new n,this._enabled=!t||!t.enabled||!!t.enabled,this._activeCount=0,this.updatedViews_=[],this._attachedRenderLoop=null}r(a),a.prototype.destroy=function(){this.detach(),this._composer.destroy(),s(this)},a.prototype.methods=function(){var t={};for(var e in this._methods)t[e]=this._methods[e];return t},a.prototype.method=function(t){return this._methods[t]},a.prototype.registerMethod=function(t,e,i){if(this._methods[t])throw new Error("Control method already registered with id "+t);this._methods[t]={instance:e,enabled:!1,active:!1,activeHandler:this._handleActive.bind(this,t),inactiveHandler:this._handleInactive.bind(this,t)},i&&this.enableMethod(t,e)},a.prototype.unregisterMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&this.disableMethod(t),delete this._methods[t]},a.prototype.enableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled||(e.enabled=!0,e.active&&this._incrementActiveCount(),this._listen(t),this._updateComposer(),this.emit("methodEnabled",t))},a.prototype.disableMethod=function(t){var e=this._methods[t];if(!e)throw new Error("No control method registered with id "+t);e.enabled&&(e.enabled=!1,e.active&&this._decrementActiveCount(),this._unlisten(t),this._updateComposer(),this.emit("methodDisabled",t))},a.prototype.addMethodGroup=function(t,e){this._methodGroups[t]=e},a.prototype.removeMethodGroup=function(t){delete this._methodGroups[t]},a.prototype.methodGroups=function(){var t={};for(var e in this._methodGroups)t[e]=this._methodGroups[e];return t},a.prototype.enableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach((function(t){e.enableMethod(t)}))},a.prototype.disableMethodGroup=function(t){var e=this;e._methodGroups[t].forEach((function(t){e.disableMethod(t)}))},a.prototype.enabled=function(){return this._enabled},a.prototype.enable=function(){this._enabled||(this._enabled=!0,this._activeCount>0&&this.emit("active"),this.emit("enabled"),this._updateComposer())},a.prototype.disable=function(){this._enabled&&(this._enabled=!1,this._activeCount>0&&this.emit("inactive"),this.emit("disabled"),this._updateComposer())},a.prototype.attach=function(t){this._attachedRenderLoop&&this.detach(),this._attachedRenderLoop=t,this._beforeRenderHandler=this._updateViewsWithControls.bind(this),this._changeHandler=t.renderOnNextFrame.bind(t),this._attachedRenderLoop.addEventListener("beforeRender",this._beforeRenderHandler),this._composer.addEventListener("change",this._changeHandler)},a.prototype.detach=function(){this._attachedRenderLoop&&(this._attachedRenderLoop.removeEventListener("beforeRender",this._beforeRenderHandler),this._composer.removeEventListener("change",this._changeHandler),this._beforeRenderHandler=null,this._changeHandler=null,this._attachedRenderLoop=null)},a.prototype.attached=function(){return null!=this._attachedRenderLoop},a.prototype._listen=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.addEventListener("active",e.activeHandler),e.instance.addEventListener("inactive",e.inactiveHandler)},a.prototype._unlisten=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");e.instance.removeEventListener("active",e.activeHandler),e.instance.removeEventListener("inactive",e.inactiveHandler)},a.prototype._handleActive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active||(e.active=!0,this._incrementActiveCount())},a.prototype._handleInactive=function(t){var e=this._methods[t];if(!e)throw new Error("Bad method id");if(!e.enabled)throw new Error("Should not receive event from disabled control method");e.active&&(e.active=!1,this._decrementActiveCount())},a.prototype._incrementActiveCount=function(){this._activeCount++,o&&this._checkActiveCount(),this._enabled&&1===this._activeCount&&this.emit("active")},a.prototype._decrementActiveCount=function(){this._activeCount--,o&&this._checkActiveCount(),this._enabled&&0===this._activeCount&&this.emit("inactive")},a.prototype._checkActiveCount=function(){var t=0;for(var e in this._methods){var i=this._methods[e];i.enabled&&i.active&&t++}if(t!=this._activeCount)throw new Error("Bad control state")},a.prototype._updateComposer=function(){var t=this._composer;for(var e in this._methods){var i=this._methods[e],r=this._enabled&&i.enabled;r&&!t.has(i.instance)&&t.add(i.instance),!r&&t.has(i.instance)&&t.remove(i.instance)}},a.prototype._updateViewsWithControls=function(){var t=this._composer.offsets();t.changing&&this._attachedRenderLoop.renderOnNextFrame(),this.updatedViews_.length=0;for(var e=this._attachedRenderLoop.stage().listLayers(),i=0;i<e.length;i++){var r=e[i].view();this.updatedViews_.indexOf(r)<0&&(e[i].view().updateWithControlParameters(t.offsets),this.updatedViews_.push(r))}},t.exports=a},9869:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(8975),o=i(9821),a=i(958).maxFriction,h=i(6112),u={friction:6,maxFrictionTime:.3},c="undefined"!=typeof MARZIPANODEBUG&&MARZIPANODEBUG.controls;function l(t,e,i){this._element=t,this._opts=o(i||{},u),this._startEvent=null,this._lastEvent=null,this._active=!1,this._dynamics={x:new n,y:new n},this._hammer=s.get(t,e),this._hammer.on("hammer.input",this._handleHammerEvent.bind(this)),this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleEnd.bind(this)),this._hammer.on("pancancel",this._handleEnd.bind(this))}r(l),l.prototype.destroy=function(){this._hammer.release(),h(this)},l.prototype._handleHammerEvent=function(t){if(t.isFirst){if(c&&this._active)throw new Error("DragControlMethod active detected when already active");this._active=!0,this.emit("active")}if(t.isFinal){if(c&&!this._active)throw new Error("DragControlMethod inactive detected when already inactive");this._active=!1,this.emit("inactive")}},l.prototype._handleStart=function(t){t.preventDefault(),this._startEvent=t},l.prototype._handleMove=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsMove(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y))},l.prototype._handleEnd=function(t){t.preventDefault(),this._startEvent&&(this._updateDynamicsRelease(t),this.emit("parameterDynamics","axisScaledX",this._dynamics.x),this.emit("parameterDynamics","axisScaledY",this._dynamics.y)),this._startEvent=!1,this._lastEvent=!1},l.prototype._updateDynamicsMove=function(t){var e=t.deltaX,i=t.deltaY,r=this._lastEvent||this._startEvent;r&&(e-=r.deltaX,i-=r.deltaY);var n=this._element.getBoundingClientRect();e/=n.right-n.left,i/=n.bottom-n.top,this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.offset=-e,this._dynamics.y.offset=-i,this._lastEvent=t};var d=[null,null];l.prototype._updateDynamicsRelease=function(t){var e=this._element.getBoundingClientRect(),i=e.right-e.left,r=e.bottom-e.top,n=1e3*t.velocityX/i,s=1e3*t.velocityY/r;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=n,this._dynamics.y.velocity=s,a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,d),this._dynamics.x.friction=d[0],this._dynamics.y.friction=d[1]},t.exports=l},4301:t=>{"use strict";function e(){this.velocity=null,this.friction=null,this.offset=null}e.equals=function(t,e){return t.velocity===e.velocity&&t.friction===e.friction&&t.offset===e.offset},e.prototype.equals=function(t){return e.equals(this,t)},e.prototype.update=function(t,e){t.offset&&(this.offset=this.offset||0,this.offset+=t.offset);var i=this.offsetFromVelocity(e);i&&(this.offset=this.offset||0,this.offset+=i),this.velocity=t.velocity,this.friction=t.friction},e.prototype.reset=function(){this.velocity=null,this.friction=null,this.offset=null},e.prototype.velocityAfter=function(t){return this.velocity?this.friction?(e=this.velocity,i=this.friction*t,e<0?Math.min(0,e+i):e>0?Math.max(0,e-i):0):this.velocity:null;var e,i},e.prototype.offsetFromVelocity=function(t){t=Math.min(t,this.nullVelocityTime());var e=this.velocityAfter(t);return(this.velocity+e)/2*t},e.prototype.nullVelocityTime=function(){return null==this.velocity?0:this.velocity&&!this.friction?1/0:Math.abs(this.velocity/this.friction)},t.exports=e},6067:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(6112);function o(t,e,i,r){if(!t)throw new Error("ElementPressControlMethod: element must be defined");if(!e)throw new Error("ElementPressControlMethod: parameter must be defined");if(!i)throw new Error("ElementPressControlMethod: velocity must be defined");if(!r)throw new Error("ElementPressControlMethod: friction must be defined");this._element=t,this._pressHandler=this._handlePress.bind(this),this._releaseHandler=this._handleRelease.bind(this),t.addEventListener("mousedown",this._pressHandler),t.addEventListener("mouseup",this._releaseHandler),t.addEventListener("mouseleave",this._releaseHandler),t.addEventListener("touchstart",this._pressHandler),t.addEventListener("touchmove",this._releaseHandler),t.addEventListener("touchend",this._releaseHandler),this._parameter=e,this._velocity=i,this._friction=r,this._dynamics=new n,this._pressing=!1}r(o),o.prototype.destroy=function(){this._element.removeEventListener("mousedown",this._pressHandler),this._element.removeEventListener("mouseup",this._releaseHandler),this._element.removeEventListener("mouseleave",this._releaseHandler),this._element.removeEventListener("touchstart",this._pressHandler),this._element.removeEventListener("touchmove",this._releaseHandler),this._element.removeEventListener("touchend",this._releaseHandler),s(this)},o.prototype._handlePress=function(){this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active")},o.prototype._handleRelease=function(){this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1},t.exports=o},8975:(t,e,i)=>{"use strict";var r=i(840),n=1,s="MarzipanoHammerElementId";function o(t,e){return t[s]||(t[s]=n++),e+t[s]}function a(){this._managers={},this._refCount={}}function h(t,e,i,r){this._manager=e,this._element=i,this._type=r,this._hammerGestures=t,this._eventHandlers=[]}a.prototype.get=function(t,e){var i=o(t,e);return this._managers[i]||(this._managers[i]=this._createManager(t,e),this._refCount[i]=0),this._refCount[i]++,new h(this,this._managers[i],t,e)},a.prototype._createManager=function(t,e){var i=new r.Manager(t);return"mouse"===e?i.add(new r.Pan({direction:r.DIRECTION_ALL,threshold:0})):"touch"!==e&&"pen"!==e&&"kinect"!==e||(i.add(new r.Pan({direction:r.DIRECTION_ALL,threshold:20,pointers:1})),i.add(new r.Pinch)),i},a.prototype._releaseHandle=function(t,e){var i=o(t,e);this._refCount[i]&&(this._refCount[i]--,this._refCount[i]||(this._managers[i].destroy(),delete this._managers[i],delete this._refCount[i]))},h.prototype.on=function(t,e){var i=this._type,r=function(t){i===t.pointerType&&e(t)};this._eventHandlers.push({events:t,handler:r}),this._manager.on(t,r)},h.prototype.release=function(){for(var t=0;t<this._eventHandlers.length;t++){var e=this._eventHandlers[t];this._manager.off(e.events,e.handler)}this._hammerGestures._releaseHandle(this._element,this._type),this._manager=null,this._element=null,this._type=null,this._hammerGestures=null},h.prototype.manager=function(){return this._manager},t.exports=new a},3939:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(6112);function o(t,e,i,r,s){if(!t)throw new Error("KeyControlMethod: keyCode must be defined");if(!e)throw new Error("KeyControlMethod: parameter must be defined");if(!i)throw new Error("KeyControlMethod: velocity must be defined");if(!r)throw new Error("KeyControlMethod: friction must be defined");s=s||document,this._keyCode=t,this._parameter=e,this._velocity=i,this._friction=r,this._element=s,this._keydownHandler=this._handlePress.bind(this),this._keyupHandler=this._handleRelease.bind(this),this._blurHandler=this._handleBlur.bind(this),this._element.addEventListener("keydown",this._keydownHandler),this._element.addEventListener("keyup",this._keyupHandler),window.addEventListener("blur",this._blurHandler),this._dynamics=new n,this._pressing=!1}r(o),o.prototype.destroy=function(){this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("keyup",this._keyupHandler),window.removeEventListener("blur",this._blurHandler),s(this)},o.prototype._handlePress=function(t){t.keyCode===this._keyCode&&(this._pressing=!0,this._dynamics.velocity=this._velocity,this._dynamics.friction=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("active"))},o.prototype._handleRelease=function(t){t.keyCode===this._keyCode&&(this._pressing&&(this._dynamics.friction=this._friction,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive")),this._pressing=!1)},o.prototype._handleBlur=function(){this._dynamics.velocity=0,this.emit("parameterDynamics",this._parameter,this._dynamics),this.emit("inactive"),this._pressing=!1},t.exports=o},425:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(8975),o=i(6112);function a(t,e,i){this._hammer=s.get(t,e),this._lastEvent=null,this._active=!1,this._dynamics=new n,this._hammer.on("pinchstart",this._handleStart.bind(this)),this._hammer.on("pinch",this._handleEvent.bind(this)),this._hammer.on("pinchend",this._handleEnd.bind(this)),this._hammer.on("pinchcancel",this._handleEnd.bind(this))}r(a),a.prototype.destroy=function(){this._hammer.release(),o(this)},a.prototype._handleStart=function(){this._active||(this._active=!0,this.emit("active"))},a.prototype._handleEnd=function(){this._lastEvent=null,this._active&&(this._active=!1,this.emit("inactive"))},a.prototype._handleEvent=function(t){var e=t.scale;this._lastEvent&&(e/=this._lastEvent.scale),this._dynamics.offset=-1*(e-1),this.emit("parameterDynamics","zoom",this._dynamics),this._lastEvent=t},t.exports=a},9203:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(8975),o=i(9821),a=i(958).maxFriction,h=i(6112),u={speed:8,friction:6,maxFrictionTime:.3};function c(t,e,i){this._element=t,this._opts=o(i||{},u),this._active=!1,this._hammer=s.get(t,e),this._dynamics={x:new n,y:new n},this._hammer.on("panstart",this._handleStart.bind(this)),this._hammer.on("panmove",this._handleMove.bind(this)),this._hammer.on("panend",this._handleRelease.bind(this)),this._hammer.on("pancancel",this._handleRelease.bind(this))}r(c),c.prototype.destroy=function(){this._hammer.release(),h(this)},c.prototype._handleStart=function(t){t.preventDefault(),this._active||(this._active=!0,this.emit("active"))},c.prototype._handleMove=function(t){t.preventDefault(),this._updateDynamics(t,!1)},c.prototype._handleRelease=function(t){t.preventDefault(),this._updateDynamics(t,!0),this._active&&(this._active=!1,this.emit("inactive"))};var l=[null,null];c.prototype._updateDynamics=function(t,e){var i=this._element.getBoundingClientRect(),r=i.right-i.left,n=i.bottom-i.top,s=Math.max(r,n),o=t.deltaX/s*this._opts.speed,h=t.deltaY/s*this._opts.speed;this._dynamics.x.reset(),this._dynamics.y.reset(),this._dynamics.x.velocity=o,this._dynamics.y.velocity=h,e&&(a(this._opts.friction,this._dynamics.x.velocity,this._dynamics.y.velocity,this._opts.maxFrictionTime,l),this._dynamics.x.friction=l[0],this._dynamics.y.friction=l[1]),this.emit("parameterDynamics","x",this._dynamics.x),this.emit("parameterDynamics","y",this._dynamics.y)},t.exports=c},9166:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(9821),o=i(6112),a={frictionTime:.2,zoomDelta:.001};function h(t,e){this._element=t,this._opts=s(e||{},a),this._dynamics=new n,this._eventList=[];var i=this._opts.frictionTime?this.withSmoothing:this.withoutSmoothing;this._wheelListener=i.bind(this),t.addEventListener("wheel",this._wheelListener)}function u(t){var e=1==t.deltaMode?20:1;return t.deltaY*e}r(h),h.prototype.destroy=function(){this._element.removeEventListener(this._wheelListener),o(this)},h.prototype.withoutSmoothing=function(t){this._dynamics.offset=u(t)*this._opts.zoomDelta,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},h.prototype.withSmoothing=function(t){var e=t.timeStamp;for(this._eventList.push(t);this._eventList[0].timeStamp<e-1e3*this._opts.frictionTime;)this._eventList.shift(0);for(var i=0,r=0;r<this._eventList.length;r++)i+=u(this._eventList[r])*this._opts.zoomDelta/this._opts.frictionTime;this._dynamics.velocity=i,this._dynamics.friction=Math.abs(i)/this._opts.frictionTime,this.emit("parameterDynamics","zoom",this._dynamics),t.preventDefault(),this.emit("active"),this.emit("inactive")},t.exports=h},8255:(t,e,i)=>{"use strict";var r=i(5696),n=i(4301),s=i(6112);function o(t){if(!t)throw new Error("VelocityControlMethod: parameter must be defined");this._parameter=t,this._dynamics=new n}r(o),o.prototype.destroy=function(){s(this)},o.prototype.setVelocity=function(t){this._dynamics.velocity=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},o.prototype.setFriction=function(t){this._dynamics.friction=t,this.emit("parameterDynamics",this._parameter,this._dynamics)},t.exports=o},7895:(t,e,i)=>{"use strict";var r=i(9821),n=i(9869),s=i(9203),o=i(9166),a=i(425),h=i(3939),u={mouseViewMode:"drag"};t.exports=function(t,e,i){i=r(i||{},u);var c={mouseViewDrag:new n(e,"mouse"),mouseViewQtvr:new s(e,"mouse"),touchView:new n(e,"touch"),pinch:new a(e,"touch"),leftArrowKey:new h(37,"x",-.7,3),rightArrowKey:new h(39,"x",.7,3),upArrowKey:new h(38,"y",-.7,3),downArrowKey:new h(40,"y",.7,3),plusKey:new h(107,"zoom",-.7,3),minusKey:new h(109,"zoom",.7,3),wKey:new h(87,"y",-.7,3),aKey:new h(65,"x",-.7,3),sKey:new h(83,"y",.7,3),dKey:new h(68,"x",.7,3),qKey:new h(81,"roll",.7,3),eKey:new h(69,"roll",-.7,3)};!1!==i.scrollZoom&&(c.scrollZoom=new o(e));var l={arrowKeys:["leftArrowKey","rightArrowKey","upArrowKey","downArrowKey"],plusMinusKeys:["plusKey","minusKey"],wasdKeys:["wKey","aKey","sKey","dKey"],qeKeys:["qKey","eKey"]},d=["scrollZoom","touchView","pinch"];switch(i.mouseViewMode){case"drag":d.push("mouseViewDrag");break;case"qtvr":d.push("mouseViewQtvr");break;default:throw new Error("Unknown mouse view mode: "+i.mouseViewMode)}for(var p in c){var f=c[p];t.registerMethod(p,f),d.indexOf(p)>=0&&t.enableMethod(p)}for(var m in l){var v=l[m];t.addMethodGroup(m,v)}return c}},958:t=>{"use strict";function e(t,e,i,r){var n=Math.atan(e/t);r[0]=i*Math.cos(n),r[1]=i*Math.sin(n)}t.exports={maxFriction:function(t,i,r,n,s){var o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));e(i,r,t=Math.max(t,o/n),s),s[0]=Math.abs(s[0]),s[1]=Math.abs(s[1])},changeVectorNorm:e}},9032:(t,e,i)=>{"use strict";var r=i(5003),n=i(6056),s=i(6085),o=i(46),a=i(2467),h=i(6762).makeLevelList,u=i(6762).makeSelectableLevelList,c=i(5342),l=i(7784),d=i(3969),p=i(887).vec3,f=i(887).vec4,m="fudlrb",v={f:{x:0,y:0},b:{x:0,y:Math.PI},l:{x:0,y:Math.PI/2},r:{x:0,y:-Math.PI/2},u:{x:Math.PI/2,y:0},d:{x:-Math.PI/2,y:0}},_=p.create();function y(t,e,i,r){e&&p.rotateZ(t,t,_,e),i&&p.rotateX(t,t,_,i),r&&p.rotateY(t,t,_,r)}for(var g={},M=0;M<m.length;M++){var w=m[M],b=v[w],x=p.fromValues(0,0,-1);y(x,0,b.x,b.y),g[w]=x}var E={f:["l","r","u","d"],b:["r","l","u","d"],l:["b","f","u","d"],r:["f","b","u","d"],u:["l","r","b","f"],d:["l","r","f","b"]},T=[[0,1],[1,0],[0,-1],[-1,0]];function L(t,e,i,r,n){this.face=t,this.x=e,this.y=i,this.z=r,this._geometry=n,this._level=n.levelList[r]}function S(t){if(this.constructor.super_.call(this,t),this._size=t.size,this._tileSize=t.tileSize,this._size%this._tileSize!=0)throw new Error("Level size is not multiple of tile size: "+this._size+" "+this._tileSize)}function C(t){if("array"!==d(t))throw new Error("Level list must be an array");this.levelList=h(t,S),this.selectableLevelList=u(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new s(this),this._neighborsCache=new o(64),this._vec=f.create(),this._viewSize={}}L.prototype.rotX=function(){return v[this.face].x},L.prototype.rotY=function(){return v[this.face].y},L.prototype.centerX=function(){return(this.x+.5)/this._level.numHorizontalTiles()-.5},L.prototype.centerY=function(){return.5-(this.y+.5)/this._level.numVerticalTiles()},L.prototype.scaleX=function(){return 1/this._level.numHorizontalTiles()},L.prototype.scaleY=function(){return 1/this._level.numVerticalTiles()},L.prototype.vertices=function(t){t||(t=[p.create(),p.create(),p.create(),p.create()]);var e=v[this.face];function i(t,i,r){p.set(t,i,r,-.5),y(t,0,e.x,e.y)}var r=this.centerX()-this.scaleX()/2,n=this.centerX()+this.scaleX()/2,s=this.centerY()-this.scaleY()/2,o=this.centerY()+this.scaleY()/2;return i(t[0],r,o),i(t[1],n,o),i(t[2],n,s),i(t[3],r,s),t},L.prototype.parent=function(){if(0===this.z)return null;var t=this.face,e=this.z,i=this.x,r=this.y,n=this._geometry,s=n.levelList[e],o=n.levelList[e-1];return new L(t,Math.floor(i/s.numHorizontalTiles()*o.numHorizontalTiles()),Math.floor(r/s.numVerticalTiles()*o.numVerticalTiles()),e-1,n)},L.prototype.children=function(t){if(this.z===this._geometry.levelList.length-1)return null;var e=this.face,i=this.z,r=this.x,n=this.y,s=this._geometry,o=s.levelList[i],a=s.levelList[i+1],h=a.numHorizontalTiles()/o.numHorizontalTiles(),u=a.numVerticalTiles()/o.numVerticalTiles();t=t||[];for(var c=0;c<h;c++)for(var l=0;l<u;l++){var d=h*r+c,p=u*n+l,f=i+1;t.push(new L(e,d,p,f,s))}return t},L.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,i=e.get(this);if(i)return i;for(var r=t._vec,n=this.face,s=this.x,o=this.y,a=this.z,h=this._level,u=h.numHorizontalTiles(),l=h.numVerticalTiles(),d=[],f=0;f<T.length;f++){var m=s+T[f][0],_=o+T[f][1],g=a,M=n;if(m<0||m>=u||_<0||_>=l){var w,b=this.centerX(),x=this.centerY();m<0?(p.set(r,-.5,x,-.5),M=E[n][0]):m>=u?(p.set(r,.5,x,-.5),M=E[n][1]):_<0?(p.set(r,b,.5,-.5),M=E[n][2]):_>=l&&(p.set(r,b,-.5,-.5),M=E[n][3]),y(r,0,(w=v[n]).x,w.y),y(r,0,-(w=v[M]).x,-w.y),m=c(Math.floor((.5+r[0])*u),0,u-1),_=c(Math.floor((.5-r[1])*l),0,l-1)}d.push(new L(M,m,_,g,t))}return e.set(this,d),d},L.prototype.hash=function(){return n(m.indexOf(this.face),this.z,this.y,this.x)},L.prototype.equals=function(t){return this._geometry===t._geometry&&this.face===t.face&&this.z===t.z&&this.y===t.y&&this.x===t.x},L.prototype.cmp=function(t){return l(this.z,t.z)||l(m.indexOf(this.face),m.indexOf(t.face))||l(this.y,t.y)||l(this.x,t.x)},L.prototype.str=function(){return"CubeTile("+tile.face+", "+tile.x+", "+tile.y+", "+tile.z+")"},r(S,a),S.prototype.width=function(){return this._size},S.prototype.height=function(){return this._size},S.prototype.tileWidth=function(){return this._tileSize},S.prototype.tileHeight=function(){return this._tileSize},S.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),r=this.tileWidth(),n=this.tileHeight(),s=this.numHorizontalTiles(),o=this.numVerticalTiles(),a=t.width(),h=t.height(),u=t.tileWidth(),c=t.tileHeight(),l=t.numHorizontalTiles(),d=t.numVerticalTiles();if(e%a!=0)throw new Error("Level width must be multiple of parent level: "+e+" vs. "+a);if(i%h!=0)throw new Error("Level height must be multiple of parent level: "+i+" vs. "+h);if(s%l!=0)throw new Error("Number of horizontal tiles must be multiple of parent level: "+s+" ("+e+"/"+r+") vs. "+l+" ("+a+"/"+u+")");if(o%d!=0)throw new Error("Number of vertical tiles must be multiple of parent level: "+o+" ("+i+"/"+n+") vs. "+d+" ("+h+"/"+c+")")},C.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},C.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,n=t.numVerticalTiles()-1;e=e||[];for(var s=0;s<m.length;s++)for(var o=m[s],a=0;a<=r;a++)for(var h=0;h<=n;h++)e.push(new L(o,a,h,i,this));return e},C.prototype._closestTile=function(t,e){var i=this._vec;f.set(i,0,0,1,1),f.transformMat4(i,i,t.inverseProjection());var r=1/0,n=null;for(var s in g){var o=g[s],a=1-p.dot(o,i);a<r&&(r=a,n=s)}for(var h=Math.max(Math.abs(i[0]),Math.abs(i[1]),Math.abs(i[2]))/.5,u=0;u<3;u++)i[u]=i[u]/h;var l=v[n];y(i,0,-l.x,-l.y);var d=this.levelList.indexOf(e),m=e.numHorizontalTiles(),_=e.numVerticalTiles();return new L(n,c(Math.floor((.5+i[0])*m),0,m-1),c(Math.floor((.5-i[1])*_),0,_-1),d,this)},C.prototype.visibleTiles=function(t,e,i){var r=this._viewSize,n=this._tileSearcher;if(i=i||[],t.size(r),0===r.width||0===r.height)return i;var s=this._closestTile(t,e);if(!n.search(t,s,i))throw new Error("Starting tile is not visible");return i},C.Tile=C.prototype.Tile=L,C.type=C.prototype.type="cube",L.type=L.prototype.type="cube",t.exports=C},8988:(t,e,i)=>{"use strict";var r=i(5003),n=i(6056),s=i(7784),o=i(6762),a=i(2467),h=i(3969);function u(t,e){this.z=t,this._geometry=e,this._level=e.levelList[t]}function c(t){this.constructor.super_.call(this,t),this._width=t.width}function l(t){if("array"!==h(t))throw new Error("Level list must be an array");this.levelList=o.makeLevelList(t,c),this.selectableLevelList=o.makeSelectableLevelList(this.levelList)}u.prototype.rotX=function(){return 0},u.prototype.rotY=function(){return 0},u.prototype.centerX=function(){return.5},u.prototype.centerY=function(){return.5},u.prototype.scaleX=function(){return 1},u.prototype.scaleY=function(){return 1},u.prototype.parent=function(){return 0===this.z?null:new u(this.z-1,this._geometry)},u.prototype.children=function(t){return this.z===this._geometry.levelList.length-1?null:((t=t||[]).push(new u(this.z+1,this._geometry)),t)},u.prototype.neighbors=function(){return[]},u.prototype.hash=function(){return n(this.z)},u.prototype.equals=function(t){return this._geometry===t._geometry&&this.z===t.z},u.prototype.cmp=function(t){return s(this.z,t.z)},u.prototype.str=function(){return"EquirectTile("+tile.z+")"},r(c,a),c.prototype.width=function(){return this._width},c.prototype.height=function(){return this._width/2},c.prototype.tileWidth=function(){return this._width},c.prototype.tileHeight=function(){return this._width/2},l.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},l.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t);return(e=e||[]).push(new u(i,this)),e},l.prototype.visibleTiles=function(t,e,i){var r=new u(this.levelList.indexOf(e),this);(i=i||[]).length=0,i.push(r)},l.Tile=l.prototype.Tile=u,l.type=l.prototype.type="equirect",u.type=u.prototype.type="equirect",t.exports=l},754:(t,e,i)=>{"use strict";var r=i(5003),n=i(6056),s=i(6085),o=i(46),a=i(2467),h=i(6762).makeLevelList,u=i(6762).makeSelectableLevelList,c=i(5342),l=i(8001),d=i(7784),p=i(3969),f=i(887).vec2,m=i(887).vec4,v=[[0,1],[1,0],[0,-1],[-1,0]];function _(t,e,i,r){this.x=t,this.y=e,this.z=i,this._geometry=r,this._level=r.levelList[i]}function y(t){this.constructor.super_.call(this,t),this._width=t.width,this._height=t.height,this._tileWidth=t.tileWidth,this._tileHeight=t.tileHeight}function g(t){if("array"!==p(t))throw new Error("Level list must be an array");this.levelList=h(t,y),this.selectableLevelList=u(this.levelList);for(var e=1;e<this.levelList.length;e++)this.levelList[e]._validateWithParentLevel(this.levelList[e-1]);this._tileSearcher=new s(this),this._neighborsCache=new o(64),this._vec=m.create(),this._viewSize={}}_.prototype.rotX=function(){return 0},_.prototype.rotY=function(){return 0},_.prototype.centerX=function(){var t=this._level.width(),e=this._level.tileWidth();return(this.x*e+.5*this.width())/t-.5},_.prototype.centerY=function(){var t=this._level.height(),e=this._level.tileHeight();return.5-(this.y*e+.5*this.height())/t},_.prototype.scaleX=function(){var t=this._level.width();return this.width()/t},_.prototype.scaleY=function(){var t=this._level.height();return this.height()/t},_.prototype.width=function(){var t=this._level.width(),e=this._level.tileWidth();return this.x===this._level.numHorizontalTiles()-1&&l(t,e)||e},_.prototype.height=function(){var t=this._level.height(),e=this._level.tileHeight();return this.y===this._level.numVerticalTiles()-1&&l(t,e)||e},_.prototype.levelWidth=function(){return this._level.width()},_.prototype.levelHeight=function(){return this._level.height()},_.prototype.vertices=function(t){t||(t=[f.create(),f.create(),f.create(),f.create()]);var e=this.centerX()-this.scaleX()/2,i=this.centerX()+this.scaleX()/2,r=this.centerY()-this.scaleY()/2,n=this.centerY()+this.scaleY()/2;return f.set(t[0],e,n),f.set(t[1],i,n),f.set(t[2],i,r),f.set(t[3],e,r),t},_.prototype.parent=function(){if(0===this.z)return null;var t=this._geometry,e=this.z-1;return new _(Math.floor(this.x/2),Math.floor(this.y/2),e,t)},_.prototype.children=function(t){if(this.z===this._geometry.levelList.length-1)return null;var e=this._geometry,i=this.z+1;return(t=t||[]).push(new _(2*this.x,2*this.y,i,e)),t.push(new _(2*this.x,2*this.y+1,i,e)),t.push(new _(2*this.x+1,2*this.y,i,e)),t.push(new _(2*this.x+1,2*this.y+1,i,e)),t},_.prototype.neighbors=function(){var t=this._geometry,e=t._neighborsCache,i=e.get(this);if(i)return i;for(var r=this.x,n=this.y,s=this.z,o=this._level,a=o.numHorizontalTiles()-1,h=o.numVerticalTiles()-1,u=[],c=0;c<v.length;c++){var l=r+v[c][0],d=n+v[c][1],p=s;0<=l&&l<=a&&0<=d&&d<=h&&u.push(new _(l,d,p,t))}return e.set(this,u),u},_.prototype.hash=function(){return n(this.z,this.y,this.x)},_.prototype.equals=function(t){return this._geometry===t._geometry&&this.z===t.z&&this.y===t.y&&this.x===t.x},_.prototype.cmp=function(t){return d(this.z,t.z)||d(this.y,t.y)||d(this.x,t.x)},_.prototype.str=function(){return"FlatTile("+tile.x+", "+tile.y+", "+tile.z+")"},r(y,a),y.prototype.width=function(){return this._width},y.prototype.height=function(){return this._height},y.prototype.tileWidth=function(){return this._tileWidth},y.prototype.tileHeight=function(){return this._tileHeight},y.prototype._validateWithParentLevel=function(t){var e=this.width(),i=this.height(),r=this.tileWidth(),n=this.tileHeight(),s=t.width(),o=t.height(),a=t.tileWidth(),h=t.tileHeight();return e%s!=0?new Error("Level width must be multiple of parent level: "+e+" vs. "+s):i%o!=0?new Error("Level height must be multiple of parent level: "+i+" vs. "+o):r%a!=0?new Error("Level tile width must be multiple of parent level: "+r+" vs. "+a):n%h!=0?new Error("Level tile height must be multiple of parent level: "+n+" vs. "+h):void 0},g.prototype.maxTileSize=function(){for(var t=0,e=0;e<this.levelList.length;e++){var i=this.levelList[e];t=Math.max(t,i.tileWidth,i.tileHeight)}return t},g.prototype.levelTiles=function(t,e){var i=this.levelList.indexOf(t),r=t.numHorizontalTiles()-1,n=t.numVerticalTiles()-1;e||(e=[]);for(var s=0;s<=r;s++)for(var o=0;o<=n;o++)e.push(new _(s,o,i,this));return e},g.prototype._closestTile=function(t,e){var i=this._vec;m.set(i,0,0,1,1),m.transformMat4(i,i,t.inverseProjection());var r=.5+i[0],n=.5-i[1],s=this.levelList.indexOf(e),o=e.width(),a=e.height(),h=e.tileWidth(),u=e.tileHeight(),l=e.numHorizontalTiles(),d=e.numVerticalTiles();return new _(c(Math.floor(r*o/h),0,l-1),c(Math.floor(n*a/u),0,d-1),s,this)},g.prototype.visibleTiles=function(t,e,i){var r=this._viewSize,n=this._tileSearcher;if(i=i||[],t.size(r),0===r.width||0===r.height)return i;var s=this._closestTile(t,e);if(!n.search(t,s,i))throw new Error("Starting tile is not visible");return i},g.Tile=g.prototype.Tile=_,g.type=g.prototype.type="flat",_.type=_.prototype.type="flat",t.exports=g},2467:t=>{"use strict";function e(t){this._fallbackOnly=!!t.fallbackOnly}e.prototype.numHorizontalTiles=function(){return Math.ceil(this.width()/this.tileWidth())},e.prototype.numVerticalTiles=function(){return Math.ceil(this.height()/this.tileHeight())},e.prototype.fallbackOnly=function(){return this._fallbackOnly},t.exports=e},6762:(t,e,i)=>{"use strict";var r=i(7784);t.exports={makeLevelList:function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(new e(t[n]));return i.sort((function(t,e){return r(t.width(),e.width())})),i},makeSelectableLevelList:function(t){for(var e=[],i=0;i<t.length;i++)t[i]._fallbackOnly||e.push(t[i]);if(!e.length)throw new Error("No selectable levels in list");return e}}},5982:(t,e,i)=>{"use strict";t.exports={WebGlStage:i(5662),WebGlCubeRenderer:i(4641),WebGlFlatRenderer:i(591),WebGlEquirectRenderer:i(9999),registerDefaultRenderers:i(1505),CubeGeometry:i(9032),FlatGeometry:i(754),EquirectGeometry:i(8988),RectilinearView:i(3070),FlatView:i(8793),ImageUrlSource:i(6105),SingleAssetSource:i(541),StaticAsset:i(3188),DynamicAsset:i(3909),TextureStore:i(7559),Layer:i(4221),RenderLoop:i(3036),KeyControlMethod:i(3939),DragControlMethod:i(9869),QtvrControlMethod:i(9203),ScrollZoomControlMethod:i(9166),PinchZoomControlMethod:i(425),VelocityControlMethod:i(8255),ElementPressControlMethod:i(6067),Controls:i(1839),Dynamics:i(4301),Viewer:i(7599),Scene:i(5214),Hotspot:i(1154),HotspotContainer:i(3561),colorEffects:i(8842),registerDefaultControls:i(7895),autorotate:i(4273),util:{async:i(8667),cancelize:i(610),chain:i(8111),clamp:i(5342),clearOwnProperties:i(6112),cmp:i(7784),compose:i(6414),convertFov:i(1745),decimal:i(4743),defaults:i(9821),defer:i(3522),degToRad:i(6389),delay:i(9300),dom:i(6939),extend:i(8804),hash:i(6056),inherits:i(5003),mod:i(8001),noop:i(3120),now:i(1227),once:i(827),pixelRatio:i(2468),radToDeg:i(910),real:i(6467),retry:i(2582),tween:i(5026),type:i(3969)},dependencies:{bowser:i(1206),glMatrix:i(887),eventEmitter:i(5696),hammerjs:i(840)}}},1317:(t,e,i)=>{"use strict";var r=i(3188),n=i(3344),s=i(5135),o=i(827),a={imageOrientation:"flipY",premultiplyAlpha:"premultiply",resizeQuality:"high"};function h(t){this._stage=t}h.prototype.loadImage=function(t,e,i){var r=this,n=new Image;n.crossOrigin="anonymous";var s=e&&e.x||0,a=e&&e.y||0,h=e&&e.width||1,u=e&&e.height||1;return i=o(i),n.onload=function(){r._handleLoad(n,s,a,h,u,i)},n.onerror=function(){r._handleError(t,i)},n.src=t,function(){n.onload=n.onerror=null,n.src="",i.apply(null,arguments)}},h.prototype._handleLoad=function(t,e,i,n,o,h){if(0!==e||0!==i||1!==n||1!==o)if(e*=t.naturalWidth,i*=t.naturalHeight,n*=t.naturalWidth,o*=t.naturalHeight,s.createImageBitmap)s.createImageBitmap(t,e,i,n,o,a).then((function(t){h(null,new r(t))}));else{var u=document.createElement("canvas");u.width=n,u.height=o,u.getContext("2d").drawImage(t,e,i,n,o,0,0,n,o),h(null,new r(u))}else h(null,new r(t))},h.prototype._handleError=function(t,e){e(new n("Network error: "+t))},t.exports=h},4586:(t,e,i)=>{"use strict";var r=i(887).mat4,n=i(887).vec3,s=i(6112),o=i(8074),a=o.createConstantBuffers,h=o.destroyConstantBuffers,u=o.createShaderProgram,c=o.destroyShaderProgram,l=o.enableAttributes,d=o.disableAttributes,p=o.setViewport,f=o.setupPixelEffectUniforms,m=o.setDepth,v=o.setTexture,_=i(3846),y=i(2827),g=[0,1,2,0,2,3],M=[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],w=[0,0,1,0,1,1,0,1],b=["aVertexPosition","aTextureCoord"],x=["uDepth","uOpacity","uSampler","uProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix"];function E(t){this.gl=t,this.projMatrix=r.create(),this.viewportMatrix=r.create(),this.translateVector=n.create(),this.scaleVector=n.create(),this.constantBuffers=a(t,g,M,w),this.shaderProgram=u(t,_,y,b,x)}E.prototype.destroy=function(){h(this.gl,this.constantBuffers),c(this.gl,this.shaderProgram),s(this)},E.prototype.startLayer=function(t,e){var i=this.gl,r=this.shaderProgram,n=this.constantBuffers,s=this.viewportMatrix;i.useProgram(r),l(i,r),p(i,t,e,s),i.uniformMatrix4fv(r.uViewportMatrix,!1,s),i.bindBuffer(i.ARRAY_BUFFER,n.vertexPositions),i.vertexAttribPointer(r.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,n.textureCoords),i.vertexAttribPointer(r.aTextureCoord,2,i.FLOAT,i.FALSE,0,0),f(i,t.effects(),{opacity:r.uOpacity,colorOffset:r.uColorOffset,colorMatrix:r.uColorMatrix})},E.prototype.endLayer=function(t,e){var i=this.gl,r=this.shaderProgram;d(i,r)},E.prototype.renderTile=function(t,e,i,n){var s=this.gl,o=this.shaderProgram,a=this.constantBuffers,h=this.projMatrix,u=this.translateVector,c=this.scaleVector;u[0]=t.centerX(),u[1]=t.centerY(),u[2]=-.5,c[0]=t.scaleX(),c[1]=t.scaleY(),c[2]=1,r.copy(h,i.view().projection()),r.rotateX(h,h,t.rotX()),r.rotateY(h,h,t.rotY()),r.translate(h,h,u),r.scale(h,h,c),s.uniformMatrix4fv(o.uProjMatrix,!1,h),m(s,o,n,t.z),v(s,o,e),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,a.vertexIndices),s.drawElements(s.TRIANGLES,g.length,s.UNSIGNED_SHORT,0)},t.exports=E},8074:(t,e,i)=>{"use strict";var r=i(5342),n=i(887).vec4,s=i(887).vec3,o=i(887).mat4;function a(t,e,i){var r=t.createShader(e);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw t.getShaderInfoLog(r);return r}function h(t,e,i,r){var n=t.createBuffer();return t.bindBuffer(e,n),t.bufferData(e,r,i),n}var u=n.create(),c=o.create();o.identity(c);var l=s.create(),d=s.create();t.exports={createShaderProgram:function(t,e,i,r,n){var s=a(t,t.VERTEX_SHADER,e),o=a(t,t.FRAGMENT_SHADER,i),h=t.createProgram();if(t.attachShader(h,s),t.attachShader(h,o),t.linkProgram(h),!t.getProgramParameter(h,t.LINK_STATUS))throw t.getProgramInfoLog(h);for(var u=0;u<r.length;u++){var c=r[u];if(h[c]=t.getAttribLocation(h,c),-1===h[c])throw new Error("Shader program has no "+c+" attribute")}for(var l=0;l<n.length;l++){var d=n[l];if(h[d]=t.getUniformLocation(h,d),-1===h[d])throw new Error("Shader program has no "+d+" uniform")}return h},destroyShaderProgram:function(t,e){for(var i=t.getAttachedShaders(e),r=0;r<i.length;r++){var n=i[r];t.detachShader(e,n),t.deleteShader(n)}t.deleteProgram(e)},createConstantBuffers:function(t,e,i,r){return{vertexIndices:h(t,t.ELEMENT_ARRAY_BUFFER,t.STATIC_DRAW,new Uint16Array(e)),vertexPositions:h(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(i)),textureCoords:h(t,t.ARRAY_BUFFER,t.STATIC_DRAW,new Float32Array(r))}},destroyConstantBuffers:function(t,e){t.deleteBuffer(e.vertexIndices),t.deleteBuffer(e.vertexPositions),t.deleteBuffer(e.textureCoords)},enableAttributes:function(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<i;r++)t.enableVertexAttribArray(r)},disableAttributes:function(t,e){for(var i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),r=0;r<i;r++)t.disableVertexAttribArray(r)},setTexture:function(t,e,i){t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i._texture),t.uniform1i(e.uSampler,0)},setDepth:function(t,e,i,r){var n=(256*(i+1)-r)/65536;t.uniform1f(e.uDepth,n)},setViewport:function(t,e,i,n){if(0===i.x&&1===i.width&&0===i.y&&1===i.height)return t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),void o.identity(n);var a=i.x,h=r(a,0,1),u=h-a,c=1-h,p=r(i.width-u,0,c),f=i.width-p,m=1-i.height-i.y,v=r(m,0,1),_=v-m,y=1-v,g=r(i.height-_,0,y),M=i.height-g;s.set(d,i.width/p,i.height/g,1),s.set(l,(f-u)/p,(M-_)/g,0),o.identity(n),o.translate(n,n,l),o.scale(n,n,d),t.viewport(t.drawingBufferWidth*h,t.drawingBufferHeight*v,t.drawingBufferWidth*p,t.drawingBufferHeight*g)},setupPixelEffectUniforms:function(t,e,i){var r=1;e&&null!=e.opacity&&(r=e.opacity),t.uniform1f(i.opacity,r);var n=u;e&&e.colorOffset&&(n=e.colorOffset),t.uniform4fv(i.colorOffset,n);var s=c;e&&e.colorMatrix&&(s=e.colorMatrix),t.uniformMatrix4fv(i.colorMatrix,!1,s)}}},4641:(t,e,i)=>{"use strict";var r=i(4586);function n(){this.constructor.super_.apply(this,arguments)}i(5003)(n,r),t.exports=n},9999:(t,e,i)=>{"use strict";var r=i(887).mat4,n=i(6112),s=i(8074),o=s.createConstantBuffers,a=s.destroyConstantBuffers,h=s.createShaderProgram,u=s.destroyShaderProgram,c=s.enableAttributes,l=s.disableAttributes,d=s.setViewport,p=s.setupPixelEffectUniforms,f=s.setDepth,m=s.setTexture,v=i(453),_=i(8738),y=[0,1,2,0,2,3],g=[-1,-1,0,1,-1,0,1,1,0,-1,1,0],M=[0,0,1,0,1,1,0,1],w=["aVertexPosition"],b=["uDepth","uOpacity","uSampler","uInvProjMatrix","uViewportMatrix","uColorOffset","uColorMatrix","uTextureX","uTextureY","uTextureWidth","uTextureHeight"];function x(t){this.gl=t,this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.constantBuffers=o(t,y,g,M),this.shaderProgram=h(t,v,_,w,b)}x.prototype.destroy=function(){a(this.gl,this.constantBuffers),u(this.gl,this.shaderProgram),n(this)},x.prototype.startLayer=function(t,e){var i=this.gl,n=this.shaderProgram,s=this.constantBuffers,o=this.invProjMatrix,a=this.viewportMatrix;i.useProgram(n),c(i,n),d(i,t,e,a),i.uniformMatrix4fv(n.uViewportMatrix,!1,a),i.bindBuffer(i.ARRAY_BUFFER,s.vertexPositions),i.vertexAttribPointer(n.aVertexPosition,3,i.FLOAT,i.FALSE,0,0),i.bindBuffer(i.ARRAY_BUFFER,s.textureCoords),r.copy(o,t.view().projection()),r.invert(o,o),i.uniformMatrix4fv(n.uInvProjMatrix,!1,o);var h=t.effects().textureCrop||{},u=null!=h.x?h.x:0,l=null!=h.y?h.y:0,f=null!=h.width?h.width:1,m=null!=h.height?h.height:1;i.uniform1f(n.uTextureX,u),i.uniform1f(n.uTextureY,l),i.uniform1f(n.uTextureWidth,f),i.uniform1f(n.uTextureHeight,m),p(i,t.effects(),{opacity:n.uOpacity,colorOffset:n.uColorOffset,colorMatrix:n.uColorMatrix})},x.prototype.endLayer=function(t,e){var i=this.gl,r=this.shaderProgram;l(i,r)},x.prototype.renderTile=function(t,e,i,r){var n=this.gl,s=this.shaderProgram,o=this.constantBuffers;f(n,s,r,t.z),m(n,s,e),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o.vertexIndices),n.drawElements(n.TRIANGLES,y.length,n.UNSIGNED_SHORT,0)},t.exports=x},591:(t,e,i)=>{"use strict";var r=i(4586);function n(){this.constructor.super_.apply(this,arguments)}i(5003)(n,r),t.exports=n},1505:(t,e,i)=>{"use strict";var r=i(4641),n=i(591),s=i(9999);t.exports=function(t){switch(t.type){case"webgl":t.registerRenderer("flat","flat",n),t.registerRenderer("cube","rectilinear",r),t.registerRenderer("equirect","rectilinear",s);break;default:throw new Error("Unknown stage type: "+t.type)}}},8738:t=>{"use strict";t.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform float uTextureX;","uniform float uTextureY;","uniform float uTextureWidth;","uniform float uTextureHeight;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec4 vRay;","const float PI = 3.14159265358979323846264;","void main(void) {","  float r = inversesqrt(vRay.x * vRay.x + vRay.y * vRay.y + vRay.z * vRay.z);","  float phi  = acos(vRay.y * r);","  float theta = atan(vRay.x, -1.0*vRay.z);","  float s = 0.5 + 0.5 * theta / PI;","  float t = 1.0 - phi / PI;","  s = s * uTextureWidth + uTextureX;","  t = t * uTextureHeight + uTextureY;","  vec4 color = texture2D(uSampler, vec2(s, t)) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},2827:t=>{"use strict";t.exports=["#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uSampler;","uniform float uOpacity;","uniform vec4 uColorOffset;","uniform mat4 uColorMatrix;","varying vec2 vTextureCoord;","void main(void) {","  vec4 color = texture2D(uSampler, vTextureCoord) * uColorMatrix + uColorOffset;","  gl_FragColor = vec4(color.rgba * uOpacity);","}"].join("\n")},453:t=>{"use strict";t.exports=["attribute vec3 aVertexPosition;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uInvProjMatrix;","varying vec4 vRay;","void main(void) {","  vRay = uInvProjMatrix * vec4(aVertexPosition.xy, 1.0, 1.0);","  gl_Position = uViewportMatrix * vec4(aVertexPosition.xy, uDepth, 1.0);","}"].join("\n")},3846:t=>{"use strict";t.exports=["attribute vec3 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float uDepth;","uniform mat4 uViewportMatrix;","uniform mat4 uProjMatrix;","varying vec2 vTextureCoord;","void main(void) {","  gl_Position = uViewportMatrix * uProjMatrix * vec4(aVertexPosition.xy, 0.0, 1.0);","  gl_Position.z = uDepth * gl_Position.w;","  vTextureCoord = aTextureCoord;","}"].join("\n")},6105:(t,e,i)=>{"use strict";var r=i(5696),n=i(3344),s=i(2604),o=i(8111),a=i(9300),h=i(1227),u={x:"x",y:"y",z:"z",f:"face"};function c(t,e){e=e||{},this._loadPool=new s({concurrency:e.concurrency||4}),this._retryDelay=e.retryDelay||1e4,this._retryMap={},this._sourceFromTile=t}function l(t){return new RegExp("\\{("+t+")\\}","g")}r(c),c.prototype.loadAsset=function(t,e,i){var r,s=this,u=this._retryDelay,c=this._retryMap,l=this._sourceFromTile(e),d=l.url,p=l.rect,f=t.loadImage.bind(t,d,p),m=c[d];if(null!=m){var v=h()-m;v<u?r=u-v:(r=0,delete c[d])}var _=a.bind(null,r);return o(_,(function(t){return s._loadPool.push(f,(function(i,r){i?(i instanceof n&&(c[d]=h(),s.emit("networkError",i,e)),t(i,e)):(delete c[d],t(null,e,r))}))}))(i)},c.fromString=function(t,e){var i=(e=e||{})&&e.cubeMapPreviewFaceOrder||"bdflru";return new c(e.cubeMapPreviewUrl?function(t){return 0===t.z?function(t){var r=i.indexOf(t.face)/6;return{url:e.cubeMapPreviewUrl,rect:{x:0,y:r,width:1,height:1/6}}}(t):r(t)}:r,e);function r(e){var i=t;for(var r in u){var n=u[r],s=l(r),o=e.hasOwnProperty(n)?e[n]:"";i=i.replace(s,o)}return{url:i}}},t.exports=c},541:t=>{"use strict";function e(t){this._asset=t}e.prototype.asset=function(){return this._asset},e.prototype.loadAsset=function(t,e,i){var r=this,n=setTimeout((function(){i(null,e,r._asset)}),0);return function(){clearTimeout(n),i.apply(null,arguments)}},t.exports=e},6611:t=>{"use strict";function e(){this._renderers={}}e.prototype.set=function(t,e,i){this._renderers[t]||(this._renderers[t]={}),this._renderers[t][e]=i},e.prototype.get=function(t,e){return this._renderers[t]&&this._renderers[t][e]||null},t.exports=e},244:(t,e,i)=>{"use strict";var r=i(5696),n=i(8585),s=i(6929),o=i(8667),a=i(610),h=i(6112),u=i(6611);function c(t,e){return t.cmp(e)}function l(t,e){return-t.cmp(e)}function d(t){this._progressive=!(!t||!t.progressive),this._layers=[],this._renderers=[],this._tilesToLoad=[],this._tilesToRender=[],this._tmpVisible=[],this._tmpChildren=[],this._width=0,this._height=0,this._tmpRect={},this._tmpSize={},this._createTextureWorkQueue=new n,this._emitRenderInvalid=this._emitRenderInvalid.bind(this),this._rendererRegistry=new u}r(d),d.prototype.destroy=function(){this.removeAllLayers(),h(this)},d.prototype.registerRenderer=function(t,e,i){return this._rendererRegistry.set(t,e,i)},d.prototype.domElement=function(){throw new Error("Stage implementation must override domElement")},d.prototype.width=function(){return this._width},d.prototype.height=function(){return this._height},d.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},d.prototype.setSize=function(t){this._width=t.width,this._height=t.height,this.setSizeForType(),this.emit("resize"),this._emitRenderInvalid()},d.prototype.setSizeForType=function(t){throw new Error("Stage implementation must override setSizeForType")},d.prototype.loadImage=function(){throw new Error("Stage implementation must override loadImage")},d.prototype._emitRenderInvalid=function(){this.emit("renderInvalid")},d.prototype.validateLayer=function(t){throw new Error("Stage implementation must override validateLayer")},d.prototype.listLayers=function(){return[].concat(this._layers)},d.prototype.hasLayer=function(t){return this._layers.indexOf(t)>=0},d.prototype.addLayer=function(t,e){if(this._layers.indexOf(t)>=0)throw new Error("Layer already in stage");if(null==e&&(e=this._layers.length),e<0||e>this._layers.length)throw new Error("Invalid layer position");this.validateLayer(t);var i=t.geometry().type,r=t.view().type,n=this._rendererRegistry.get(i,r);if(!n)throw new Error("No "+this.type+" renderer avaiable for "+i+" geometry and "+r+" view");var s=this.createRenderer(n);this._layers.splice(e,0,t),this._renderers.splice(e,0,s),t.addEventListener("viewChange",this._emitRenderInvalid),t.addEventListener("effectsChange",this._emitRenderInvalid),t.addEventListener("fixedLevelChange",this._emitRenderInvalid),t.addEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},d.prototype.moveLayer=function(t,e){var i=this._layers.indexOf(t);if(i<0)throw new Error("No such layer in stage");if(e<0||e>=this._layers.length)throw new Error("Invalid layer position");t=this._layers.splice(i,1)[0];var r=this._renderers.splice(i,1)[0];this._layers.splice(e,0,t),this._renderers.splice(e,0,r),this._emitRenderInvalid()},d.prototype.removeLayer=function(t){var e=this._layers.indexOf(t);if(e<0)throw new Error("No such layer in stage");var i=this._layers.splice(e,1)[0],r=this._renderers.splice(e,1)[0];this.destroyRenderer(r),i.removeEventListener("viewChange",this._emitRenderInvalid),i.removeEventListener("effectsChange",this._emitRenderInvalid),i.removeEventListener("fixedLevelChange",this._emitRenderInvalid),i.removeEventListener("textureStoreChange",this._emitRenderInvalid),this._emitRenderInvalid()},d.prototype.removeAllLayers=function(){for(;this._layers.length>0;)this.removeLayer(this._layers[0])},d.prototype.startFrame=function(){throw new Error("Stage implementation must override startFrame")},d.prototype.endFrame=function(){throw new Error("Stage implementation must override endFrame")},d.prototype.render=function(){var t,e,i,r=this._tilesToLoad,n=this._tilesToRender,o=!0,a=this._width,h=this._height,u=this._tmpRect,c=this._tmpSize;if(!(a<=0||h<=0)){for(this.startFrame(),t=0;t<this._layers.length;t++)this._layers[t].textureStore().startFrame();for(t=0;t<this._layers.length;t++){var l,d,p=this._layers[t],f=p.effects(),m=p.view(),v=p.textureStore(),_=this._renderers[t],y=this._layers.length-t;if(s(a,h,f&&f.rect,u),!(u.width<=0||u.height<=0)){for(c.width=u.width*this._width,c.height=u.height*this._height,m.setSize(c),_.startLayer(p,u),i=this._collectTiles(p,v),e=0;e<r.length;e++)l=r[e],v.markTile(l);for(e=0;e<n.length;e++)l=n[e],d=v.texture(l),_.renderTile(l,d,p,y);p.emit("renderComplete",i),i||(o=!1),_.endLayer(p,u)}}for(t=0;t<this._layers.length;t++)this._layers[t].textureStore().endFrame();this.endFrame(),this.emit("renderComplete",o)}},d.prototype._collectTiles=function(t,e){var i=this._tilesToLoad,r=this._tilesToRender,n=this._tmpVisible;i.length=0,r.length=0,n.length=0,t.visibleTiles(n);for(var s=!0,o=0;o<n.length;o++){var a,h=n[o];this._collectTileToLoad(h),e.texture(h)?(a=!1,this._collectTileToRender(h)):(a=this._collectChildren(h,e),s=!1),this._collectParents(h,e,a)}return i.sort(c),r.sort(l),s},d.prototype._collectChildren=function(t,e){var i=this._tmpChildren,r=!0;do{if(i.length=0,!t.children(i))break;r=!1;for(var n=0;n<i.length;n++)t=i[n],e.texture(t)?(this._collectTileToLoad(t),this._collectTileToRender(t)):r=!0}while(r&&1===i.length);return r},d.prototype._collectParents=function(t,e,i){for(var r=this._progressive;(r||i)&&null!=(t=t.parent());){if(i)if(e.texture(t))this._collectTileToRender(t),i=!1;else if(!this._progressive)continue;this._collectTileToLoad(t)||(r=!1)}return i},d.prototype._collectTileToLoad=function(t){return this._collectTileIntoList(t,this._tilesToLoad)},d.prototype._collectTileToRender=function(t){return this._collectTileIntoList(t,this._tilesToRender)},d.prototype._collectTileIntoList=function(t,e){for(var i=!1,r=0;r<e.length;r++)if(t.equals(e[r])){i=!0;break}return i||e.push(t),!i},d.prototype.createTexture=function(t,e,i){var r=this,n=a(o((function(){return new r.TextureClass(r,t,e)})));return this._createTextureWorkQueue.push(n,(function(r,n){i(r,t,e,n)}))},t.exports=d},5662:(t,e,i)=>{"use strict";var r=i(244),n=i(1317),s=i(1206),o=i(5003),a=i(2468),h=i(2533),u=i(6939).setAbsolute,c=i(6939).setFullSize,l=i(6112),d=s.chrome;function p(t){t=t||{};var e=this;this.constructor.super_.call(this,t),this._generateMipmaps=null!=t.generateMipmaps&&t.generateMipmaps,this._loader=new n(this),this._domElement=document.createElement("canvas"),u(this._domElement),c(this._domElement),this._gl=function(t,e){var i={alpha:!0,premultipliedAlpha:!0,antialias:!(!e||!e.antialias),preserveDrawingBuffer:!(!e||!e.preserveDrawingBuffer)},r=t.getContext&&(t.getContext("webgl",i)||t.getContext("experimental-webgl",i));if(!r)throw new Error("Could not get WebGL context");return e.wrapContext&&(r=e.wrapContext(r)),r}(this._domElement,t),this._handleContextLoss=function(){e.emit("webglcontextlost"),e._gl=null},this._domElement.addEventListener("webglcontextlost",this._handleContextLoss),this._rendererInstances=[]}function f(t,e,i){this._stage=t,this._gl=t._gl,this._texture=null,this._timestamp=null,this._width=this._height=null,this.refresh(e,i)}o(p,r),p.prototype.destroy=function(){this._domElement.removeEventListener("webglcontextlost",this._handleContextLoss),this.constructor.super_.prototype.destroy.call(this)},p.prototype.domElement=function(){return this._domElement},p.prototype.webGlContext=function(){return this._gl},p.prototype.setSizeForType=function(){var t=a();this._domElement.width=t*this._width,this._domElement.height=t*this._height},p.prototype.loadImage=function(t,e,i){return this._loader.loadImage(t,e,i)},p.prototype.maxTextureSize=function(){return this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE)},p.prototype.validateLayer=function(t){var e=t.geometry().maxTileSize(),i=this.maxTextureSize();if(e>i)throw new Error("Layer has level with tile size larger than maximum texture size ("+e+" vs. "+i+")")},p.prototype.createRenderer=function(t){for(var e=this._rendererInstances,i=0;i<e.length;i++)if(e[i]instanceof t)return e[i];var r=new t(this._gl);return e.push(r),r},p.prototype.destroyRenderer=function(t){var e=this._rendererInstances;if(this._renderers.indexOf(t)<0){t.destroy();var i=e.indexOf(t);i>=0&&e.splice(i,1)}},p.prototype.startFrame=function(){var t=this._gl;if(!t)throw new Error("Bad WebGL context - maybe context was lost?");t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.enable(t.DEPTH_TEST),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)},p.prototype.endFrame=function(){},p.prototype.takeSnapshot=function(t){"object"==typeof t&&null!=t||(t={});var e=t.quality;if(void 0===e&&(e=75),"number"!=typeof e||e<0||e>100)throw new Error("WebGLStage: Snapshot quality needs to be a number between 0 and 100");return this.render(),this._domElement.toDataURL("image/jpeg",e/100)},p.type=p.prototype.type="webgl",f.prototype.refresh=function(t,e){var i,r=this._gl,n=this._stage,s=e.timestamp();if(s!==this._timestamp){var o=e.element(),a=e.width(),u=e.height();if(a!==this._width||u!==this._height){var c=n.maxTextureSize();if(a>c)throw new Error("Texture width larger than max size ("+a+" vs. "+c+")");if(u>c)throw new Error("Texture height larger than max size ("+u+" vs. "+c+")");this._texture&&r.deleteTexture(i),i=this._texture=r.createTexture(),r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,o)}else i=this._texture,r.bindTexture(r.TEXTURE_2D,i),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),o instanceof HTMLVideoElement&&d?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,o):r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,o);n._generateMipmaps&&h(a)&&h(u)?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_LINEAR),r.generateMipmap(r.TEXTURE_2D)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null),this._timestamp=s,this._width=a,this._height=u}},f.prototype.destroy=function(){this._texture&&this._gl.deleteTexture(this._texture),l(this)},p.TextureClass=p.prototype.TextureClass=f,t.exports=p},8667:t=>{"use strict";t.exports=function(t){return function(e){var i,r;try{r=t()}catch(t){i=t}finally{i?e(i):e(null,r)}}}},6929:t=>{"use strict";t.exports=function(t,e,i,r){var n,s,o,a;return r=r||{},n=null!=i&&null!=i.absoluteWidth?i.absoluteWidth/t:null!=i&&null!=i.relativeWidth?i.relativeWidth:1,s=i&&null!=i.absoluteHeight?i.absoluteHeight/e:null!=i&&null!=i.relativeHeight?i.relativeHeight:1,o=null!=i&&null!=i.absoluteX?i.absoluteX/t:null!=i&&null!=i.relativeX?i.relativeX:0,a=null!=i&&null!=i.absoluteY?i.absoluteY/e:null!=i&&null!=i.relativeY?i.relativeY:0,r.x=o,r.y=a,r.width=n,r.height=s,r}},610:(t,e,i)=>{"use strict";var r=i(827);t.exports=function(t){return function(){if(!arguments.length)throw new Error("cancelized: expected at least one argument");var e=Array.prototype.slice.call(arguments,0),i=e[e.length-1]=r(e[e.length-1]);function n(){i.apply(null,arguments)}return t.apply(null,e),n}}},8111:(t,e,i)=>{"use strict";var r=i(3120);t.exports=function(){var t=Array.prototype.slice.call(arguments,0);return function(){var e=t.slice(0),i=null,n=null,s=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],o=arguments.length?arguments[arguments.length-1]:r;function a(){var t=arguments[0];if(t)return i=n=null,void o.apply(null,arguments);if(!e.length)return i=n=null,void o.apply(null,arguments);var r=i=e.shift(),s=Array.prototype.slice.call(arguments,1);s.push(a);var h=i.apply(null,s);if(r===i){if("function"!=typeof h)throw new Error("chain: chaining on non-cancellable function");n=h}}function h(){n&&n.apply(null,arguments)}return s.unshift(null),a.apply(null,s),h}}},5342:t=>{"use strict";t.exports=function(t,e,i){return Math.min(Math.max(t,e),i)}},6112:t=>{"use strict";t.exports=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=void 0)}},7784:t=>{"use strict";t.exports=function(t,e){return t<e?-1:t>e?1:0}},6414:t=>{"use strict";t.exports=function(){var t=arguments;return function(e){for(var i=e,r=0;r<t.length;r++)i=t[r].call(null,i);return i}}},1745:t=>{"use strict";function e(t,e,i){return 2*Math.atan(i*Math.tan(t/2)/e)}t.exports={convert:e,htov:function(t,i,r){return e(t,i,r)},htod:function(t,i,r){return e(t,i,Math.sqrt(i*i+r*r))},vtoh:function(t,i,r){return e(t,r,i)},vtod:function(t,i,r){return e(t,r,Math.sqrt(i*i+r*r))},dtoh:function(t,i,r){return e(t,Math.sqrt(i*i+r*r),i)},dtov:function(t,i,r){return e(t,Math.sqrt(i*i+r*r),r)}}},4743:t=>{"use strict";t.exports=function(t){return t.toPrecision(15)}},9821:t=>{"use strict";t.exports=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t}},3522:t=>{"use strict";t.exports=function(t,e){setTimeout((function(){e&&e.length>0?t.apply(null,e):t()}),0)}},6389:t=>{"use strict";t.exports=function(t){return t*Math.PI/180}},9300:t=>{"use strict";t.exports=function(t,e){var i=null;return i=setTimeout((function(){null!=i&&(i=null,e(null))}),t),function(){null!=i&&(clearTimeout(i),i=null,e.apply(null,arguments))}}},6939:t=>{"use strict";function e(t){for(var e=document.documentElement.style,i=["Moz","Webkit","Khtml","O","ms"],r=0;r<i.length;r++){var n=i[r]+(t[0].toUpperCase()+t.slice(1));if(n in e)return n}return t}function i(t){var i=e(t);return function(t,e){return t.style[i]=e}}var r=i("transform"),n=i("transformOrigin");t.exports={prefixProperty:e,getWithVendorPrefix:function(t){var i=e(t);return function(t){return t.style[i]}},setWithVendorPrefix:i,setTransform:r,setTransformOrigin:n,setNullTransform:function(t){r(t,"translateZ(0)")},setNullTransformOrigin:function(t){n(t,"0 0 0")},setAbsolute:function(t){t.style.position="absolute"},setPixelPosition:function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},setPixelSize:function(t,e,i){t.style.width=e+"px",t.style.height=i+"px"},setNullSize:function(t){t.style.width=t.style.height=0},setFullSize:function(t){t.style.width=t.style.height="100%"},setOverflowHidden:function(t){t.style.overflow="hidden"},setOverflowVisible:function(t){t.style.overflow="visible"},setNoPointerEvents:function(t){t.style.pointerEvents="none"},setBlocking:function(t){t.style.backgroundColor="#000",t.style.opacity="0",t.style.filter="alpha(opacity=0)"}}},8804:t=>{"use strict";t.exports=function(t,e){for(var i in e)t[i]=e[i];return t}},5135:(t,e,i)=>{"use strict";var r="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==i.g?i.g:null;t.exports=r},6056:t=>{"use strict";t.exports=function(){for(var t=0,e=0;e<arguments.length;e++){var i=arguments[e];t+=i,t+=i<<10,t^=i>>6}return t+=t<<3,t^=t>>11,(t+=t<<15)>=0?t:-t}},5003:t=>{"use strict";t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},2533:t=>{"use strict";t.exports=function(t){return 0==(t&t-1)}},8001:t=>{"use strict";t.exports=function(t,e){return(+t%(e=+e)+e)%e}},3120:t=>{"use strict";t.exports=function(){}},1227:t=>{"use strict";t.exports="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()}},827:t=>{"use strict";t.exports=function(t){var e,i=!1;return function(){return i||(i=!0,e=t.apply(null,arguments)),e}}},2468:t=>{"use strict";t.exports=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var t=window.screen;if(t&&t.deviceXDPI&&t.logicalXDPI)return t.deviceXDPI/t.logicalXDPI;if(t&&t.systemXDPI&&t.logicalXDPI)return t.systemXDPI/t.logicalXDPI}return 1}},7691:(t,e,i)=>{"use strict";var r=i(6939).setTransform,n=i(4743);t.exports=function(t,e,i,s){s=s||"";var o="translateX("+n(e)+"px) translateY("+n(i)+"px) translateZ(0) "+s;r(t,o)}},910:t=>{"use strict";t.exports=function(t){return 180*t/Math.PI}},6467:t=>{"use strict";t.exports=function(t){return"number"==typeof t&&isFinite(t)}},2582:(t,e,i)=>{"use strict";var r=i(3120);t.exports=function(t){return function(){var e=arguments.length?Array.prototype.slice.call(arguments,0,arguments.length-1):[],i=arguments.length?arguments[arguments.length-1]:r,n=null,s=!1;function o(){var r=arguments[0];!r||s?i.apply(null,arguments):n=t.apply(null,e)}return e.push(o),o(!0),function(){s=!0,n.apply(null,arguments)}}}},5026:(t,e,i)=>{"use strict";var r=i(1227);t.exports=function(t,e,i){var n=!1,s=r();return e(0),requestAnimationFrame((function o(){if(!n){var a=(r()-s)/t;a<1?(e(a),requestAnimationFrame(o)):(e(1),i())}})),function(){n=!0,i.apply(null,arguments)}}},3969:t=>{"use strict";t.exports=function(t){var e=typeof t;if("object"===e){if(null===t)return"null";if("[object Array]"===Object.prototype.toString.call(t))return"array";if("[object RegExp]"===Object.prototype.toString.call(t))return"regexp"}return e}},8793:(t,e,i)=>{"use strict";var r=i(5696),n=i(887).mat4,s=i(887).vec4,o=i(2468),a=i(6467),h=i(5342),u=i(6112),c=[1,0,1,0],l=[-1,-1,1,1];function d(t,e){if(!t||null==t.mediaAspectRatio)throw new Error("mediaAspectRatio must be defined");this._x=t&&null!=t.x?t.x:.5,this._y=t&&null!=t.y?t.y:.5,this._zoom=t&&null!=t.zoom?t.zoom:1,this._mediaAspectRatio=t.mediaAspectRatio,this._width=t&&null!=t.width?t.width:0,this._height=t&&null!=t.height?t.height:0,this._limiter=e||null,this._projMatrix=n.create(),this._invProjMatrix=n.create(),this._frustum=[0,0,0,0],this._projectionChanged=!0,this._params={},this._vec=s.create(),this._update()}r(d),d.prototype.destroy=function(){u(this)},d.prototype.x=function(){return this._x},d.prototype.y=function(){return this._y},d.prototype.zoom=function(){return this._zoom},d.prototype.mediaAspectRatio=function(){return this._mediaAspectRatio},d.prototype.width=function(){return this._width},d.prototype.height=function(){return this._height},d.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},d.prototype.parameters=function(t){return(t=t||{}).x=this._x,t.y=this._y,t.zoom=this._zoom,t.mediaAspectRatio=this._mediaAspectRatio,t},d.prototype.limiter=function(){return this._limiter},d.prototype.setX=function(t){this._resetParams(),this._params.x=t,this._update(this._params)},d.prototype.setY=function(t){this._resetParams(),this._params.y=t,this._update(this._params)},d.prototype.setZoom=function(t){this._resetParams(),this._params.zoom=t,this._update(this._params)},d.prototype.offsetX=function(t){this.setX(this._x+t)},d.prototype.offsetY=function(t){this.setY(this._y+t)},d.prototype.offsetZoom=function(t){this.setZoom(this._zoom+t)},d.prototype.setMediaAspectRatio=function(t){this._resetParams(),this._params.mediaAspectRatio=t,this._update(this._params)},d.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},d.prototype.setParameters=function(t){this._resetParams(),this._params.x=t.x,this._params.y=t.y,this._params.zoom=t.zoom,this._params.mediaAspectRatio=t.mediaAspectRatio,this._update(this._params)},d.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},d.prototype._resetParams=function(){var t=this._params;t.x=null,t.y=null,t.zoom=null,t.mediaAspectRatio=null,t.width=null,t.height=null},d.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._x,i=this._y,r=this._zoom,n=this._mediaAspectRatio,s=this._width,o=this._height;if(t.x=null!=t.x?t.x:e,t.y=null!=t.y?t.y:i,t.zoom=null!=t.zoom?t.zoom:r,t.mediaAspectRatio=null!=t.mediaAspectRatio?t.mediaAspectRatio:n,t.width=null!=t.width?t.width:s,t.height=null!=t.height?t.height:o,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var u=t.x,c=t.y,l=t.zoom,d=t.mediaAspectRatio,p=t.width,f=t.height;if(!(a(u)&&a(c)&&a(l)&&a(d)&&a(p)&&a(f)))throw new Error("Bad view - suspect a broken limiter");l=h(l,1e-6,1/0),this._x=u,this._y=c,this._zoom=l,this._mediaAspectRatio=d,this._width=p,this._height=f,u===e&&c===i&&l===r&&d===n&&p===s&&f===o||(this._projectionChanged=!0,this.emit("change")),p===s&&f===o||this.emit("resize")},d.prototype._zoomX=function(){return this._zoom},d.prototype._zoomY=function(){var t=this._mediaAspectRatio,e=this._width/this._height,i=this._zoom,r=i*t/e;return isNaN(r)&&(r=i),r},d.prototype.updateWithControlParameters=function(t){var e=this.zoom(),i=this._zoomX(),r=this._zoomY();this.offsetX(t.axisScaledX*i+t.x*e),this.offsetY(t.axisScaledY*r+t.y*e),this.offsetZoom(t.zoom*e)},d.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,i=this._frustum;if(this._projectionChanged){var r=this._x,s=this._y,o=this._zoomX(),a=this._zoomY(),h=i[0]=.5-s+.5*a,u=i[1]=r-.5+.5*o,c=i[2]=.5-s-.5*a,l=i[3]=r-.5-.5*o;n.ortho(t,l,u,c,h,-1,1),n.invert(e,t),this._projectionChanged=!1}},d.prototype.projection=function(){return this._updateProjection(),this._projMatrix},d.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},d.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,i=0;i<e.length;i++){for(var r=e[i],n=c[i],s=l[i],o=!1,a=0;a<t.length;a++){var h=t[a];if(s<0&&h[n]<r||s>0&&h[n]>r){o=!0;break}}if(!o)return!1}return!0},d.prototype.selectLevel=function(t){for(var e=o()*this.width(),i=this._zoom,r=0;r<t.length;r++){var n=t[r];if(i*n.width()>=e)return n}return t[t.length-1]},d.prototype.coordinatesToScreen=function(t,e){var i=this._vec;e||(e={});var r=this._width,n=this._height;if(r<=0||n<=0)return e.x=null,e.y=null,null;var o=t&&null!=t.x?t.x:.5,a=t&&null!=t.y?t.y:.5;s.set(i,o-.5,.5-a,-1,1),s.transformMat4(i,i,this.projection());for(var h=0;h<3;h++)i[h]/=i[3];return e.x=r*(i[0]+1)/2,e.y=n*(1-i[1])/2,e},d.prototype.screenToCoordinates=function(t,e){var i=this._vec;e||(e={});var r=this._width,n=this._height,o=2*t.x/r-1,a=1-2*t.y/n;return s.set(i,o,a,1,1),s.transformMat4(i,i,this.inverseProjection()),e.x=.5+i[0],e.y=.5-i[1],e},d.limit={x:function(t,e){return function(i){return i.x=h(i.x,t,e),i}},y:function(t,e){return function(i){return i.y=h(i.y,t,e),i}},zoom:function(t,e){return function(i){return i.zoom=h(i.zoom,t,e),i}},resolution:function(t){return function(e){if(e.width<=0||e.height<=0)return e;var i=e.width,r=o()*i/t;return e.zoom=h(e.zoom,r,1/0),e}},visibleX:function(t,e){return function(i){var r=e-t;i.zoom>r&&(i.zoom=r);var n=t+.5*i.zoom,s=e-.5*i.zoom;return i.x=h(i.x,n,s),i}},visibleY:function(t,e){return function(i){if(i.width<=0||i.height<=0)return i;var r=i.width/i.height/i.mediaAspectRatio,n=(e-t)*r;i.zoom>n&&(i.zoom=n);var s=t+.5*i.zoom/r,o=e-.5*i.zoom/r;return i.y=h(i.y,s,o),i}},letterbox:function(){return function(t){if(t.width<=0||t.height<=0)return t;var e,i,r,n,s=t.width/t.height,o=s/t.mediaAspectRatio;return t.mediaAspectRatio>=s&&(t.zoom=Math.min(t.zoom,1)),t.mediaAspectRatio<=s&&(t.zoom=Math.min(t.zoom,o)),t.zoom>1?e=i=.5:(e=0+.5*t.zoom/1,i=1-.5*t.zoom/1),t.zoom>o?r=n=.5:(r=0+.5*t.zoom/o,n=1-.5*t.zoom/o),t.x=h(t.x,e,i),t.y=h(t.y,r,n),t}}},d.type=d.prototype.type="flat",t.exports=d},3070:(t,e,i)=>{"use strict";var r=i(5696),n=i(887).mat4,s=i(887).vec4,o=i(2468),a=i(1745),h=i(8001),u=i(6467),c=i(5342),l=i(4743),d=i(6414),p=i(6112),f=Math.PI/4,m=1e-6;function v(t,e){this._yaw=t&&null!=t.yaw?t.yaw:0,this._pitch=t&&null!=t.pitch?t.pitch:0,this._roll=t&&null!=t.roll?t.roll:0,this._fov=t&&null!=t.fov?t.fov:f,this._width=t&&null!=t.width?t.width:0,this._height=t&&null!=t.height?t.height:0,this._projectionCenterX=t&&null!=t.projectionCenterX?t.projectionCenterX:0,this._projectionCenterY=t&&null!=t.projectionCenterY?t.projectionCenterY:0,this._limiter=e||null,this._projMatrix=n.create(),this._invProjMatrix=n.create(),this._frustum=[s.create(),s.create(),s.create(),s.create(),s.create()],this._projectionChanged=!0,this._params={},this._fovs={},this._tmpVec=s.create(),this._update()}r(v),v.prototype.destroy=function(){p(this)},v.prototype.yaw=function(){return this._yaw},v.prototype.pitch=function(){return this._pitch},v.prototype.roll=function(){return this._roll},v.prototype.projectionCenterX=function(){return this._projectionCenterX},v.prototype.projectionCenterY=function(){return this._projectionCenterY},v.prototype.fov=function(){return this._fov},v.prototype.width=function(){return this._width},v.prototype.height=function(){return this._height},v.prototype.size=function(t){return(t=t||{}).width=this._width,t.height=this._height,t},v.prototype.parameters=function(t){return(t=t||{}).yaw=this._yaw,t.pitch=this._pitch,t.roll=this._roll,t.fov=this._fov,t},v.prototype.limiter=function(){return this._limiter},v.prototype.setYaw=function(t){this._resetParams(),this._params.yaw=t,this._update(this._params)},v.prototype.setPitch=function(t){this._resetParams(),this._params.pitch=t,this._update(this._params)},v.prototype.setRoll=function(t){this._resetParams(),this._params.roll=t,this._update(this._params)},v.prototype.setFov=function(t){this._resetParams(),this._params.fov=t,this._update(this._params)},v.prototype.setProjectionCenterX=function(t){this._resetParams(),this._params.projectionCenterX=t,this._update(this._params)},v.prototype.setProjectionCenterY=function(t){this._resetParams(),this._params.projectionCenterY=t,this._update(this._params)},v.prototype.offsetYaw=function(t){this.setYaw(this._yaw+t)},v.prototype.offsetPitch=function(t){this.setPitch(this._pitch+t)},v.prototype.offsetRoll=function(t){this.setRoll(this._roll+t)},v.prototype.offsetFov=function(t){this.setFov(this._fov+t)},v.prototype.setSize=function(t){this._resetParams(),this._params.width=t.width,this._params.height=t.height,this._update(this._params)},v.prototype.setParameters=function(t){this._resetParams(),this._params.yaw=t.yaw,this._params.pitch=t.pitch,this._params.roll=t.roll,this._params.fov=t.fov,this._params.projectionCenterX=t.projectionCenterX,this._params.projectionCenterY=t.projectionCenterY,this._update(this._params)},v.prototype.setLimiter=function(t){this._limiter=t||null,this._update()},v.prototype._resetParams=function(){var t=this._params;t.yaw=null,t.pitch=null,t.roll=null,t.fov=null,t.width=null,t.height=null},v.prototype._update=function(t){null==t&&(this._resetParams(),t=this._params);var e=this._yaw,i=this._pitch,r=this._roll,n=this._fov,s=this._projectionCenterX,o=this._projectionCenterY,a=this._width,h=this._height;if(t.yaw=null!=t.yaw?t.yaw:e,t.pitch=null!=t.pitch?t.pitch:i,t.roll=null!=t.roll?t.roll:r,t.fov=null!=t.fov?t.fov:n,t.width=null!=t.width?t.width:a,t.height=null!=t.height?t.height:h,t.projectionCenterX=null!=t.projectionCenterX?t.projectionCenterX:s,t.projectionCenterY=null!=t.projectionCenterY?t.projectionCenterY:o,this._limiter&&!(t=this._limiter(t)))throw new Error("Bad view limiter");var c=(t=this._normalize(t)).yaw,l=t.pitch,d=t.roll,p=t.fov,f=t.width,m=t.height,v=t.projectionCenterX,_=t.projectionCenterY;if(!(u(c)&&u(l)&&u(d)&&u(p)&&u(f)&&u(m)&&u(v)&&u(_)))throw new Error("Bad view - suspect a broken limiter");this._yaw=c,this._pitch=l,this._roll=d,this._fov=p,this._width=f,this._height=m,this._projectionCenterX=v,this._projectionCenterY=_,c===e&&l===i&&d===r&&p===n&&f===a&&m===h&&v===s&&_===o||(this._projectionChanged=!0,this.emit("change")),f===a&&m===h||this.emit("resize")},v.prototype._normalize=function(t){this._normalizeCoordinates(t);var e=a.htov(Math.PI,t.width,t.height),i=isNaN(e)?Math.PI:Math.min(Math.PI,e);return t.fov=c(t.fov,m,i-m),t},v.prototype._normalizeCoordinates=function(t){return"yaw"in t&&(t.yaw=h(t.yaw-Math.PI,-2*Math.PI)+Math.PI),"pitch"in t&&(t.pitch=h(t.pitch-Math.PI,-2*Math.PI)+Math.PI),"roll"in t&&(t.roll=h(t.roll-Math.PI,-2*Math.PI)+Math.PI),t},v.prototype.normalizeToClosest=function(t,e){var i=this._yaw,r=this._pitch,n=t.yaw,s=t.pitch,o=n-2*Math.PI,a=n+2*Math.PI;Math.abs(o-i)<Math.abs(n-i)?n=o:Math.abs(a-i)<Math.abs(n-i)&&(n=a);var h=s-2*Math.PI,u=s+2*Math.PI;return Math.abs(h-r)<Math.abs(s-r)?s=h:Math.abs(h-r)<Math.abs(s-r)&&(s=u),(e=e||{}).yaw=n,e.pitch=s,e},v.prototype.updateWithControlParameters=function(t){var e=this._fov,i=a.vtoh(e,this._width,this._height);isNaN(i)&&(i=e),this.offsetYaw(t.axisScaledX*i+2*t.x*i+t.yaw),this.offsetPitch(t.axisScaledY*e+2*t.y*i+t.pitch),this.offsetRoll(-t.roll),this.offsetFov(t.zoom*e)},v.prototype._updateProjection=function(){var t=this._projMatrix,e=this._invProjMatrix,i=this._frustum;if(this._projectionChanged){var r=this._width,s=this._height,o=this._fov,h=a.vtoh(o,r,s),u=r/s,c=this._projectionCenterX,l=this._projectionCenterY;if(0!==c||0!==l){var d=Math.atan(2*c*Math.tan(h/2)),p=Math.atan(2*l*Math.tan(o/2)),f=this._fovs;f.leftDegrees=180*(h/2+d)/Math.PI,f.rightDegrees=180*(h/2-d)/Math.PI,f.upDegrees=180*(o/2+p)/Math.PI,f.downDegrees=180*(o/2-p)/Math.PI,n.perspectiveFromFieldOfView(t,f,-1,1)}else n.perspective(t,o,u,-1,1);n.rotateZ(t,t,this._roll),n.rotateX(t,t,this._pitch),n.rotateY(t,t,this._yaw),n.invert(e,t),this._matrixToFrustum(t,i),this._projectionChanged=!1}},v.prototype._matrixToFrustum=function(t,e){s.set(e[0],t[3]+t[0],t[7]+t[4],t[11]+t[8],0),s.set(e[1],t[3]-t[0],t[7]-t[4],t[11]-t[8],0),s.set(e[2],t[3]+t[1],t[7]+t[5],t[11]+t[9],0),s.set(e[3],t[3]-t[1],t[7]-t[5],t[11]-t[9],0),s.set(e[4],t[3]+t[2],t[7]+t[6],t[11]+t[10],0)},v.prototype.projection=function(){return this._updateProjection(),this._projMatrix},v.prototype.inverseProjection=function(){return this._updateProjection(),this._invProjMatrix},v.prototype.intersects=function(t){this._updateProjection();for(var e=this._frustum,i=this._tmpVec,r=0;r<e.length;r++){for(var n=e[r],o=!1,a=0;a<t.length;a++){var h=t[a];s.set(i,h[0],h[1],h[2],0),s.dot(n,i)>=0&&(o=!0)}if(!o)return!1}return!0},v.prototype.selectLevel=function(t){for(var e=o()*this._height,i=Math.tan(.5*this._fov),r=0;r<t.length;r++){var n=t[r];if(i*n.height()>=e)return n}return t[t.length-1]},v.prototype.coordinatesToScreen=function(t,e){var i=this._tmpVec;e||(e={});var r=this._width,n=this._height;if(r<=0||n<=0)return e.x=null,e.y=null,null;var o=t.yaw,a=t.pitch,h=Math.sin(o)*Math.cos(a),u=-Math.sin(a),c=-Math.cos(o)*Math.cos(a);return s.set(i,h,u,c,1),s.transformMat4(i,i,this.projection()),i[3]>=0?(e.x=r*(i[0]/i[3]+1)/2,e.y=n*(1-i[1]/i[3])/2,e):(e.x=null,e.y=null,null)},v.prototype.screenToCoordinates=function(t,e){var i=this._tmpVec;e||(e={});var r=this._width,n=this._height,o=2*t.x/r-1,a=1-2*t.y/n;s.set(i,o,a,1,1),s.transformMat4(i,i,this.inverseProjection());var h=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return e.yaw=Math.atan2(i[0],-i[2]),e.pitch=Math.acos(i[1]/h)-Math.PI/2,this._normalizeCoordinates(e),e},v.prototype.coordinatesToPerspectiveTransform=function(t,e,i){i=i||"";var r=this._height,n=this._width,s=this._fov,o=.5*r/Math.tan(s/2),a="";return a+="translateX("+l(n/2)+"px) ",a+="translateY("+l(r/2)+"px) ",a+="translateX(-50%) translateY(-50%) ",a+="perspective("+l(o)+"px) ",a+="translateZ("+l(o)+"px) ",a+="rotateZ("+l(-this._roll)+"rad) ",a+="rotateX("+l(-this._pitch)+"rad) ",a+="rotateY("+l(this._yaw)+"rad) ",a+="rotateY("+l(-t.yaw)+"rad) ",a+="rotateX("+l(t.pitch)+"rad) ",(a+="translateZ("+l(-e)+"px) ")+(i+" ")},v.limit={yaw:function(t,e){return function(i){return i.yaw=c(i.yaw,t,e),i}},pitch:function(t,e){return function(i){return i.pitch=c(i.pitch,t,e),i}},roll:function(t,e){return function(i){return i.roll=c(i.roll,t,e),i}},hfov:function(t,e){return function(i){var r=i.width,n=i.height;if(r>0&&n>0){var s=a.htov(t,r,n),o=a.htov(e,r,n);i.fov=c(i.fov,s,o)}return i}},vfov:function(t,e){return function(i){return i.fov=c(i.fov,t,e),i}},resolution:function(t){return function(e){var i=e.height;if(i){var r=o()*i,n=2*Math.atan(r/t);e.fov=c(e.fov,n,1/0)}return e}},traditional:function(t,e,i){return i=null!=i?i:e,d(v.limit.resolution(t),v.limit.vfov(0,e),v.limit.hfov(0,i),v.limit.pitch(-Math.PI/2,Math.PI/2))}},v.type=v.prototype.type="rectilinear",t.exports=v},5696:t=>{"use strict";function e(){}e.prototype.addEventListener=function(t,e){var i=this.__events=this.__events||{},r=i[t]=i[t]||[];r.indexOf(e)<0&&r.push(e)},e.prototype.removeEventListener=function(t,e){var i=(this.__events=this.__events||{})[t];if(i){var r=i.indexOf(e);r>=0&&i.splice(r,1)}},e.prototype.emit=function(t,e){var i=this.__events=this.__events||{},r=i[t],n=Array.prototype.slice.call(arguments,1);if(r)for(var s=0;s<r.length;s++){var o=r[s];o.apply(this,n)}},t.exports=function(t){for(var i in e.prototype)e.prototype.hasOwnProperty(i)&&(t.prototype[i]=e.prototype[i])}},577:t=>{!function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},i=t.exports,r=function(){for(var t,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,n=i.length,s={};r<n;r++)if((t=i[r])&&t[1]in e){for(r=0;r<t.length;r++)s[i[0][r]]=t[r];return s}return!1}(),n={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(t,i){return new Promise(function(n,s){var o=function(){this.off("change",o),n()}.bind(this);this.on("change",o);var a=(t=t||e.documentElement)[r.requestFullscreen](i);a instanceof Promise&&a.then(o).catch(s)}.bind(this))},exit:function(){return new Promise(function(t,i){if(this.isFullscreen){var n=function(){this.off("change",n),t()}.bind(this);this.on("change",n);var s=e[r.exitFullscreen]();s instanceof Promise&&s.then(n).catch(i)}else t()}.bind(this))},toggle:function(t,e){return this.isFullscreen?this.exit():this.request(t,e)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,i){var r=n[t];r&&e.addEventListener(r,i,!1)},off:function(t,i){var r=n[t];r&&e.removeEventListener(r,i,!1)},raw:r};r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),i?t.exports=s:window.screenfull=s):i?t.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()}},e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}i.amdO={},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=i(5982),e=i.n(t),r=i(1206),n=i.n(r),s=i(577),o=i.n(s);const a=window.APP_DATA,h=document.querySelector("#pano"),u=document.querySelector("#titleBar .sceneName"),c=(document.querySelector("#sceneList"),document.querySelectorAll("#sceneList .scene")),l=(document.querySelector("#sceneListToggle"),document.querySelector("#fullscreenToggle"));if(window.matchMedia){const t=function(){e.matches?(document.body.classList.remove("desktop"),document.body.classList.add("mobile")):(document.body.classList.remove("mobile"),document.body.classList.add("desktop"))},e=matchMedia("(max-width: 700px), (max-height: 500px)");t(),e.addListener(t)}else document.body.classList.add("desktop");document.body.classList.add("no-touch"),window.addEventListener("touchstart",(function(t){document.body.classList.remove("no-touch"),document.body.classList.add("touch")})),n().msie&&parseFloat(n().version)<11&&document.body.classList.add("tooltip-fallback");const d={controls:{mouseViewMode:a.settings.mouseViewMode,scrollZoom:!1}},p=new(e().Viewer)(h,d),f=a.scenes.map((function(t){const i=e().ImageUrlSource.fromString("tiles/"+t.id+"/{z}/{f}/{y}/{x}.jpg",{cubeMapPreviewUrl:"tiles/"+t.id+"/preview.jpg"}),r=new(e().CubeGeometry)(t.levels),n=e().RectilinearView.limit.traditional(t.faceSize,100*Math.PI/180,120*Math.PI/180),s=new(e().RectilinearView)(t.initialViewParameters,n),o=p.createScene({source:i,geometry:r,view:s,pinFirstLevel:!0});return t.linkHotspots.forEach((function(t){const e=function(t){const e=document.createElement("div");e.classList.add("hotspot"),e.classList.add("link-hotspot");const i=document.createElement("img");i.src="./SVG/arrow-up-circle-fill.svg",i.classList.add("link-hotspot-icon");const r=["-ms-transform","-webkit-transform","transform"];for(let e=0;e<r.length;e++){const n=r[e];i.style[n]="rotate("+t.rotation+"rad)"}e.addEventListener("click",(function(){m(function(t){for(let e=0;e<f.length;e++)if(f[e].data.id===t)return f[e];return null}(t.target))}));const n=document.createElement("div");return n.classList.add("hotspot-tooltip"),n.classList.add("link-hotspot-tooltip"),n.innerHTML=v(t.target).name,e.appendChild(i),e.appendChild(n),e}(t);o.hotspotContainer().createHotspot(e,{yaw:t.yaw,pitch:t.pitch})})),t.infoHotspots.forEach((function(t){const e=function(t){const e=document.createElement("div");e.classList.add("hotspot"),e.classList.add("info-hotspot");const i=document.createElement("div");i.classList.add("info-hotspot-header");const r=document.createElement("div");r.classList.add("info-hotspot-icon-wrapper");const n=document.createElement("img");n.src="./assets/PC-Seal_Solid-white-95black_Registered.png",n.classList.add("info-hotspot-icon"),r.appendChild(n);const s=document.createElement("div");s.classList.add("info-hotspot-title-wrapper");const o=document.createElement("div");o.classList.add("info-hotspot-title"),o.innerHTML=t.title,s.appendChild(o);const a=document.createElement("div");a.classList.add("info-hotspot-close-wrapper");const h=document.createElement("img");h.src="./SVG/close-line.svg",h.classList.add("info-hotspot-close-icon"),a.appendChild(h),i.appendChild(r),i.appendChild(s),i.appendChild(a);const u=document.createElement("div");u.classList.add("info-hotspot-content");const c=document.createElement("div");c.classList.add("product-txt-container");const l=document.createElement("div");l.classList.add("product-txt-wrapper");const d=document.createElement("h2");d.classList.add("product-txt-subhead"),d.innerHTML=t.subhead;const p=document.createElement("div");p.innerHTML=t.text,p.classList.add("product-txt");const f=document.createElement("div");f.classList.add("recipes");const m=document.createElement("h2");m.classList.add("recipes-header"),m.textContent="Recipes to Try:",f.appendChild(m);const v=document.createElement("div");if(v.classList.add("recipes-list"),null!=t.recipes)for(let e=0;e<t.recipes.length;e++){const i=document.createElement("li"),r=document.createElement("a");r.classList.add("recipe-link"),r.href=t.recipes[e].link,r.setAttribute("target","_blank");const n=document.createElement("div");n.classList.add("recipe-preview-img-wrap"),n.style.backgroundImage=`url(${t.recipes[e].preview_image})`;const s=document.createElement("p");s.classList.add("recipe-title"),s.innerHTML=t.recipes[e].id,s.href=t.recipes[e].link,s.setAttribute("target","_blank"),r.appendChild(n),r.appendChild(s),i.appendChild(r),v.appendChild(i)}else if(null!=t.related_content){for(let e=0;e<t.related_content.length;e++){const i=document.createElement("li"),r=document.createElement("a");r.classList.add("recipe-link"),r.href=t.related_content[e].link,r.setAttribute("target","_blank");const n=document.createElement("div");n.classList.add("recipe-preview-img-wrap"),n.classList.add("__related-content"),n.style.backgroundImage=`url(${t.related_content[e].preview_image})`;const s=document.createElement("p");s.classList.add("recipe-title"),s.classList.add("__related_"),s.innerHTML=t.related_content[e].id,s.href=t.related_content[e].link,s.setAttribute("target","_blank"),r.appendChild(n),r.appendChild(s),i.appendChild(r),v.appendChild(i)}m.textContent="Related Content:"}else if(null!=t.pdf_links){for(let e=0;e<t.pdf_links.length;e++){const i=document.createElement("li"),r=document.createElement("a");r.classList.add("recipe-link"),r.href=t.pdf_links[e].link,r.setAttribute("target","_blank");const n=document.createElement("div");r.appendChild(n),n.classList.add("recipe-preview-img-wrap"),n.style.backgroundImage=`url(${t.pdf_links[e].preview_image})`;const s=document.createElement("p");s.classList.add("recipe-title"),s.innerHTML=t.pdf_links[e].id,s.href=t.pdf_links[e].link,s.setAttribute("target","_blank"),r.appendChild(s),i.appendChild(r),v.appendChild(i)}m.textContent="Downloads"}else m.textContent="";f.appendChild(v),l.appendChild(d),l.appendChild(p),l.appendChild(f),c.appendChild(l);const _=document.createElement("div");_.classList.add("carousel_container");const y=document.createElement("div");y.classList.add("carousel");const g=document.createElement("div");g.classList.add("carousel-images");const M=document.createElement("div");M.classList.add("carousel-nav");const w=document.createElement("img");w.src="./SVG/chevron-right.svg",w.classList.add("carousel-button"),w.classList.add("next"),w.setAttribute("id","next");const b=document.createElement("img");b.src="./SVG/chevron-left.svg",b.classList.add("carousel-button"),b.classList.add("previous"),b.setAttribute("id","previous");const x=document.createElement("ul");x.classList.add("carousel-pagination");for(let e=0;e<t.images.length;e++){const i=document.createElement("li");i.classList.add("carousel-bullet");const r=document.createElement("div");if(2===t.images[e].length){r.style.backgroundImage=`url(${t.images[e][1]})`;const i=document.createElement("div");i.classList.add("influencer_credit_container");const n=document.createElement("div");n.classList.add("pointer"),i.appendChild(n);const s=document.createElement("span");s.classList.add("influencer_credit"),s.innerHTML=": "+t.images[e][0],i.appendChild(s),r.appendChild(i)}else r.style.backgroundImage=`url(${t.images[e]})`;r.classList.add("product-image"),t.containImages&&(r.style.backgroundSize="contain",r.style.width="80%",r.style.height="80%",r.style.alignSelf="center"),g.appendChild(r),x.appendChild(i),_.appendChild(x)}if(null!=t.videos)for(let e=0;e<t.videos.length;e++){const i=document.createElement("li");i.classList.add("carousel-bullet");const r=document.createElement("div");r.classList.add("iframe_container__video"),r.innerHTML=t.videos[e],x.appendChild(i),g.appendChild(r)}M.appendChild(w),y.appendChild(g),M.appendChild(b),_.appendChild(M),_.appendChild(y),u.appendChild(c),u.appendChild(_),e.appendChild(i),e.appendChild(u);const E=document.createElement("div");E.innerHTML=e.innerHTML,E.classList.add("info-hotspot-modal"),document.body.appendChild(E);const T=function(){let t=E.getElementsByTagName("iframe");if(null!=t)for(let e=0;e<t.length;e++)t[e].src=t[e].src},L=function(){setTimeout((function(){E.querySelector(".product-txt-container")&&(E.querySelector(".product-txt-container").scrollTo(0,0),H(0))}),1e3),T()},S=function(){E.classList.toggle("visible")};e.querySelector(".info-hotspot-header").addEventListener("click",S),E.querySelector(".info-hotspot-close-wrapper").addEventListener("click",S),E.addEventListener("mouseover",(function(t){t.target===E&&E.classList.contains("visible")&&E.addEventListener("click",(function(t){t.target===E&&E.classList.contains("visible")&&(E.classList.remove("visible"),L())}))}));const C=E.querySelector("#next"),A=E.querySelector("#previous"),P=E.querySelector(".carousel-images"),R=E.querySelectorAll(".carousel-images > *").length,F=E.querySelector(".carousel-pagination"),z=[].slice.call(E.querySelectorAll(".carousel-bullet"));let k=0,O=0,I=0;function H(t){t=t<0?R-1:t>=R?0:t,P.style.WebkitTransform=P.style.transform="translate(-"+100*t+"%, 0)",z[k].classList.remove("active-bullet"),z[t].classList.add("active-bullet"),k=t,T()}if(document.body.addEventListener("keydown",(t=>{"Escape"===t.key&&E.classList.remove("visible"),L()}),{passive:!0}),P.addEventListener("touchstart",(t=>{O=t.changedTouches[0].pageX})),P.addEventListener("touchend",(t=>{I=t.changedTouches[0].pageX,I<O&&k!==R-1&&C.click(),I>O&&0!==k&&A.click()})),P.addEventListener("wheel",(t=>{let e=1*t.deltaY;-1===Math.sign(e)?0!==k&&A.click():k!==R-1&&C.click()}),{passive:!0}),z[k].classList.add("active-bullet"),A.addEventListener("click",(function(){H(k-1)}),!1),C.addEventListener("click",(function(){H(k+1)}),!1),F.addEventListener("click",(function(t){let e=z.indexOf(t.target);-1!==e&&e!==k&&H(e)}),!1),t.fullWidth){let e=E.querySelector("div.info-hotspot-content");e.classList.add("fullwidth_modal"),function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(e);const i=document.createElement("div");i.classList.add("iframe_container"),i.innerHTML=t.text,e.appendChild(i)}return e}(t);o.hotspotContainer().createHotspot(e,{yaw:t.yaw,pitch:t.pitch},{perspective:{radius:420}})})),{data:t,scene:o,view:s}}));function m(t){t.view.setParameters(t.data.initialViewParameters),t.scene.switchTo(),function(t){u.innerHTML=t.data.name.replace("&","&amp;").replace("<","&lt;").replace(">","&gt;")}(t),function(t){for(let e=0;e<c.length;e++){const i=c[e];i.getAttribute("data-id")===t.data.id?i.classList.add("current"):i.classList.remove("current")}}(t)}function v(t){for(let e=0;e<a.scenes.length;e++)if(a.scenes[e].id===t)return a.scenes[e];return null}o().enabled&&a.settings.fullscreenButton?(document.body.classList.add("fullscreen-enabled"),l.addEventListener("click",(function(){o().toggle()})),o().on("change",(function(){o().isFullscreen?l.classList.add("enabled"):l.classList.remove("enabled")}))):document.body.classList.add("fullscreen-disabled"),m(f[0]);const _=document.querySelector(".preloader"),y=document.querySelector("#titleBar");window.addEventListener("load",(function(){h.style.opacity=1,y.style.opacity=1,_.style.display="none"}))})()})();